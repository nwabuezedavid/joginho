!function(){var e={14:function(){$(function(){$("p .currentDate").replaceWith(function(e){e=e||new Date;var t=("ES"===$(".nav-desktop-bar #langIndicatorToggleButton").attr("data-current-locale")?["Enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubure","noviembre","diciembre"]:["January","February","March","April","May","June","July","August","September","October","November","December"])[e.getMonth()],a=e.getDate().toString().length>1?e.getDate():"0"+e.getDate(),r=String(t+" "+a+", "+parseInt(e.getFullYear()));return String(r)}());var e,t,a,r=(e="zipcode",t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")),a=t,Boolean(null!=a)?decodeURIComponent(t[1]):void 0),n=r&&null!=r&&!isNaN(parseInt(r))&&5==r.length;null==r&&($(".tableBlock p.enterYourZipcode").show(),$(".tableBlock .body p").hide(),$(".tableBlock table").hide(),$(".tableBlock div.mobile").hide()),$("p .currentZipcode").replaceWith(n?r:"")})},90:function(){$(document).ready(function(){$("a[title]").each(function(e){let t=$(this).attr("title");!$(this).attr("aria-label")&&t&&($(this).attr("aria-label",t),$(this).removeAttr("title"))})})},215:function(){!function(){function e(e){let t=e.querySelector(".tooltipPopup"),a=e.querySelector(".tooltipButton");"click"==this.event.type&&("block"===t.style.display?(t.style.display="none",a.setAttribute("aria-expanded","false")):(t.style.display="block",a.setAttribute("aria-expanded","true")))}window&&document&&(document.addEventListener=document.addEventListener||document.attachEvent,window.addEventListener("load",function(){document.querySelectorAll("span[data-tooltip-id]").forEach(t=>{let a=document.createElement("div");a.setAttribute("class","text-tooltip"),a.appendChild(function(t){let a=document.createElement("button");a.setAttribute("aria-label","info icon"),a.setAttribute("aria-expanded","false"),a.setAttribute("type","button"),a.setAttribute("class","tooltipButton"),a.addEventListener("keydown",()=>{e(t.parentElement)});let r=document.createElement("img");return r.className="tooltipIcon",r.setAttribute("alt","tooltip icon"),r.src="/etc.clientlibs/usbank/clientlibs/clientlib-site/resources/images/svg/toggletip-icon.svg",a.addEventListener("click",()=>{e(t.parentElement)}),a.appendChild(r),a}(t));let r=t.getAttribute("data-tooltip-id");a.appendChild(function(e,t){let a=document.createElement("p");return a.style.display="none",a.className="tooltipPopup",a.setAttribute("role","tooltip"),a.innerHTML=t,a}(0,r)),t.appendChild(a)})}),window.addEventListener("keydown",function(){this.event&&"Escape"==this.event.key&&document.querySelectorAll("span[data-tooltip-id]").forEach(e=>{e.querySelector("p.tooltipPopup").style.display="none",e.querySelector("button.tooltipButton").blur()})}),document.addEventListener("click",function(e){"tooltipButton"===e.target.className||"tooltipIcon"===e.target.className||document.querySelectorAll("span[data-tooltip-id]").forEach(e=>{e.querySelector("p.tooltipPopup").style.display="none",e.querySelector(".tooltipButton").setAttribute("aria-expanded","false"),e.querySelector("button.tooltipButton").blur()})}))}()},259:function(){var e,t=[],a=!1,r=!1;window.depositRatesAPICall=(n,o,s,l)=>{e="false";var i={};"false"==s&&l&&""!==l&&(i.tstoken="yes",e="true");var c="/svt/usbank/rateApi?zipcode="+o+"&rateType=CD&personlaizedRateFlag="+e,u=t.filter(e=>e.url==c);return u.length>0?Promise.resolve(u[0].rateDetails):a?new Promise(function(e,a){const n=()=>{(u=t.filter(e=>e.url==c)).length>0&&u[0].url==c?e(u[0].rateDetails):r?a():setTimeout(n,10)};n()}):(a=!0,new Promise(function(e,o){$.ajax({url:"/svt/usbank/rateApi",headers:i,data:n,success:function(n){a=!1,r=!1,t.push({url:c,rateDetails:n}),e(n)},error:function(){r=!0,o()}}).done(function(){a=!1})}))}},429:function(){document.addEventListener("securitypolicyviolation",function(e){return console.log("Blocked URI: "+e.blockedURI+"Violated Directive: "+e.violatedDirective),!1})},881:function(){var e=[],t=[],a=[];window.fetchZafinEMMRates=function(r,n,o){var s,l,i={};l={zipcode:r,output:"json",productKeys:n,requestType:"DDA4A"==n?"NEW_GRID":"NEW"},o?(s=!0,l.rateTableType="consumerCheckingandSavings",l.isbusiness=!0):(s=!1,l.rateTableType="checkingAndSavings");var c=e.filter(e=>e.personlaizedRates==s&&e.zipcode==r&&e.productId==n);return c.length>0?Promise.resolve(c[0].rateDetails):t.includes(n)?new Promise(function(t,o){var l=function(){(c=e.filter(e=>e.personlaizedRates==s&&e.zipcode==r&&e.productId==n)).length>0&&c[0].productId==n&&c[0].zipcode==r&&c[0].personlaizedRates==s?t(c[0].rateDetails):a.includes(n)?o():setTimeout(l,10)};l()}):(t.push(n),new Promise(function(o,c){setTimeout(function(){$.ajax({url:"/svt/usbank/zafinRateApi",headers:i,data:l,type:"POST",success:function(l){t=t.filter(e=>e!==n),a=a.filter(e=>e!==n),e.push({productId:n,zipcode:r,personlaizedRates:s,rateDetails:l}),o(l)},error:function(){a.push(n),c()}}).done(function(){t=t.filter(e=>e!==n)})},100)}))}}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,a),o.exports}!function(){"use strict";let e=672,t=1056;function r(e){return e.length&&e.length>0?Array.from?Array.from(e):Array.prototype.slice.call(e):[]}function n(e,t){return r(t&&1==t.nodeType?t.querySelectorAll(e):document.querySelectorAll(e))}function o(){var e,t,a=/#/g,r=0;return 1==arguments.length?arguments[0].replace(/[^\d]/g,""):(arguments.length>1&&(t=arguments[0],e=String(arguments[1]).replace(/[^\d]/g,"")),3==arguments.length&&(a=new RegExp(arguments[2],"g")),t.replace(a,function(t){return e[r]?e[r++]:t}))}function s(){var a=document.body.offsetWidth;return a<e?"sm":a>e&&a<t?"md":"lg"}function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e,t){var a=document.createElement(e);for(var r in t){var n="object"==typeof t[r]?JSON.stringify(t[r]):t[r];a.setAttribute(r,n)}return a}function c(e,t,a){e&&e.attachEvent?e.attachEvent("on"+t,a):e&&e.addEventListener(t,a,!1)}function u(e,t,a){e.detachEvent?e.detachEvent("on"+t,a):e.removeEventListener(t,a,!1)}const d=()=>null!=navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/),m=()=>null!=navigator.userAgent.toLowerCase().match(/(android)/),p={show:function(){var e=document.createElement("div");e.id="loadingSpinner",e.innerHTML='<div class="spinner"></div>',document.body.appendChild(e)},hide:function(){var e=document.getElementById("loadingSpinner");e&&e.remove()}};$(document).ready(function(){var e,t="",a=document.querySelector('input[name="autosuggestion"]'),o=document.querySelector(".navigation-messages"),u=n("[data-searchProfile]")[0],d=n(".menu-vale"),p=n("[role=search] .search-autocomplete-list"),f=n("[role=search] .clear-search"),v=n("[role=search] input[type=text]"),g=document.querySelector(".global-navigation .navigation"),h=Object.freeze({TAB:9,BACKSPACE:8,DELETE:46,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,COMMAND:91,CONTROL:17,RIGHT:39,DOWN:40}),y=null,b=null,S=p[0],E=v[0],A=function(){return/(sm|md)/.test(s())};function x(e){const t='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',a=document.querySelector(e);if(a){const e=a.querySelectorAll(t)[0],r=a.querySelectorAll(t);return[e,r[r.length-1]]}}window.usbAutocomplete={query:function(e){var t,r,n=!1;return e&&e.closest("form")[0].form.classList.contains("navbar-form-nav")&&(n=!0),n?document.querySelector(".menu-search-input")&&(r=document.querySelector(".menu-search-input").dataset.suggestQueryVal,t=document.querySelector(".menu-search-input").dataset.searchProfileVal):(r=a.value,u&&u.dataset.searchprofile&&(t=u.dataset.searchprofile)),{domain:"sinequa",method:"search.suggest",profile:t,suggestionQuery:r,text:e.value}},params:function(){var e={},t=n(".globalnav-search");for(var a in t){var r=t[a];e[r.name]=r.value}return e},setListaction:function(e){y=e},service:function(e,t,a){var r=usbAutocomplete.params();b=e.text,$.ajax({type:"POST",url:r.url,dataType:"json",data:JSON.stringify(e),cache:!1,success:function(e){return t(e)},error:function(e){return a(e)}})},errors:function(e){},scrolllist:function(e){var t=e.getBoundingClientRect(),a=e.search_current.getBoundingClientRect();e.scrollTo({top:a.top-t.top,left:0,behavior:"smooth"})},setmessage:function(e,t){var a=usbAutocomplete.params()[t],r=a&&"string"==typeof a?a:t;o.textContent=r},build:function(e){var a=usbAutocomplete,o=(a.params(),e.Suggests);if(o&&o.length&&o.length>0&&e.Status&&"ok"==e.Status){var s=new RegExp(t,"gi");o.length;if(k=E.parentElement.querySelector(".search-autocomplete-list"),e.Suggests){k.innerHTML=null,k.closest("form").classList.add("active-search");var u,d="",f=null!=E.dataset.ariacontrols?E.dataset.ariacontrols:"searchAutocompleteList";E.setAttribute("aria-controls",f),E.setAttribute("aria-expanded",!0),(k.closest("section").classList.contains("topbar-background")||k.closest("section").classList.contains("global-nav"))&&(u="globalNavSuggestionListBox",d="globalNavSuggestionListItem_"),k.closest("section").classList.contains("searchfilter")&&(u="searchFilterSuggestionListBox",d="searchFilterSuggestionListItem_"),k.closest("section").classList.contains("shield-search")&&(u="searchAutocompleteList",d="searchAutocompleteListItem_");var g=i("ul",{class:"search-list",role:"listbox",id:""!=u&&null!=u?u:""});for(var h in o){0;var S=o[h],x=S.Display;(L=i("span",{class:"bold"})).innerHTML=l(t);var q=S.Display.replace(s,L.outerHTML);(_=i("li",{role:"option","aria-label":x,"aria-selected":"false","data-index":h,id:""!=d&&null!=d?d+h:""})).innerHTML=q,y&&"function"==typeof y&&c(_,"click",y),g.appendChild(_),c(_,"click",a.selected)}var w=m();if(!w)var C=i("button",{class:"search-list-boundary sr-only","data-position":"start","aria-label":"search list boundary"});k.appendChild(g),w||k.appendChild(C),k.search_items=r(g.children),k.search_current=null,k.search_index=0,w||c(C,"focus",function(e){$("[role=search] .clear-search").each(function(){$(this).attr("tabindex","0"),$("[role=search] .clear-search").focus()});var t=n("ul li",k);k.search_current=t[0],k.search_current.focus(),A()||(k.search_current.focus(),usbAutocomplete.scrolllist(k))}),v.forEach(function(e){var t=usbAutocomplete.params().plug_resultbelow.replace("{searchTerm}",b);usbAutocomplete.setmessage(e,t)})}}else{for(var V in p){var k=p[V];k.innerHTML=null;var L,_;g=i("ul",{class:"search-list",role:"listbox"});(L=i("span",{class:"bold"})).innerHTML=b,(_=i("li",{role:"option","aria-label":x,"aria-selected":"false","data-index":h})).innerHTML=usbAutocomplete.params().plug_noresult.replace("{searchTerm}",L.outerHTML),g.appendChild(_),k.appendChild(g)}v.forEach(function(e){var t=usbAutocomplete.params().plug_noresult.replace("{searchTerm}",b);usbAutocomplete.setmessage(e,t)})}},open:function(e){var t=usbAutocomplete;S.closest("form").classList.add("active-search");var a=t.list(e).parentElement.querySelector(".clear-search");a.style.display="block",a.removeAttribute("disabled"),a.setAttribute("aria-hidden",!1),t.openVale(e)},openVale:function(e){var t=usbAutocomplete.vale(e),a=document.getElementById("shield-search-input");if(!t.classList.contains("open")){var r="below",n=0;if("below"===(r=A()?E.dataset.bgPositionMobile||E.dataset.bgPosition||r:E.dataset.bgPositionDesktop||E.dataset.bgPosition||r)){var o=E.closest(".component-container"),s=o&&o.getBoundingClientRect();n=s&&s.height||0}if("topbar-vale"==t.id){var l=document.getElementById("search-vale");l&&(l.style.opacity=0,a&&(a.closest(".input-field").querySelector(".search-autocomplete-list").innerHTML=""))}if(!A()&&g&&(g.style.zIndex="-1"),e.target.isSameNode(a))return;document.body.classList.add("menu-lock"),t.style.display="block",t.style.opacity=0,t.style.top=n.toString().concat("px"),setTimeout(function(){t.style.opacity=1},300)}},vale:function(e){if((E=usbAutocomplete.input(e))&&E.dataset){var t=E.dataset.bgMobile||E.dataset.bg||E.closest(".menu-vale"),a=E.dataset.bgDesktop||E.dataset.bg||E.closest(".menu-vale"),r=E.closest("section").querySelector(".menu-vale");return A()?t&&document.getElementById(t)||r:a&&document.getElementById(a)||r}return d[0]},clearVale:function(e){var t=usbAutocomplete.vale(e);A()&&e&&"resize"!=e.type&&"window"!=e.target&&(""!=e.target.closest("nav")?document.body.classList.add("menu-lock"):document.body.classList.remove("menu-lock")),g&&(g.style.zIndex="50"),t&&(t.classList.remove("open"),"topbar-vale"==t.id&&A()?t.style.opacity=1:(t.style.opacity=0,e&&"nav-vale"==e.currentTarget.id&&(e.stopImmediatePropagation(),document.getElementById("nav-vale").removeAttribute("style")),setTimeout(function(){d.forEach(function(e){if(e.removeAttribute("style"),A()){var t=document.querySelector(".emergency-banner");e.style.position=t?"absolute":"fixed"}})},300),document.body.classList.remove("menu-lock")))},list:function(e){var t=e.target;if(t&&1==t.nodeType){var a=t.closest(".input-field");if(a)return a.querySelector(".search-autocomplete-list")}return S},input:function(e){var t=usbAutocomplete;if(e){var a=e.target&&!e.target.Window&&t.list(e)&&t.list(e).contains(e.target),r=e.target&&e.target.closest&&e.target.closest(".input-field");r&&!a&&(E="INPUT"==e.target.nodeName&&e.target||/(li|span|button|svg)/i.test(e.target.nodeName)&&r.querySelector("input[type=text]"))}return E},resetlist:function(e){for(var t in e.search_items)e.search_items[t].classList.remove("active")},selected:function(e){var t=usbAutocomplete;t.input(e);t.setitem(e);var a=t.list(e);a.search_current&&(t.input(e).value=a.search_current.textContent),t.clearlist(e),document.querySelector(".shield-search-input").focus()},setitem:function(e){e.preventDefault(),e.stopImmediatePropagation();var t=!1,a=usbAutocomplete,r=a.list(e);if(r){var n=e.shiftKey&&e.keyCode==h.TAB,o=!e.shiftKey&&e.keyCode==h.TAB;a.resetlist(r);var s=r.search_items&&r.search_items.length||0,l=null!==r.search_current;if(!e.keyCode){var i=e.target.closest("li"),c=i.dataset.index,u=a.input(e);r.search_index=parseInt(c)>-1&&c||r.search_index,u.value=i.textContent}(e.keyCode==h.UP||n)&&(l&&r.search_index-1>-1?r.search_index-=1:r.search_index=s-1,t=!0),(e.keyCode==h.DOWN||o)&&(l&&r.search_index+1<s?r.search_index+=1:r.search_index=0,t=!0),r.search_items&&r.search_items[r.search_index]&&(r.search_current=r.search_items[r.search_index],r.search_current.classList.add("active"),""!=r.search_current.id&&a.input(e).setAttribute("aria-activedescendant",r.search_current.id),t&&a.scrolllist(r))}},clearlist:function(e){var t=usbAutocomplete;(E=t.input(e))&&(E.removeAttribute("aria-controls"),E.setAttribute("aria-expanded",!1)),t.clearVale(e),S&&S.closest("form").classList.remove("active-search"),p.forEach(function(e){e.innerHTML=null,e.search_items=[],e.search_current=null,e.search_index=0})},clearinput:function(e){var t=usbAutocomplete;e&&e.preventDefault&&e.preventDefault(),usbAutocomplete.hideClearbutton();var a=t.input(e);a.hasAttribute("aria-activedescendant")&&a.setAttribute("aria-activedescendant",""),v.forEach(function(e){e.value=null,usbAutocomplete.setmessage(e,"plug_cleared")}),t.clearlist(e),A()?document.querySelector(".mobile .menu-search-input").focus():document.querySelector(".shield-search-input").focus()},hideClearbutton:function(){f.forEach(function(e){e.style.display="none",e.setAttribute("disabled",!0),e.setAttribute("aria-hidden",!0)})},resolve:function(e){usbAutocomplete;var t=[],a=null,r=n(".search-redirect-links .search-redirect").map(function(e,t){var a=e.dataset.redirecturl||"mising_url"+t,r=n(".data-word",e).map(function(e){return e.textContent.trim().replace(/!^[a-z\s]+$/i,"")});return{[a]:r}});for(var o in r)for(var s in r[o]){var l=r[o][s].map(function(e){return"("+e+")"});t[s]=new RegExp(l.join("|"),"gi")}for(var i in t)t[i].test(e)&&(a=document.location.origin+i);return a},submit:function(e){e.preventDefault();var t=usbAutocomplete,a=t.input(e),r=a.closest("form"),n="true"==a.dataset.redirect;if(a&&""!=a.value){var o=a.value,s=t.resolve(o);s?document.location=s:n?r.submit():t.clearlist(e)}},keycapture:function(e){var a=usbAutocomplete,r=e.keyCode||e.which;S=a.list(e)||null,(E=e.target).value=E.value.trimStart();var n=!/\b(8|9|13|27|37|38|39|40|46|47)\b/.test(e.keyCode),o=S.search_items&&S.search_items.length;if(e.stopImmediatePropagation(),!e.metaKey){switch(r){case h.RETURN:a.clearVale(e),a.clearlist(e),"true"==E.dataset.redirect&&a.submit(e);break;case h.TAB:if(!o)return;case h.UP:case h.DOWN:o&&(a.setitem(e),o&&(E.value=S&&S.search_current&&S.search_current.textContent));break;case h.ESC:a.clearlist(e);break;case"Backspace":case h.DELETE:case h.BACKSPACE:return void(E.value.length>0?a.sendQuery(e):0==E.value.length&&(a.hideClearbutton(),a.clearlist(e)));default:if(n){if(E.value.length>0){var s=document.querySelector(".globalNavigation .top-bar");s&&s.classList.contains("login-open")&&s.classList.remove("login-open"),a.sendQuery(e)}return void(t=E.value)}}e.preventDefault()}},sendQuery:function(e){var t=usbAutocomplete;t.open(e),t.service(t.query(e.target),t.build,t.errors)},directentry:function(e){var a=usbAutocomplete;(E=e.target).value.length>1&&(a.sendQuery(e),a.open(e)),t=E.value},attach:function(){n(".clear-search").forEach(e=>{e.style.display="none"}),d.forEach(function(e){c(e,"click",usbAutocomplete.clearlist)}),c(window,"resize",usbAutocomplete.clearlist),n("[role=search] input[type=text]").forEach(function(e){A()&&m(),c(e,"keyup",usbAutocomplete.keycapture),c(e.parentElement.querySelector("button.clear-search"),"click",usbAutocomplete.clearinput),c(e.parentElement.querySelector("button.search"),"click",usbAutocomplete.submit),e.classList.contains("shield-search-input")||(e.placeholder=usbAutocomplete.params().label)})}},window.usbAutocomplete.attach(),A()?(e=x(".navigation .menu-item.mobile"))&&e.length&&e[1]&&e[1].addEventListener("keydown",function(t){null==document.querySelector(".active-search")||9!==t.keyCode||t.shiftKey||(t.preventDefault(),e[0].focus())}):(e=x(".top-bar .desktop"))&&e[1]&&(e[1].onkeydown=function(t){null==document.querySelector(".active-search")||t.shiftKey||9!==t.keyCode||(t.preventDefault(),e[0].focus())})}());!function(){let e=0,t=0,a=[],n="to",o=[];function s(e){return Boolean(null!=e)}function l(e){return Boolean(e.length>0&&s(e))}function i(){let e=r(document.querySelectorAll(".apiKey")),t=function(e){const t=new Map;return e.forEach(function(e){if("{}"!==JSON.stringify(e.map)&&void 0!==e.map.responseData.map.Offers){let a=e.map.requestData.map.OfferID,r=e.map.responseData.map.Offers.myArrayList[0].map.productDetailData.map;t.set(a,r)}}),t}(a);t.size>0&&l(e)&&e.forEach(function(e){let a=e.parentElement.href,r=a?a.split("&"):"",o=r?r.filter(e=>-1!==e.toLowerCase().indexOf("offerId".toLowerCase()))[0].split("=")[1]:"",s=e.closest("[data-offerId]"),l=s?s.getAttribute("data-offerId"):o;if(l&&t.get(l)){let a,r,o=t.get(l),s=e.textContent,i=e.getAttribute("class"),c=i.search("noRates"),u=i.search("calculatedMinAPR"),d=i.search("calculatedMaxAPR"),m=i.search("annualFeeAmount"),p=i.search("introCashAdvanceMaxRate"),f=i.search("purchasePenaltyRate"),v=i.split("-").pop(),g=c>0?e:e.parentNode,h=g.getAttribute("aria-label")?g.getAttribute("aria-label"):g.getAttribute("title"),y=null,b="",S="";u>0||d>0?(b=u>0?parseFloat(o.calculatedMinAPR):"",S=d>0?parseFloat(o.calculatedMaxAPR):"",b.toString().length>0&&S.toString().length>0?b===S?r=S+"%":(r=b+"% - "+S+"%",y=b+"% "+n+" "+S+"%"):r=parseFloat(o[v])+"%",a=r):p>0||f>0?(r=parseFloat(o.productVariableData.myArrayList[0].map[v])+"%",a=r):(r=m>0?o.productVariableData.myArrayList[0].map.riskTierInformation.myArrayList[0].map.annualFeeInformation.map[v]:o.productVariableData.myArrayList[0].map[v],a=s.indexOf("$")>=0?s+parseInt(r):parseInt(r)+s),h&&h.includes("()")&&c<=0&&(y=h.replace(/\(\)/g,y||a)),g.textContent=a,y&&g.setAttribute("aria-label",y),g.classList.contains("apiKey")&&g.removeAttribute("class"),g.classList.contains("skeleton")&&(g.classList.remove("skeleton"),g.classList.remove("skeleton-text")),g.parentNode.classList.contains("skeleton")&&(g.parentNode.classList.remove("skeleton"),g.parentNode.classList.remove("skeleton-text"))}})}function c(){let n=r(document.querySelectorAll(".apiKey"));if(document.querySelectorAll(".apiKey").forEach(e=>{e.parentElement.classList.add("skeleton"),e.parentElement.classList.add("skeleton-text")}),n.length>0){let n=r(document.querySelectorAll("[data-offerid]"));if(l(n)){let r=n.length,s="",l=0;n.forEach(function(n,i){if(n.hasAttribute("data-offerid")){let e=n.getAttribute("data-requestcode")+"_"+n.getAttribute("data-requestsourcecode")+"_"+n.getAttribute("data-locationnumber")+"_"+n.getAttribute("data-offerid")+".";e=e.replace(/undefined_undefined_undefined./gi,""),o.includes(e)||(o.push(e),s+=e,l++)}if(s&&(5==l||i==r-1)){let r=(new Date).valueOf();!function(t){let r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==this.readyState&&(200==this.status||206==this.status)){let t=JSON.parse(this.responseText);a=a.concat(t),e++}},r.open("GET",t,!0),r.send()}("/svt/usbank/rateapi.param-"+s+r+"USB.json"),l=0,s="",t++}}),function(){let a=setInterval(function(){t==e&&(i(),clearInterval(a))},100)}()}}}/\/es\//.test(window.location.href)&&(n="a"),s(window&&document)&&(document.addEventListener=document.addEventListener||document.attachEvent,document.addEventListener("DOMContentLoaded",c,{passive:!0}||!1),window.adobe&&window.adobe.target&&document.addEventListener(adobe.target.event.CONTENT_RENDERING_SUCCEEDED,c),{load:c})}();a(429),a(259);function f(e){e.preventDefault();var t=document.getElementById("captcha_type");t&&"v3"==t.value?grecaptcha.ready(function(){var e;e=document.getElementById("recaptcha").dataset.sitekeyv3,grecaptcha.execute(e,{action:""}).then(function(e){$("#g-recaptcha-response").val(e),onSubmit()})}):(grecaptcha.execute(),$("iframe[title='recaptcha challenge']").parent().attr("aria-label","Recaptcha popup has appeared, please use buttons to control the navigation").focus(),$("iframe[title='recaptcha challenge']").attr("aria-label","Recaptcha popup has appeared, please use buttons to control the navigation").focus())}window.captcha_error=()=>{grecaptcha.reset()},window.onSubmit=()=>{var e=grecaptcha.getResponse();$("#recaptcha").attr("data-igcpath");if(e.length){var t=document.querySelector("#recaptcha-form"),a=t&&t.dataset&&"true"==t.dataset.useAjax;t.querySelector('input[name="captcha_response"]').value=e,a?Validators.success(t):t.submit()}},setTimeout(function(){$(".g-recaptcha .grecaptcha-badge").css({"z-index":"10"})},2e3);var v=window.interactions||{};!function(){let e=r(document.querySelectorAll(".shield-forms form")),t=r(document.querySelectorAll(".shield-forms textarea")),a=r(document.querySelectorAll("form button.dropdown-toggle")),o=r(document.querySelectorAll(".shield-forms select")),s=null,l=28,i=()=>document.querySelector("body");window.interactions={formElementFocus:function(e){let t=e.target.closest(".fieldset");if(t&&1==t.nodeType){t.querySelector("input,textarea,select").focus(),t.classList.add("active"),t.classList.add("focused")}return!1},formLabelSelectListeners:function(){let e=n("label input"),t=e=>{let t=n("label input",e.target.closest("form"));if(t.length)for(let e in t){let a=t[e].closest("label"),r=a.closest(".fieldset");a.classList.remove("focused"),r.classList.remove("focused")}};e.forEach(function(e){let a=e.closest("label");c(e,"focus",function(a){let r=a.target.closest("label"),n=a.target.closest(".fieldset");t(a),r.classList.add("focused"),n.classList.add("focused"),e.focus()}),c(e,"blur",function(e){t(e)}),c(a,"mousedown",function(e){t(e);let a=e.target.closest("label"),r=e.target.closest(".fieldset"),n=a.querySelector("input");r.classList.add("focused"),setTimeout(function(){a&&a.classList.add("focused")},200),e.target!==n&&(n.checked?n.checked=!1:n.checked=!0,n.focus(),e.stopImmediatePropagation())})})},formElementState:function(e){let t=e.target;e.type;if(t&&1==t.nodeType){let e=t.closest(".fieldset"),a=t.closest("label"),r=/(checkbox|radio)/.test(this.type)&&0==this.checked;e&&((""==t.value||r)&&e.classList.remove("active"),t!==document.activeElement&&(e.classList.remove("focused"),a&&a.classList.remove("focused")))}return!1},filterForNumber:function(e){let t=e.target,a=t.closest(".fieldset");return a&&1==a.nodeType&&t&&(t.value=t.value.replace(/\D/g,"")),!1},clearmeasurer:function(e){let t=e.target;u(t,"blur",v.clearmeasurer),u(t,"keyup",v.formElementFocus),s&&s.remove()},setmeasurer:function(e){let t=e.target;s||(s=document.createElement("div"),s.style.cssText="position: absolute; left: -200%; visibilty: hidden;line-height: 1.5;",s.classList.add("body"),i().appendChild(s)),c(t,"keyup",v.sizeTA),c(t,"blur",v.clearmeasurer)},sizeTA:function(e){let t=e.target;i().contains(s)||i().appendChild(s),s.style.width=t.clientWidth+"px",s.textContent="word",l=s.clientHeight;let a=t.value;s.textContent=a;let r=s.clientHeight,n=a.split(/\n/).length,o=r>0&&r>l?Math.round(r/l+n):n;o>1&&t.setAttribute("rows",o)},formElementHandler:function(e){v.formLabelSelectListeners();let t=r(e.querySelectorAll("input:not([type=radio]):not([type=checkbox]), textarea, select"));for(let e in t){let a=t[e];if(1==a.nodeType&&!a.classList.contains("active-input")){let e=a.closest(".fieldset:first-child");a.classList.add("active-input"),c(a,"blur",v.formElementState),c(a,"change",v.formElementState),c(a,"focus",v.formElementFocus),a.value&&""!==a.value&&e&&e.classList.add("active")}}},attachDropdownToggle:function(e){if(!e.classList.contains("dd-active")){e.classList.add("dd-active");let t=e.nextElementSibling||{},a=t.firstElementChild;if(a&&t){e.control=t,e.slide=a;let n=t.querySelector("select,input,textarea");if(n.vcontainer=e.querySelector(".value")||e,e.input=n,e.ariaExpanded||e.setAttribute("aria-expanded","false"),!e.getAttribute("aria-control")){let a="dropdown-control-"+Math.round(9e3*Math.random());t.setAttribute("id",a),e.setAttribute("aria-control",a)}c(e,"mousedown",v.dropdownToggle),c(e,"mouseup",function(e){e.preventDefault(),e.target.input&&e.target.input.focus()}),n&&n.value&&(n.vcontainer.textContent=n.value,c(n,"change",function(e){e.target.getAttribute("multiple");let t=n.value;t=r(n).filter(function(e){return 1==e.selected}).map(function(e){return e.value}).join(", ");e.target.vcontainer.textContent=t}))}}},dropdownToggle:function(e){e.preventDefault();let t=e.target;if(t.slide&&t.control){return t.classList.contains("open")?(t.setAttribute("aria-expanded","false"),t.classList.remove("open"),t.control.setAttribute("aria-hidden","true"),t.focus()):(t.setAttribute("aria-expanded","true"),t.classList.add("open"),t.control.setAttribute("aria-hidden","false"),t.slide.focus()),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!0}if(/SELECT/.test(e.target.nodeName)){let e=t.closest(".fieldset");e.classList.contains("open")?(t.setAttribute("aria-expanded","false"),e.classList.remove("open")):(t.setAttribute("aria-expanded","true"),e.classList.add("open"))}},filterFormClick:function(e){/(form|button|span|svg)/.test(e.target.nodeName.toLowerCase())&&(e.preventDefault(),e.stopImmediatePropagation())},attach:function(){if(v=window.interactions,e.length>0)for(let t in e){let a=e[t];c(a,"click",v.filterFormClick),a.dataset&&a.dataset.form_activated||(a.dataset.form_activated=!0,v.formElementHandler(a),Validators.attach(a))}if(t.length>0)for(let e in t){let a=t[e];c(a,"focus",v.setmeasurer),c(a,"click",v.setmeasurer)}if(o.length>0)for(let e in o){c(o[e],"click",v.dropdownToggle)}if(a.length>0)for(let e in a)v.attachDropdownToggle(a[e])}},$(document).ready(function(){window.interactions.attach()}),document.querySelector("footer")&&document.querySelector("footer").setAttribute("role","contentinfo")}();a(90),a(215),a(14);document.addEventListener("DOMContentLoaded",function(){var e;(e=r(document.querySelectorAll("sup")))&&e.forEach(function(e){/©|&copy|®|&reg;|™|&trade;/gi.test(e.innerText)&&e.classList.add("has-symbols")})});var g=g||{},h=h||{},y=null,b=null,S=null;!function(){var e=document.getElementById("jform-address-prefecture"),t=document.getElementById("jform-mailing-prefecture"),a=document.getElementById("jform-8ben-prefecture"),r=document.getElementById("jform-income-source-desc"),n=document.getElementById("avvance-zip-code"),o=document.getElementById("avvance-mid"),s=document.getElementById("avvance-industry-selector"),l=document.getElementById("avvance-zip-code-1"),i=document.getElementById("avvance-mid-1"),c=document.getElementById("avvance-industry-selector-1");e&&(e.parentElement.parentElement.parentElement.parentElement.style.display="none");t&&(t.parentElement.parentElement.parentElement.parentElement.style.display="none");a&&(a.parentElement.parentElement.parentElement.parentElement.style.display="none");r&&(r.parentElement.parentElement.parentElement.parentElement.style.display="none");n&&(n.parentElement.parentElement.parentElement.parentElement.style.display="none");o&&(o.parentElement.parentElement.parentElement.parentElement.style.display="none");s&&(s.parentElement.parentElement.parentElement.parentElement.style.display="none");l&&(l.parentElement.parentElement.parentElement.parentElement.style.display="none");i&&(i.parentElement.parentElement.parentElement.parentElement.style.display="none");c&&(c.parentElement.parentElement.parentElement.parentElement.style.display="none")}();const E=p;window.forms=window.forms||{};var A={form:null,submitted:!1,validated:!1,complete:{}},x=".checkboxes",q=20,w=200,C=5,V=10,k=9,L=9,_=7,F=11,T={type:"POST",url:function(){alert("provide url in call: \n...usually it is the form action")},dataType:"JSON",data:{},success:function(){alert("attach.success callback")},error:function(){alert("attach.error callback")}};function D(e,t,a,r,n){e.match(t)?(_m=n||_m,R(_m,r)):(r.querySelector(".helper-contents .errors").classList.add("hide"),r.classList.remove("error"))}function R(e,t){var a=t,r=a.querySelector(".messages"),n=a.querySelector(".helper-contents .errors"),o=document.createElement("span");if(a.classList.add("error"),n.classList.remove("hide"),r.querySelector(".message"))r.querySelector(".message").innerHTML=e;else{r.appendChild(o);var s=r.querySelector("span");s.setAttribute("class","message [object HTMLLabelElement]"),s.setAttribute("aria-live","polite"),s.innerHTML=e}}window.onload=function(){var e=window.location.search;if(e){for(var t=decodeURI(e).substr(1).split("&"),a={},r=0;r<t.length;r++){var n=t[r].split("=");a[n[0]]=n[1]}Object.keys(a).length&&window.Validators.preFillFormElements(a)}window.Validators.taxpayerLoader(),window.Validators.taxTypeSelection(),window.Validators.usNonUsphoneNumberLoader(),window.Validators.handleFormCheckboxSubmitBtn()},window.Validators={message:function(e,t){return(t=t||this)&&t.dataset&&t.dataset[e]||t&&t.form&&t.form.words&&t.form.words[e]||null},not_empty:function(e){var t=e.value,a=!(!t||""===t||null==t);if(/(radio|checkbox)/.test(e.type)){var n=e.closest(x);a=r(n&&n.querySelectorAll('[type="'+e.type+'"]')).filter(function(e,t){return 1==e.checked}).length>0}return{valid:a,name:"not_empty",message:e.message("errorRequired")||e.name+" is Required"}},zip_code:function(e){var t=e.value,a=String(t.replace(/[^0-9]/g,"")),r=e.validates.maxcount||e.validates.mincount||C,o=/([\d]{5}|[\d]{9})/.test(a),s=e.name+" does not appear to be a zipcode";if(0==a.length&&(s=e.message("errorRequired")||s),a.length<r&&(s=e.message("errorFormat")||e.message("errorConstraint")||s),"true"==e.message("valueConfirmSelected")){var l=0,i=e.message("valueConfirmField"),c=document.getElementById(e.id).getAttribute("type"),u=n("input[name='"+i+"']",e.closest("form"));u&&u.forEach(function(t){let a=t.getAttribute("type"),r=t.value;a==c&&e.name!=i&&r!=e.value&&l++}),0!=l&&(s=e.message("errorMismatch"),o=!1)}return{valid:o,name:"zip_code",message:s}},phone_number:function(e){var t=e.target||e;t.value=t.value.trim();var a=t.value.replace(/[^0-9]/g,""),r=t.validates.mincount||V,o=a&&a.length==r,s=t.message("errorRequired");if(("0000000000"===a||a.startsWith("000"))&&(s=t.message("errorFormat"),o=!1),a.length<10&&(s=t.message("errorMinlength"),o=!1),"true"==t.message("valueConfirmSelected")){var l=0,i=t.message("valueConfirmField"),c=n("input[name='"+i+"']",t.closest("form"));c&&c.forEach(function(e){let a=e.getAttribute("type"),r=e.value;a==t.type&&t.name!=i&&r!=t.value&&l++}),0!=l&&(s=t.message("errorTypeof"),o=!1)}return{valid:o,name:"phone_number",message:s}},japanese_phone_number:function(e){var t=e.target||e;t.value=t.value.trim();var a=t.value.replace(/[^0-9]/g,""),r=t.validates.mincount||_,o=t.validates.mincount||F,s=a&&a.length>r-1&&a.length<o+1,l=t.message("errorRequired");if(("0000000000000000"===a||a.startsWith("000"))&&(l=t.message("errorFormat"),s=!1),(a.length<_||a.length>F)&&(l=t.message("errorMinlength"),s=!1),"true"==t.message("valueConfirmSelected")){var i=0,c=t.message("valueConfirmField"),u=n("input[name='"+c+"']",t.closest("form"));u&&u.forEach(function(e){let a=e.getAttribute("type"),r=e.value;a==t.type&&t.name!=c&&r!=t.value&&i++}),0!=i&&(l=t.message("errorTypeof"),s=!1)}return{valid:s,name:"japanese_phone_number",message:l}},ssn_number:function(e){var t=e.target||e;t.value=t.value.trim(),t.hasAttribute("data-ssnvalue")&&t.getAttribute("data-ssnvalue")===t.value||t.setAttribute("data-ssnvalue",t.value);var a=t.getAttribute("data-ssnvalue").replace(/[-]/g,""),r=t.validates.mincount||L,o=a&&a.length==r,s=t.message("errorRequired");if(t.value.match(/[^0-9.,\$\-\*]+/g)&&(s=t.message("errorFormat")||s,o=!1),t.value.length>11&&(s=t.message("errorMaxlength")||s,o=!1),("000000000"===a||a.startsWith("000"))&&(s=t.message("errorFormat")||s,o=!1),a.length<9&&(s=t.message("errorMinlength")||s,o=!1),"true"==t.message("valueConfirmSelected")){var l=0,i=t.message("valueConfirmField"),c=n("input[name='"+i+"']",t.closest("form"));c&&c.forEach(function(e){let a=e.getAttribute("type"),r=e.value;a==t.type&&t.name!=i&&r!=t.value&&l++}),0!=l&&(s=t.message("errorTypeof"),o=!1)}return Validators.taxpayerLoader(),{valid:o,name:"ssn_number",message:s}},currency:function(e){var t=e.target||e;t.value=t.value.trim();var a=t.value.replace(/[^0-9]/g,""),r=t.validates.mincount||k,o=a&&"0"!=a&&a.length<=r,s=t.message("errorRequired");if(t.value.match(/[^0-9.,\$]+/g)&&(s=t.message("errorConstraint")||s,o=!1),"true"==t.message("valueConfirmSelected")){var l=0,i=t.message("valueConfirmField"),c=n("input[name='"+i+"']",t.closest("form"));c&&c.forEach(function(e){let a=e.getAttribute("type"),r=e.value;a==t.type&&t.name!=i&&r!=t.value&&l++}),0!=l&&(s=t.message("errorTypeof"),o=!1)}return{valid:o,name:"currency",message:s}},password:function(e){var t=e.target||e,a=t.value,r=t.validates.mincount,o=t.message("errorRequired");if(a.length<t.validates.mincount){o=t.message("errorMinlength").split("|")[1],r=!1}a.length>t.validates.mincount&&(r=!0);var s=t.message("maxlength");if(a.length>s&&null!=s&&(o=t.message("errorMaxlength"),r=!1),"true"==t.message("valueConfirmSelected")){var l=0,i=t.message("valueConfirmField"),c=n("input[name='"+i+"']",t.closest("form"));c&&c.forEach(function(e){let a=e.getAttribute("type"),r=e.value;a==t.type&&t.name!=i&&r!=t.value&&l++}),0!=l&&(o=t.message("errorTypeof"),r=!1)}return{valid:r,name:"password",message:o}},number:function(e){var t=e.target||e,a=t.value,r=t.value.replace("-",""),o=t.validates.mincount,s=t.message("errorRequired");r.length<t.validates.mincount&&(s=t.message("errorMinlength"),o=!1),r.length>t.validates.mincount&&(o=!0);var l=t.message("maxlength");if(r.length>l&&null!=l&&(s=t.message("errorMaxlength"),o=!1),a.match(/[^\d.]/g)&&(s=t.message("errorConstraint")||s,o=!1),"true"==t.message("valueConfirmSelected")){var i=0,c=t.message("valueConfirmField"),u=n("input[name='"+c+"']",t.closest("form"));u&&u.forEach(function(e){let a=e.getAttribute("type"),r=e.value;a==t.type&&t.name!=c&&r!=t.value&&i++}),0!=i&&(s=t.message("errorTypeof"),o=!1)}return{valid:o,name:"number",message:s}},text:function(e){var t=e.target||e,a=t.value,r=t.validates.mincount,o=t.message("errorRequired");a.length<t.validates.mincount&&(o=t.message("errorMinlength"),r=!1),a.length>t.validates.mincount&&(r=!0);var s=t.message("maxlength");if(a.length>s&&null!=s&&(o=t.message("errorMaxlength"),r=!1),"true"==t.message("valueConfirmSelected")){var l=0,i=t.message("valueConfirmField"),c=n("input[name='"+i+"']",t.closest("form"));c&&c.forEach(function(e){let a=e.getAttribute("type"),r=e.value;a==t.type&&t.name!=i&&r!=t.value&&l++}),0!=l&&(o=t.message("errorTypeof"),r=!1)}return Validators.taxpayerLoader(),{valid:r,name:"text",message:o}},selectbox:function(e){var t=!0,a="";return""==e.value.toLowerCase()&&"true"==e.message("valueConstraint")&&(a=e.message("errorRequired"),t=!1),e.className.includes("countryField")&&Validators.stateHideAndShowByCountry(e.closest("form"),e.closest(".form-container")),e.querySelector("[name='JobTitle']")&&Validators.jobTitleOtherHideShow(e.closest("form"),e.closest(".form-container")),"japaneseTaxType"==e.id&&Validators.taxTypeSelection(),"japanesePhoneType"==e.id&&Validators.usNonUsphoneNumberLoader(),{valid:t,name:"selectbox",message:a}},radioButton:function(e){var t=e.target||e,a=t.message("errorRequired");let r=t.closest(".fieldset").querySelectorAll("input[type='radio']");return Array.from(r).some(function(e){e.setAttribute("aria-checked","false")}),1==e.checked&&t.setAttribute("aria-checked","true"),Validators.taxpayerLoader(),{valid:!0,name:"radioButton",message:a}},checkboxButton:function(e){var t=e.target||e,a=t.message("errorRequired");return 1==e.checked?t.setAttribute("aria-checked","true"):t.setAttribute("aria-checked","false"),{valid:!0,name:"checkboxButton",message:a}},textarea:function(e){var t=e.target||e,a=t.value,r=t.validates.mincount,o=t.message("errorRequired");a.length<t.validates.mincount&&(o=t.message("errorMinlength"),r=!1),a.length>t.validates.mincount&&(r=!0);var s=t.message("maxlength");if(a.length>s&&null!=s&&(o=t.message("errorMaxlength"),r=!1),"true"==t.message("valueConfirmSelected")){var l=0,i=t.message("valueConfirmField"),c=n("textarea[name='"+i+"']",t.closest("form"));c&&c.forEach(function(e){let a=e.tagName.toLowerCase(),r=e.value;a==t.type&&t.name!=i&&r!=t.value&&l++}),0!=l&&(o=t.message("errorTypeof"),r=!1)}return{valid:r,name:"textarea",message:o}},email:function(e,t){const a=new WeakMap;return function(...r){const n=r[0];return clearTimeout(a.get(n)),new Promise((o,s)=>{const l=setTimeout(()=>{Promise.resolve(e.apply(this,r)).then(o).catch(s)},t);a.set(n,l)})}}(async function(e){if(e._lastValidatedValue===e.value)return e._lastValidatedResult||{valid:!0,name:"email",message:""};e._lastValidatedValue=e.value;const t=await window.Validators._emailValidatorCore(e);return e._lastValidatedResult=t,t},300),_emailValidatorCore:async function(e){var t=e.value,a=/^[\w\.-]+@[a-zA-Z\d\.-]+\.[a-zA-Z]{2,}$/gi.test(t),r=e.message("errorConstraint")||e.name+" does not appear to be an email address",o=e.getAttribute("data-restricted-domain");if(""!==t&&(r=e.message("errorFormat")||e.message("errorRequired")||r,null!==o&&""!==o)){let n=t.split("@");o.split(",").indexOf(n[1])>=0&&(r=e.getAttribute("data-restricted-domain-message"),a=!1)}if("true"==e.message("valueConfirmSelected")){var s=0,l=e.message("valueConfirmField"),i=n("input[name='"+l+"']",e.closest("form"));i&&i.forEach(function(t){let a=t.getAttribute("type"),r=t.value;a==e.type&&e.name!=l&&r!=e.value&&s++}),0!=s&&(r=e.message("errorMismatch"),a=!1)}if(a&&"true"===e.getAttribute("data-check-server-validation")){let t=await window.Validators.emailneverbounce(e,a,r);return{valid:a=t._valid,name:"email",message:r=t._msg}}return e.setAttribute("data-valid-email","false"),{valid:a,name:"email",message:r}},emailneverbounce:async function(e,t,a){let r=t,n=a;const o="true"===e.getAttribute("data-check-server-validation");if(t&&o)try{const t=encodeURIComponent(e.value),a=await fetch(`/svt/ecm/emailneverbounce?email=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw console.error(`HTTP error ${a.status}: ${a.statusText}`),new Error(`HTTP error ${a.status}: ${a.statusText}`);const o=await a.text(),s=o.includes("&quot;")||o.includes("&amp;")||o.includes("&lt;")||o.includes("&gt;")?(new DOMParser).parseFromString(o,"text/html").documentElement.textContent:o,l=JSON.parse(s);"valid"!==l.result&&"catchall"!==l.result?(r=!1,n=l.message||"Email failed server-side Validation"):(r=!0,n="")}catch(e){console.error("Email API validation Failed:",e.message),r=!1,n="Server Validation Failed, Please try again later."}return{_valid:r,_msg:n}},confirm:function(e){var t=e.confirmation,a=e.value.toLowerCase(),r=t.value.toLowerCase(),n=a===r;return console.log("Validation confirming:",a+" ?= "+r+"result: "+n),{valid:n,name:"confirm",message:e.message("errorMismatch")||e.name+" does not match "+t.name}},max_length:function(e){var t=e.value,a=e.validates.maxcount||w,r=!(t.length&&t.length>a);return e.dataset.reqdmsg=e.dataset.maxlength,{valid:r,name:"max_length",message:e.name+" is too long"}},min_length:function(e){var t=e.value,a=e.validates.mincount||q;return{valid:!(a&&t.length&&t.length<a),name:"min_length",message:e.message("errorMinlength")||e.message("errorRequired")||e.name+" is not long enough"}},date:function(e){var t=new Date(e.value),a="function"==typeof t.getDate&&"Invalid Date"!==t.toString(),r=e.message("errorDaterange")||e.message("errorMismatch")||e.message("errorRequired")||e.name+" value: "+e.value+" does not convert to date";if(a&&e.dataset.valueTypeof&&"futureDates"==e.dataset.valueTypeof){a=Date.now()<t.getTime();r=e.message("errorDaterange")||e.message("errorMismatch")||r}if(a&&e.dataset.valueTypeof&&"pastDates"==e.dataset.valueTypeof){a=Date.now()>t.getTime();r=e.message("errorDaterange")||e.message("errorMismatch")||r}if("true"==e.message("valueConfirmSelected")){var o=0,s=e.message("valueConfirmField"),l=n("input[name='"+s+"']",e.closest("form"));l&&l.forEach(function(t){let a=t.getAttribute("type"),r=t.value;a==e.type&&e.name!=s&&r!=e.value&&o++}),0!=o&&(r=e.message("errorMismatch"),a=!1)}return{valid:a,name:"date",message:r}},regex:function(e){var t=e.value,a=!1,r="";switch(e.getAttribute("data-value-typeof")){case"alphbetsOnly":a=/^[a-z]+$/gi.test(t),r=e.getAttribute("data-validation-alphbetsonly");break;case"alphaNumericwithSpace":a=/^[a-z0-9\s]+$/gi.test(t),r=e.getAttribute("data-validation-alphanumericwithspace");break;case"alphawithSpace":a=/^[a-z\s]+$/gi.test(t),r=e.getAttribute("data-validation-alphawithspace")}return{valid:a,name:"regex."+e.regularexptype,message:e.getAttribute("data-value-title")+" "+r}},error_response_no_record:function(e){var t=I.noMatchingRecord,a=!(y&&e.dataset.errResponseMsg&&e.dataset.errResponseMsg.trim()==t);return a||(I.isNoRecordRes=!0),{valid:a,name:"error_response_no_record",message:e.message("errorAcxiomincorrectfirst")+" "+e.getAttribute("data-value-title")+" "+e.message("errorAcxiomincorrectlast")}},error_response_record_present:function(e){var t=I.leadAlreadySubmitted,a=!(y&&e.dataset.errResponseMsg&&e.dataset.errResponseMsg.trim()==t);return a||(I.isRecordPresent=!0),{valid:a,name:"error_response_record_present",message:e.message("errorAcxiomincorrectfirst")+" "+e.getAttribute("data-value-title")+" "+e.message("errorAcxiomincorrectlast")}},formatNumber:function(e){return e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},numberWithCommas:function(e){return new Intl.NumberFormat("en-US").format(e)}},g={clean_keys:function(e){var t=e.target||e,a=t.value;return t.value=a.replace(/([#0-9]\u20E3)|[\xA9\xAE\u203C\u2047-\u2049\u2122\u2139\u3030\u303D\u3297\u3299][\uFE00-\uFEFF]?|[\u2190-\u21FF][\uFE00-\uFEFF]?|[\u2300-\u23FF][\uFE00-\uFEFF]?|[\u2460-\u24FF][\uFE00-\uFEFF]?|[\u25A0-\u25FF][\uFE00-\uFEFF]?|[\u2600-\u27BF][\uFE00-\uFEFF]?|[\u2900-\u297F][\uFE00-\uFEFF]?|[\u2B00-\u2BF0][\uFE00-\uFEFF]?|(?:\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])[\uFE00-\uFEFF]?/g,""),t.value},number:function(e){var t=e.target||e,a=t.value;let r=t.getAttribute("data-maxlength");t.getAttribute("data-error-maxlength");var n=t.parentNode.parentNode,o=t.message("errorConstraint")||o;if("positive"==t.getAttribute("date-value-typeof"))a.match(/[^\d.]/g)?R(o,n):(n.querySelector(".helper-contents .errors").classList.add("hide"),n.classList.remove("error")),t.value.length>r&&R(o=t.message("errorMaxlength")||o,n);else{let a=e.key.toLowerCase();/(e)/.test(a)&&(t.value=t.value.replace(a,""))}return t.value},text:function(e){var t=e.target||e,a=t.value,r=t.parentNode.parentNode,n=t.getAttribute("data-field-type"),o=t.getAttribute("data-value-typeof"),s=t.getAttribute("data-value-title"),l=t.getAttribute("data-validation-alphbetsonly"),i=t.getAttribute("data-validation-alphawithspace"),c=t.getAttribute("data-validation-alphanumericwithspace"),u=t.getAttribute("data-maxlength")||w;if("text"==n){if(a.length>u){var d=t.message("errorMaxlength")||d;return R(d,r),!1}r.querySelector(".helper-contents .errors").classList.add("hide"),r.classList.remove("error"),"alphawithSpace"==o&&D(a,/[^a-zA-Z\s]/,t,r,s+" "+i),"alphbetsOnly"==o&&D(a,/[^a-zA-Z]/,t,r,s+" "+l),"alphaNumericwithSpace"==o&&D(a,/[^a-zA-Z0-9 ]/,t,r,s+" "+c)}},textarea:function(e){var t=e.target||e;let a=t.getAttribute("data-maxlength"),r=t.getAttribute("data-text-charctersleft"),n=t.getAttribute("data-text-charactersTooMany"),o=t.value.length,s=t.closest(".fieldset").querySelector(".count");return s.textContent="# "+r,s.style.display="block",a&&(o<=a?(s.textContent=a-o+" "+r,s.classList.add("characterLeft"),s.classList.remove("characterTooMany")):(s.textContent=o-a+" "+n,s.classList.remove("characterLeft"),s.classList.add("characterTooMany"))),t.value},zip_code:function(e){var t=e.target||e,a=t.value,r=t.message("maxlength")||C,n=t.parentNode.parentNode,o=t.message("errorConstraint")||o;return a.match(/[^\d.]/g)?R(o,n):(n.querySelector(".helper-contents .errors").classList.add("hide"),n.classList.remove("error")),t.value.length>r&&R(o=t.message("errorMaxlength")||o,n),t.value},widgetDate:function(e){return"_y-_m-_d".replace("_m",("0"+(e.getMonth()+1)).slice(-2)).replace("_d",("0"+(e.getDate()+1)).slice(-2)).replace("_y",e.getFullYear())},date:function(e){var t=e.target||e,a=t.value,r=new Date(a),n=new Date,o=t.validates.dateType,s="Invalid Date"!=r&&r||n;return s.getTime()>Date.now()&&"pastDates"==o&&(s=n.setDate(n.getDate()-1)),s.getTime()<Date.now()&&"futureDates"==o&&(s=n.setDate(n.getDate()+1)),g.widgetDate(s)},phone_number:function(e){if("40"!=e.keyCode&&"38"!=e.keyCode&&"9"!=e.keyCode){var t=e.target||e,a=e.keyCode||e.charCode||0,r=t.message("errorConstraint")||r,n=t.parentNode.parentNode;if(t.value.match(/[^0-9.,\- ]+/g))R(r,n);else{if(!(t.value.length>15)){n.querySelector(".helper-contents .errors").classList.add("hide"),n.classList.remove("error");var s,l=8==a||46==a||!1,i=t.value.replace(/[^\d]/g,""),c=1==i.length,u=l&&String(i.slice(0))||t.value;return 0==i.length?s=t.getAttribute("placeholder")||"":i.length>0&&i.length<4?s=t.getAttribute("placeholder")||"    ":i.length>=4&&i.length<7?s=t.getAttribute("placeholder")||"   -    ":i.length>=7&&(s=t.getAttribute("placeholder")||"   -   -    "),i.length>10&&R(r=t.message("errorMaxlength")||r,n),t.value=c&&l&&s||o(s,u," "),i.length<=3?t.setSelectionRange(i.length,i.length):i.length>3&&i.length<=6?t.setSelectionRange(i.length+1,i.length+1):i.length>6&&t.setSelectionRange(i.length+2,i.length+2),t.value.trim()}R(r=t.message("errorMaxlength")||r,n)}}},japanese_phone_number:function(e){if("40"!=e.keyCode&&"38"!=e.keyCode&&"9"!=e.keyCode){var t=e.target||e,a=e.keyCode||e.charCode||0,r=t.message("errorConstraint")||r,n=t.parentNode.parentNode;if(t.value.match(/[^0-9.,\- ]+/g))R(r,n);else{n.querySelector(".helper-contents .errors").classList.add("hide"),n.classList.remove("error");var s,l=8==a||46==a||!1,i=t.value.replace(/[^\d]/g,""),c=1==i.length,u=l&&String(i.slice(0))||t.value;0==i.length?s=t.getAttribute("placeholder")||"":i.length>0&&i.length<4?s=t.getAttribute("placeholder")||"    ":i.length>=4&&(s=t.getAttribute("placeholder")||"   -          "),i.length>11&&R(r=t.message("errorMaxlength")||r,n),t.value=c&&l&&s||o(s,u," "),i.length<=3?t.setSelectionRange(i.length,i.length):i.length>3&&t.setSelectionRange(i.length+1,i.length+1)}return t.value.trim()}},ssn_number:function(e){if("40"!=e.keyCode&&"38"!=e.keyCode&&"9"!=e.keyCode&&"ArrowRight"!=e.key){var t=e.target||e,a=(e.keyCode||e.charCode,t.message("errorConstraint")||a),r=t.parentNode.parentNode;if(t.value.match(/[^0-9.,\-\*]+/g))R(a,r);else if(t.value.length>11)a=t.message("errorMaxlength")||a,console.log("Error for extra values: "+a),R(a,r);else{r.querySelector(".helper-contents .errors").classList.add("hide"),r.classList.remove("error");"***-**"==t.value.slice(0,6)&&(t.value=t.getAttribute("data-ssnvalue").substr(0,t.value.length));var n=t.value.replace(/[^0-9]/g,"");(n=n.substr(0,9)).length>=4&&(n=n.slice(0,3)+"-"+n.slice(3)),n.length>=7&&(n=n.slice(0,6)+"-"+n.slice(6)),t.value=n;var o=Validators.ssnUnMasking(t.value);if(t.setAttribute("data-ssnvalue",null!=o?o:""),11==t.value.length){var s=t.value.length,l="";1==s?l="*":2==s?l="**":3==s?l="***-":5==s?l="***-*":6==s?l="***-**-":s>=8&&(l="***-**-"+t.value.slice(7,11)),S=t.value,t.value=l}}return t.value}},currency:function(e){if("40"!=e.keyCode&&"38"!=e.keyCode&&"9"!=e.keyCode){var t=e.target||e,a=t.message("errorConstraint")||a,r=t.message("maxlength")||k,n=parseInt(r+3),s=t.parentNode.parentNode;if(t.value.match(/[^0-9.,\$]+/g))R(a,s);else if(t.value.length>n)R(a=t.message("errorMaxlength")||a,s);else{s.querySelector(".helper-contents .errors").classList.add("hide"),s.classList.remove("error"),t.value=t.value.replace(/[^0-9.,\$]+/g,"");var l,i=e.keyCode||e.charCode||0,c=8==i||46==i||!1,u=t.value.replace(/[^0-9]+/g,""),d=1==(u=(u=u.replace(/^0+/,"")).substring(0,r)).length;c&&String(u.slice(0))||t.value;0==u.length?l=t.getAttribute("placeholder")||"":u.length>0&&u.length<=r&&(l=t.getAttribute("placeholder")||"$"+new Array(u.length+1).join(" "));var m=d&&c&&l||o(l,u," ");t.value=m.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return t.value.trim()}},regex:function(e){var t=e.target||e,a=t.value;switch(t.regexType){case"alphbetsOnly":return a.replace(/[^a-z]/gi,"");case"alphaNumericwithSpace":return a.replace(/[^a-z0-9\s]/gi,"");case"alphawithSpace":return a.replace(/[^a-z\s]/gi,"");case"positive":return parseFloat(a.replace(/[^0-9]/gi,""));case"negative":return parseFloat("-"+a.replace(/[^0-9]/gi,""))}}},Validators.attach=async function(e,t){if(e&&!e.dataset.formkey){Validators.transforms(e);var a="string"==typeof e.id&&""!=e.id&&e.id||e.name&&"string"==typeof e.name&&e.name||"form";const W=new Uint32Array(1);self.crypto.getRandomValues(W);let J=W[0];a+="_"+Math.round(9e-7*J),e.dataset.formkey=a,e.id=a,e.formState=A,t&&(e.formState.complete=t),e.ariaLives=n("[aria-live]",e);var o=e.closest(".form-container"),s=o&&o.querySelector(".usb-rossetta-stone");e.words=s&&s.dataset||null;var l=r(e.querySelectorAll("input, textarea, select")),i=e.querySelector("button.cmp-form-button"),u=e.querySelector('button[type="submit"]')||e.querySelector('input[type="submit"]'),d={};for(var m in l)d[l[m].name]=l[m];for(var p in e.fields=d,window.forms[a]=e,l){var f=l[p];if(f&&"hidden"!=f.type){f.validators={},f.filters={},f.message=Validators.message;var v=f.id&&document.querySelector('[for="'+f.id+'"]'),h=(v&&v.textContent.replace("\n","").trim(),f.type+" "+f.dataset.fieldType||""),y=h&&h.match(/(date)/gi),b=h&&h.match(/(zip)/gi),E=h&&h.match(/(tel|telephone)/gi),x=h&&h.match(/(japaneseNum)/gi),q=h&&h.match(/(email|e\-mail)/gi),w=h&&h.match(/(number)/gi),C=h&&h.match(/(amount)/gi),V=h&&h.match(/(ssn|itin)/gi),k=f.dataset||{},L=f.name,_=f.type,F=b&&b.length&&b.length>0,T=E&&E.length&&E.length>0,D=x&&x.length&&x.length>0,R=q&&q.length&&q.length>0,I=w&&w.length&&w.length>0,N=(y&&y.length&&y.length,C&&C.length&&C.length>0&&/text/gi.test(_)),j=V&&V.length&&V.length>0&&/number|text/gi.test(_),M=f.dataset.valueConfirmField&&"true"==f.dataset.valueConfirmField,B=f.required||k.valueConstraint&&"mandatory"==k.valueConstraint||!1,P=f.getAttribute("minlength")&&parseInt(f.getAttribute("minlength"))||null,O=f.getAttribute("maxlength")&&parseInt(f.getAttribute("maxlength"))||null;if(f.validates={confirm:M,required:B,checkable:"radio"==_||"checkbox"==_,datetype:"date"==_&&f.dataset.valueTypeof||null,numbertype:"number"==_&&f.dataset.valueTypeof||null,texttype:"text"==_&&f.dataset.valueTypeof||null,phonetype:"phone"==_&&P||null,textareatype:"textarea"==_&&(P||O)?"constrained":"nolimits",mincount:P,maxcount:O},e.validations=e.validations||{},e.validations[L]=e.validations[L]||[],e.filter=e.filter||{},e.filter[L]=e.filter[L]||[],B&&(e.validations[L].not_empty=Validators.not_empty,f.validators.not_empty=Validators.not_empty),F&&(e.validations[L].zip_code=Validators.zip_code,e.filter[L].zip_code=g.zip_code,f.validators.zip_code=Validators.zip_code,f.filters.zip_code=g.zip_code),I&&"tel"!==_&&(e.validations[L].number=Validators.number,e.filter[L].number=g.number,f.validators.number=Validators.number,f.filters.number=g.number),"password"==_&&(e.validations[L].password=Validators.password,e.filter[L].password=g.password,f.validators.password=Validators.password,f.filters.password=g.password),"text"==_&&(e.validations[L].text=Validators.text,f.validators.text=Validators.text,e.filter[L].text=g.text,f.filters.text=g.text),"textarea"==_&&(e.validations[L].textarea=Validators.textarea,f.validators.textarea=Validators.textarea,e.filter[L].textarea=g.textarea,f.filters.textarea=g.textarea),"select-one"==_&&(e.validations[L].selectbox=Validators.selectbox,f.validators.selectbox=Validators.selectbox),"checkbox"==_&&(e.validations[L].checkboxButton=Validators.checkboxButton,f.validators.checkboxButton=Validators.checkboxButton),"radio"==_&&(e.validations[L].radioButton=Validators.radioButton,f.validators.radioButton=Validators.radioButton),"textarea"!=_&&"text"!=_||!O||(e.validations[L].max_length=Validators.max_length,f.validators.max_length=Validators.max_length),("tel"==_||T)&&(e.validations[L].phone_number=Validators.phone_number,e.filter[L].phone_number=g.phone_number,f.validators.phone_number=Validators.phone_number,f.filters.phone_number=g.phone_number),("japanPhoneNumber"==_||D)&&(e.validations[L].japanese_phone_number=Validators.japanese_phone_number,e.filter[L].japanese_phone_number=g.japanese_phone_number,f.validators.japanese_phone_number=Validators.japanese_phone_number,f.filters.japanese_phone_number=g.japanese_phone_number),("ssn"==_||j)&&(e.validations[L].ssn_number=Validators.ssn_number,e.filter[L].ssn_number=g.ssn_number,f.validators.ssn_number=Validators.ssn_number,f.filters.ssn_number=g.ssn_number),("currency"==_||N)&&(e.validations[L].currency=Validators.currency,e.filter[L].currency=g.currency,f.validators.currency=Validators.currency,f.filters.currency=g.currency),"date"==_&&(e.validations[L].date=Validators.date,f.validators.date=Validators.date),M){var H=f.dataset.valueConfirmField;f.confirmation=d[H],d[H].confirmation=f,e.validations[H].confirm=Validators.confirm,f.validators.confirm=Validators.confirm}f.validates.texttype&&"noRegex"!=f.validates.texttype&&(e.validations[L].regex=Validators.regex,f.validators.regex=Validators.regex),f.validates.numbertype&&"noCons"!=f.validates.numbertype&&(e.validations[L].number=Validators.number,e.filters[L].number=g.number,f.filters.number=g.number,f.validators.number=Validators.number),("email"==_||R)&&(e.validations[L].email=Validators.email,f.validators.email=Validators.email),"text"!=_||"acxiomCode"!=L&&"zipCode"!=L||(e.validations[L].error_response_no_record=Validators.error_response_no_record),"text"==_&&"acxiomCode"==L&&(e.validations[L].error_response_record_present=Validators.error_response_record_present),c(f,"change",Validators.validate),c(f,"blur",Validators.validate),Validators.filtering(f),f.actions=Validators.inputActions(f)}}Validators.stateHideAndShowByCountry(e,o),Validators.jobTitleOtherHideShow(e,o);var z=window.location.pathname;if(z.substring(z.lastIndexOf("/")+1).includes(".error")){var $=document.querySelector(".form-errors");$.querySelector(".heading").textContent=e.words.errorFormerroronsubmission,$.style.display="block";var U=$.querySelector(".formclose-button");c(U,"click",Validators.formAlertClose),c(U,"keydown",Validators.formAlertClose)}return Validators.sessionStorageForUrlParams(e),u&&u.addEventListener("click",function(e){e.preventDefault();var t=e.target.form,a=document.getElementById("jform-ssn-itin");a&&(a.value=S),Validators.formReset(t),t.submitEvent=e,console.log("validating form",t),Validators.formSubmit(t)}),i&&i.addEventListener("click",function(e){e.preventDefault();var t=e.target.form,a=document.getElementById("jform-ssn-itin");a&&(a.value=S),Validators.formReset(t),t.submitEvent=e,console.log("validating form",t),Validators.formSubmit(t)}),e}return null},Validators.getCookie=function(e){for(var t=e+"=",a=document.cookie.split(";"),r=0;r<a.length;r++){for(var n=a[r];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""},Validators.downloadPDF=function(){const e=window.location.search,t=new URLSearchParams(e).get("pdfPath");var a=Validators.getCookie("firstname");a=a.replace(/%20/g," ").replace("+"," "),t&&t.startsWith("/content/dam/")&&t.endsWith(".pdf")&&window.open(t);for(var r=$(".shield-text").find(".textContainer .body"),n=0;n<r.length;n++){var o=$(r[n]).html();if(-1!==o.indexOf("{firstname}")){var s=o.replace("{firstname}",a||"");$(r[n]).html(s)}}},""!=document.referrer&&document.referrer!=window.location.href&&Validators.downloadPDF(),Validators.validate=function(e){return e.target.callEvent=e,Validators.validation(e.target)},Validators.filtering=function(e){for(var t in e.filters){var a=e.filters[t];"function"==typeof a&&(/(zip_code|phone_number|number|password|text|textarea|currency|ssn|japanese_phone_number)/.test(a.name)?c(e,"keyup",a):c(e,"change",a))}},Validators.formActions=function(e){return{validate:function(){return Validators.formValidate(e)},filter:function(e){return Validations.formFilter(e)},submit:function(e){return{}}}},Validators.formData=function(e){var t={};let a=new FormData(e);for(let[e,r]of a.entries())t[e]=e in t?t[e]+","+r:r;return t},Validators.submitSuccess=function(e){if(y){var t=y.closest(".form-container"),a=t.querySelector("input[name='redirect']"),r=e?e.msgType??e.status:void 0;switch(null==(r=y.action.includes("/svt/usbank/tibcodotcomform")&&"Fake"==r?"success":r)&&Validators.attachFormError(t,y.words.errorBackend),r.toLowerCase()){case"success":b?document.location=b:a&&a.value&&(document.location=a.value);break;case"error":Validators.initPostResponseError(e,t),Validators.formValidate(y),Validators.setFormErrorsPostResponse(t),Validators.scrollToViewErrors(y)}}},Validators.beforeSend=function(){switch(y.closest(".form-container").querySelector("input[name='form-id']").value){case"acxiom-form":case"mortgage-leadform":if(y)(y.querySelector('button[type="submit"]')||y.querySelector('input[type="submit"]')).disabled=!0}},Validators.complete=function(e){switch(y.closest(".form-container").querySelector("input[name='form-id']").value){case"acxiom-form":case"mortgage-leadform":if(y)(y.querySelector('button[type="submit"]')||y.querySelector('input[type="submit"]')).disabled=!1}},Validators.initPostResponseError=function(e,t){if("acxiom-form"===t.querySelector("input[name='form-id']").value){var a=t.querySelector("input[name='acxiomCode']"),r=t.querySelector("input[name='zipCode']");a.dataset.errResponseMsg=e.msgDescription,r.dataset.errResponseMsg=e.msgDescription}},Validators.setFormErrorsPostResponse=function(e){if(Validators.clearFormErrors(),"acxiom-form"===e.querySelector("input[name='form-id']").value)I.isNoRecordRes?Validators.attachFormError(e,y.words.errorAcxiomnomatch):I.isRecordPresent&&Validators.attachFormError(e,y.words.errorAcxiomcodeused)},Validators.formReset=function(e){if(y=null,"acxiom-form"===e.closest(".form-container").querySelector("input[name='form-id']").value)I.isNoRecordRes=!1,I.isRecordPresent=!1},Validators.submitError=function(e){console.log("service error",e);var t=document.querySelector(".form-errors");Validators.attachMessage(y,t,[{message:y.words.errorSubmit}]),Validators.scrollToViewErrors(y)},Validators.myOfferForm=function(e){var t=e.closest(".form-container"),a=t.querySelector("input[name='form-id']").value,r=t.querySelector("input[name ^='Confirmation'] ")||t.querySelector("input[name ^='confirmation'] "),n=t.querySelector("input[name = 'zipCode']")||t.querySelector("input[name = 'zipcode']"),o=t.querySelector("input[name = 'OfferProductCode']")||t.querySelector("input[name = 'offerProductCode']"),s=t.querySelector("input[name = 'isNewApply']"),l=Validators.getEcidFromUrl();"myoffer-form"==a&&(s&&"true"==s.value?(e.action=e.action+"?confirmationCode="+r.value+"&zipCode="+n.value+"&offerProductCode="+o.value,l&&(e.action=e.action+"&ecid="+l)):e.action=e.action+"/"+r.value+"/"+n.value)},Validators.getEcidFromUrl=function(){return new URLSearchParams(window.location.search).get("ecid")},Validators.setReferrerCookie=function(e){var t=e.closest(".form-container"),a=t.querySelector('input[name="email"]').value,r=t.querySelector('input[name="company"]').value,n=document.querySelector('input[name="firstName"]').value+" "+document.querySelector('input[name="lastName"]').value;document.cookie="elanReferrerName_cookie="+n+" expires=Sun, 31 Dec 9999 12:00:00 UTC;",document.cookie="elanReferrerEmail_cookie="+a+" expires=Sun, 31 Dec 9999 12:00:00 UTC;",document.cookie="companyReferrer_cookie="+r+" expires=Sun, 31 Dec 9999 12:00:00 UTC;"},Validators.clearReferrerCookie=function(e){document.cookie="elanReferrerName_cookie='' expires=Sun, 31 Dec 9999 12:00:00 UTC;",document.cookie="elanReferrerEmail_cookie='' expires=Sun, 31 Dec 9999 12:00:00 UTC;",document.cookie="companyReferrer_cookie='' expires=Sun, 31 Dec 9999 12:00:00 UTC;"},Validators.getCookieByName=function(e){const t=document.cookie.split(";");for(let a of t){if(a=a.trim(),a.startsWith(e+"="))return a.substring(e.length+1).split(" expires=")[0]}return null},h.setReferrerSubmitValue=function(){var e=Validators.getCookieByName("companyReferrer_cookie");document.querySelector('input[name="pm_genericstring5"]')&&document.querySelector('input[name="pm_genericstring5"]').setAttribute("value",e);var t=Validators.getCookieByName("elanReferrerEmail_cookie");document.querySelector('input[name="pm_genericstring6"]')&&document.querySelector('input[name="pm_genericstring6"]').setAttribute("value",t)},h.checkReferrerCookie=function(e){var t=e.closest(".form-container");if("marketo-form"===t.querySelector("input[name='form-id']").value){var a=t.querySelector("input[name='formType']").value,r=t.querySelector("input[name='pm_genericstring01']"),n=new Date,o=(n.toUTCString().split([" "]),n.getUTCFullYear()+"-"+(n.getUTCMonth()+1)+"-"+n.getUTCDate()+" "+n.toLocaleTimeString("en-us","america/chicago")+" CST");r&&r.setAttribute("value",o),"referrerForm"==a?Validators.setReferrerCookie(e):"referralForm"==a&&(h.setReferrerSubmitValue(),Validators.clearReferrerCookie(e))}},Validators.formSubmit=async function(e){Validators.clearFormErrors();var t=await Validators.formValidate(e),a="true"==e.words.useAjax;e.dataset.useAjax=a,console.log("validated",t);document.cookie.indexOf("cq-authoring-mode");if(t.valid){Validators.clearAllErrors(),y=e;var r=document.getElementsByClassName("g-recaptcha");if(Validators.dateFormatingForSalesForce(e),Validators.hashedLPIDBankSmartlyForm(e),Validators.myOfferForm(e),"marketo-form"==(u=e.closest(".form-container")).querySelector("input[name='form-id']").value&&u.querySelector("input[name='formType']")&&h.checkReferrerCookie(e),$("input[type='hidden'][name='CD_DTO_ID__c']").length>0&&(document.body.id="mortgage-request-call-new"),"mortgage-request-call-new"===document.body.id){const e=document.getElementById("topic");if(e){const t=e.options[e.selectedIndex].text;sessionStorage.setItem("topicSelectForRequestToCall",t)}}a?r&&r.length>0?(e.id="recaptcha-form",f(e.submitEvent)):Validators.success(e):r&&r.length>0?(e.id="recaptcha-form",f(e.submitEvent)):e.submit()}else{0;var n=e.parentElement.querySelector(".form-errors"),o=n.querySelector(".heading"),s=n.querySelector(".error.messages"),l=document.querySelector(".form-success");n.style.display="block";var i=n.querySelector(".formclose-button");c(i,"click",Validators.formAlertClose),c(i,"keydown",Validators.formAlertClose),Validators.scrollToViewErrors(e),l.style.display="none",o.textContent=e.words.errorForm;var u,d="";switch((u=e.closest(".form-container")).querySelector("input[name='form-id']").value){case"acxiom-form":case"email-form":case"mortgage-leadform":case"salesforce-form":case"hilton-form":case"marketo-form":case"bank-smartly-form":case"marketing-automation-form":d=Validators.generateFormErrorsList(e,!1,!0);break;default:d=Validators.generateFormErrorsList(e,!0,!1)}s.replaceChildren(),s.appendChild(d),Validators.taxpayerLoader(),Validators.taxTypeSelection(),Validators.usNonUsphoneNumberLoader(),Validators.stateHideAndShowByCountry(e,u),Validators.jobTitleOtherHideShow(e,u)}},Validators.success=function(e){T=Object.assign(T,{url:e.action,action:e.action,data:Validators.formData(e),error:Validators.submitError,success:Validators.submitSuccess,beforeSend:Validators.beforeSend,complete:Validators.complete}),Validators.formAriaLiveOn(e),Validators.service(T,e);var t=document.querySelector(".form-success"),a=t.querySelector(".success-heading"),r=t.getAttribute("data-onpageConfirmation"),n=e.closest(".form-container").querySelector("input[name='pdfpath']").value,o=document.querySelector(".onpage-success-placeholder");"true"==r&&(setTimeout(()=>{var a=window.location.pathname;a.substring(a.lastIndexOf("/")+1).includes(".error")?t.style.display="none":(t.classList.remove("hide"),t.style.display="block",o&&(o.classList.remove("hide"),e.classList.add("hide"),gtag("event","conversion",{send_to:"AW-16626072812/owUGCLHZ4r0ZEOz59vc9"})));var r=t.querySelector(".formclose-button");c(r,"click",Validators.formAlertClose),c(r,"keydown",Validators.formAlertClose)},"1000"),setTimeout(function(){a.focus(),t.scrollIntoView({behavior:"smooth",block:"start"})},2e3),Validators.clearAllValue(e),""!=n&&Validators.downloadPDF())},Validators.generateFormErrorsList=function(e,t,a){var r=i("ul");for(var n in e.errors){var o=e.errors[n];if(o.length>0){var s=i("li"),l=o.map(function(e){return e.message});if(t){var u=i("span",{class:"bold"});u.textContent=o[0].inputlabel+": ",s.appendChild(u)}var d=i("span",{class:"text"}),m=l.join(", ");if(a){var p=o[0].inputlabel.toLowerCase(),f=o[0].inputid,v=m.split(new RegExp("("+p.replace("?","\\?")+")","gi"));for(var g in v)if(v[g].toLowerCase()!=p&&""!=v[g]){var h=i("span");h.textContent=v[g],d.appendChild(h)}else if(v[g].toLowerCase()==p&&""!=v[g]){var y=i("a",{href:"#"+f});y.textContent=v[g],y.form=e,c(y,"click",Validators.inPageHandler),c(y,"click",Validators.errorFieldFocusing),c(y,"keydown",Validators.errorFieldFocusing),d.appendChild(y)}}else d.textContent=m;null!==document.querySelector("[name='"+n+"']").offsetParent&&(s.appendChild(d),r.appendChild(s))}}return r},Validators.formFilter=function(e){for(var t in e.fields)for(var a in t.getFilters)a.filter(t)},Validators.formValidate=async function(e){var t={},a=!0;for(var r in e.fields){var n=e.fields[r];if("hidden"!=n.type&&"submit"!=n.type&&0!=n.required){var o=n.actions&&await n.actions.validate();o&&o.valid||!1,o.valid||(a=!1),t[n.name]=o.message}}return{valid:a,messages:t}},Validators.inPageHandler=function(e){e.preventDefault();var t=e.target,a=document.querySelector(".form-message-container");if(t&&t.getAttribute("href")){var r=t.getAttribute("href").split("#"),n=r[r.length-1];if(n){let r=document.getElementById(n);if(setTimeout(function(){r.focus(),r.scrollIntoView({behavior:"smooth",block:"center"})},500),d()){Validators.formAriaLiveOff(t.form),e.stopImmediatePropagation();var o=i("span",{class:"sr-only"});o.textContent=r.name+": ".concat(r.getAttribute("aria-label")||r.name),a.innerHTML="",a.appendChild(o)}}}},Validators.formAriaLiveOn=function(e){e&&e.ariaLives&&e.ariaLives.forEach(function(e){e.setAttribute("aria-live","polite")})},Validators.formAriaLiveOff=function(e){var t=document.querySelector(".form-message-container");e&&e.ariaLives&&e.ariaLives.forEach(function(e){e.removeAttribute("aria-live")}),t&&t.setAttribute("aria-live","polite")},Validators.service=function(e,t){"mortgage-request-call-new"===document.body.id&&E.show();var a=null;let r=t.action.includes("/svt/usbank/tibcodotcomform")||t.action.includes("/svt/ecm/leadFormSubmission")?"text":e.dataType;return $.ajax({type:e.type,url:e.url,data:e.data,dataType:r,beforeSend:e.beforeSend,complete:e.complete,success:function(t){let n={};if("text"===r||"TEXT"===r){let e=t.replace(/&quot;/g,'"').replace(/&amp;/g,"&");n=JSON.parse(e)}else"json"!==r&&"JSON"!==r||(n=t);e.success(n),"mortgage-request-call-new"===document.body.id&&E.hide(),a=n},error:function(r){"function"==typeof e.error&&("mortgage-request-call-new"===document.body.id?(!function(e,t){const a=document.querySelector(".form-errors");if(a){let r=a,n=r.querySelector(".heading"),o=r.querySelector(".error.messages");n.innerHTML=`<h2>${t.words.errorLeadformserviceerrorheading}</h2>`;const s=document.createElement("ul"),l=document.createElement("li");l.textContent=t.words.errorLeadformserviceerrordesc,s.appendChild(l),o.appendChild(s),r.style.display="block";let i=r.querySelector(".formclose-button");c(i,"click",e.formAlertClose),c(i,"keydown",e.formAlertClose),a.focus()}}(Validators,t),E.hide()):e.error(r)),a=r}}),a},Validators.inputActions=function(e){return{validate:async function(){return await Validators.validation(e)},getValidators:function(){return e.validators},getFilters:function(){return e.filters}}},Validators.attachMessage=function(e,t,a){Validators.clearErrors(t);var r=t.querySelector(".messages")||t,n=Validators.messages(a),o=e.closest(".fieldset")||e.closest(".form-container"),s=t.getAttribute("id");r.replaceChildren(),r.appendChild(n),t.classList.remove("hide"),t.setAttribute("aria-hidden","false"),/(radio|checkbox)/.test(e.type)&&e.setAttribute("aria-checked","false"),e.setAttribute("aria-describedby",s),o.classList.add("error")},Validators.attachFormError=function(e,t){var a=e.querySelector(".form-errors"),r=e.querySelector(".form-success"),n=a.querySelector(".heading");a.style.display="block",r.style.display="none",n.textContent=t},Validators.validation=async function(e){var t=e.form,a=await t.validations[e.name],r=document.getElementById("field-error-"+e.id);if(/(radio|checkbox)/.test(e.type)&&""!=e.closest(".checkboxes").id){var n=e.closest(".checkboxes").id;r=document.getElementById("field-error-"+n)}/(select)/.test(e.type)&&(Validators.employmentStatus(t,e),Validators.foreignAddress(t,e),Validators.statePrefecture(t,e)),/(radio|checkbox)/.test(e.type)&&(Validators.incomeDescription(t,e),Validators.handleFormCheckboxSubmitBtn());var o=!1,s=[];if(t.errors=t.errors||{},t.errors[e.name]=[],Object.keys(a).length>0){if("not_empty"in a)o=(c=await Validators.constructErrorMsg(e,a.not_empty,t.errors)).valid,s=c.messages;if(e.value&&(null!=c&&c.valid||!("not_empty"in a))){var l=!0;for(var i in a){var c;(c=await Validators.constructErrorMsg(e,a[i],t.errors)).valid||(l=!1)}o=l,s=c.messages}t.errors[e.name].length>0?Validators.attachMessage(e,r,t.errors[e.name]):r&&Validators.clearErrors(r)}else o=!0;return{valid:o,messages:s}},Validators.constructErrorMsg=async function(e,t,a){var r=await t&&await t(e);if("object"==typeof r&&!r.valid){var n=e.labels[0];n&&n.textContent.replace("\n","").trim().split(" ").join("-"),a[e.name].push({message:r.message,label:n,inputlabel:e.getAttribute("data-value-title"),inputid:e.getAttribute("id")})}return{valid:r.valid,messages:r.message}},Validators.clearAllValue=function(e){(document.getElementById(e.id).reset(),document.querySelectorAll(".fieldset").forEach(function(e){e.classList.remove("active")}),document.querySelector(".textarea"))&&(document.querySelector(".textarea .count").style.display="none")},Validators.clearAllErrors=function(){document.querySelectorAll(".errors").forEach(function(e){Validators.clearErrors(e)}),Validators.clearFormErrors()},Validators.clearFormErrors=function(){var e=document.querySelector(".form-errors"),t=e.querySelector(".heading"),a=e.querySelector(".error.messages");e&&(e.classList.add("hide"),e.style.display="none"),t&&(t.innerHTML=null),a&&(a.innerHTML=null)},Validators.clearErrors=function(e){var t=e.querySelector(".messages")||e,a=e.getAttribute("id");if(t){var r=e.closest(".fieldset")||e.parentElement.querySelector(".fieldset");if(r)var n=r.querySelector('[aria-describedby="'+a+'"]');n&&n.removeAttribute("aria-describedby"),r.classList.remove("error"),e.classList.add("hide"),e.setAttribute("aria-hidden","true"),t.innerHTML=""}},Validators.messages=function(e){if(1==e.length){var t=document.createElement("span");return t.className="message "+e[0].label,t.setAttribute("aria-live","polite"),t.textContent=e[0].message,t}var a=document.createElement("ul");for(var r in e){var n=document.createElement("li");n.className="message "+e[r].label,n.setAttribute("aria-live","polite"),n.textContent=e[r].message,a.appendChild(n)}return a},Validators.dating=function(e){var t=new Date(t);return e.days&&t.setDate(t.getDate()+e.days),e.months&&t.setDate(t.getMonth()+1+e.months),e.years&&t.setDate(t.getYear()+e.years),g.widgetDate(result)},Validators.transforms=function(e){b=$(e).find("input[name=':redirect']")?$(e).find("input[name=':redirect']").val():null;var t=!!$("meta[data-cpagepath]")&&$("meta[data-cpagepath]").attr("data-cpagepath");const a=new Uint32Array(1);self.crypto.getRandomValues(a);var r=Math.floor(1e-6*a[0]),n=document.querySelector("input[name='form-id']");n&&("marketo-form"==n.value&&"marketing-automation-form"==n.value||e.appendChild(i("input",{type:"hidden",name:"formId",value:r}))),t&&e.appendChild(i("input",{type:"hidden",name:"cpagepath",value:t}))},Validators.scrollToViewErrors=function(e){var t=document.querySelector("body").querySelector(".form-errors");t.querySelector(".error-heading");t.focus()},2==performance.navigation.type&&location.reload(!0);var I={noMatchingRecord:"No matching record found with the entered Acxiom and Zip combination.",leadAlreadySubmitted:"Lead already submitted with this Acxiom Id.",isNoRecordRes:!1,isRecordPresent:!1};function N(e){return null!=e}function j(e,t){t.required=!0,t.ariaRequired="true",e.validations[t.name].not_empty=Validators.not_empty}function M(e,t){t.required=!1,t.ariaRequired="false",delete e.validations[t.name].not_empty;var a=document.getElementById("field-error-"+t.id);a&&Validators.clearErrors(a)}function B(e,t,a,r,n,o){"US"==t.value?a&&n&&(j(e,a),r.style.display="block",o.style.display="none",n.value="",M(e,n)):""!=t.value&&a&&n&&(j(e,n),o.style.display="block",r.style.display="none",a.selectedIndex=0,M(e,a))}Validators.errorFieldFocusing=function(e){if("keydown"===e.type&&13==e.keyCode||"click"===e.type){e.preventDefault();var t=e.target.getAttribute("href");if(t){var a=t.split("#"),r=a[a.length-1],n=document.getElementById(r);n&&setTimeout(function(){n.focus(),n.scrollIntoView({behavior:"smooth",block:"center"})},500)}}},Validators.formAlertClose=function(e){("keydown"===e.type&&13==e.keyCode||"click"===e.type)&&(e.preventDefault(),document.querySelector(".form-errors").style.display="none",document.querySelector(".form-success").style.display="none",(document.querySelector('button[type="button"]')||document.querySelector('button[type="submit"]')||document.querySelector('input[type="submit"]')).focus())},Validators.preFillFormElements=function(e){var t=document.querySelector("input[name='form-id']");if(t)switch(t.value){case"acxiom-form":if(e&&e.USERCHAR1){var a=t.form.querySelector("input[name='acxiomCode']");a.value=e.USERCHAR1,a.focus()}break;case"mortgage-leadform":var r=document.querySelector(".formheading .consultant-name"),n=t.form.querySelector("input[name='goalscoach-name']");if(r&&e&&e.FirstName&&e.LastName&&e.Email)r.textContent=e.FirstName+" "+e.LastName,t.form.querySelector("input[name='MLO']").value=e.Email;else if(n&&e&&e.FirstName&&e.LastName&&e.Email){var o=t.form.querySelector("input[name='Goals_coach_name']");o.value=e.FirstName+" "+e.LastName,o.focus(),t.form.querySelector("input[name='goalsCoachEmail']").value=e.Email}}},Validators.japaneseFieldHideAndShow=function(e,t,a){if(1==t)e.closest(".form-element").style.display="block",e.setAttribute("required","required");else if(e.closest(".form-element").style.display="none",e.removeAttribute("required"),e.closest(".form-element").querySelectorAll(".errors").forEach(function(e){Validators.clearErrors(e)}),1==a&&(e.value=""),""!=e.id){var r=document.querySelector("a[href='#"+e.id+"']");N(r)&&r.closest("li").remove()}},Validators.usNonUsphoneNumberLoader=function(){var e=document.querySelector("#japanesePhoneType"),t=document.querySelector("#UsNumber"),a=document.querySelector("#NonUsNumber");if(N(e&&t&&a)){var r=e.value.toLowerCase();"us"==r?(Validators.japaneseFieldHideAndShow(t,!0,!1),Validators.japaneseFieldHideAndShow(a,!1,!0)):"nonus"==r||"japan"==r?(Validators.japaneseFieldHideAndShow(a,!0,!1),Validators.japaneseFieldHideAndShow(t,!1,!0)):"both"==r?(Validators.japaneseFieldHideAndShow(t,!0,!1),Validators.japaneseFieldHideAndShow(a,!0,!1)):(Validators.japaneseFieldHideAndShow(t,!1,!0),Validators.japaneseFieldHideAndShow(a,!1,!0))}},Validators.taxTypeSelection=function(){var e,t=document.querySelector("#japaneseTaxType"),a=document.querySelector("#japaneseSsnNumber");N(t&&a)&&("ssn"==t.value.toLowerCase()?(Validators.japaneseFieldHideAndShow(a,!0,!1),N(e=document.querySelectorAll("input[type='radio'][name='japaneseDisclaimer']"))&&e.forEach(function(e){e.removeAttribute("disabled"),e.removeAttribute("checked")})):(Validators.japaneseFieldHideAndShow(a,!1,!0),N(e=document.querySelectorAll("input[type='radio'][name='japaneseDisclaimer']"))&&e.forEach(function(e){""!=e.value&&"no"==e.value.toLowerCase()&&(e.checked=!0,e.closest(".form-element").querySelectorAll(".errors").forEach(function(e){Validators.clearErrors(e)})),e.setAttribute("disabled","disabled"),Validators.taxpayerLoader(),e.closest("label").addEventListener("mousedown",function(e){e.stopImmediatePropagation()},!0)})))},Validators.taxpayerLoader=function(){var e=document.querySelectorAll("input[type='radio'][name='japaneseDisclaimer']"),t=document.querySelector("#japaneseTaxPayerRte"),a=document.querySelector("input[type='checkbox'][name='japaneseTaxPayerInfo']");if(N(t&&a&&e)){var r=Array.from(e).filter(function(e,t){return 1==e.checked}),n=a.getAttribute("data-label-text")?a.getAttribute("data-label-text").replace("I,",""):"";if(t.closest(".component-container").classList.remove("vpad-24"),t.closest(".component-container").classList.add("vpad-0"),r.length>0&&"yes"==r[0].value.toLowerCase()){t.closest("section").style.display="block";var o=document.getElementById("japaneseSsnNumber");N(o)&&(document.getElementById("japaneseSsnAndItinLoader").innerHTML=o.getAttribute("data-ssnvalue"));var s=document.getElementById("japaneseFirstName"),l=document.getElementById("japaneseLastName"),i="I, "+(s?s.value+" ":" ")+(l?l.value+", ":" ")+n;a.nextElementSibling.innerHTML=i,a.setAttribute("aria-label",i),Validators.japaneseFieldHideAndShow(a,!0,!1)}else t.closest("section").style.display="none",Validators.japaneseFieldHideAndShow(a,!1,!1)}},Validators.ssnUnMasking=function(e){const t=(e,t,a)=>e.substring(0,t)+a+e.substring(t+1);if("string"!=typeof e||!e)return null;let a=e.replace(/[^0-9*]/g,"").substring(0,9),r="*".repeat(9);for(let e=0;e<a.length;e++)/[0-9]/.test(a[e])&&(r=t(r,e,a[e]));let n=r.substring(0,9);return n.length>=4&&(n=n.slice(0,3)+"-"+n.slice(3)),n.length>=7&&(n=n.slice(0,6)+"-"+n.slice(6)),n},Validators.jobTitleOtherHideShow=function(e,t){if(e&&e.querySelector("[name='JobTitle']")&&e.querySelector("[name='jobTitleOther']")){const t=e.querySelector("[name='JobTitle']"),a=e.querySelector("[name='jobTitleOther']"),r=()=>{const e=a.closest(".form-element");e&&("other"===t.value?(e.style.display="block",a.setAttribute("required",!0),a.setAttribute("data-value-constraint",!0)):(e.style.display="none",a.value="",a.removeAttribute("required"),a.removeAttribute("data-value-constraint")))};t.addEventListener("change",r),r()}},Validators.stateHideAndShowByCountry=function(e,t){if(e&&e.querySelector(".countryField")&&e.querySelector(".stateField")&&("marketo-form"==e.querySelector("input[name='form-id']").value||"marketing-automation-form"==e.querySelector("input[name='form-id']").value)){const r=e.querySelector(".stateField"),n=e.querySelector(".countryField"),o=e.querySelector("#canadianProvinces");if("United States"==n.value){if(r.closest(".form-element.state").style.display="block",r.setAttribute("required",!0),r.setAttribute("data-value-constraint",!0),o)if(o.closest(".fieldset.select ").style.display="none",o.removeAttribute("required"),o.removeAttribute("data-value-constraint"),o.value="",""!=o.id)o.closest(".form-element").querySelectorAll(".errors").forEach(function(e){Validators.clearErrors(e)}),N(a=t?t.querySelector("a[href='#canadianProvinces']"):"")&&a.closest("li").remove()}else if("Canada"==n.value){if(o.closest(".fieldset.select ").style.display="block",o.setAttribute("required",!0),o.setAttribute("data-value-constraint",!0),r)if(r.closest(".form-element.state").style.display="none",r.value="",r.removeAttribute("required"),r.removeAttribute("data-value-constraint"),""!=r.id)r.closest(".form-element").querySelectorAll(".errors").forEach(function(e){Validators.clearErrors(e)}),N(a=t?t.querySelector("a[href='#"+r.id+"']"):"")&&a.closest("li").remove()}else{var a;if(o)if(o.closest(".fieldset.select ").style.display="none",o.removeAttribute("required"),o.removeAttribute("data-value-constraint"),o.value="",""!=o.id)o.closest(".form-element").querySelectorAll(".errors").forEach(function(e){Validators.clearErrors(e)}),N(a=t?t.querySelector("a[href='#canadianProvinces']"):"")&&a.closest("li").remove();if(r.closest(".form-element.state").style.display="none",r.value="",r.removeAttribute("required"),r.removeAttribute("data-value-constraint"),""!=r.id)r.closest(".form-element").querySelectorAll(".errors").forEach(function(e){Validators.clearErrors(e)}),N(a=t?t.querySelector("a[href='#"+r.id+"']"):"")&&a.closest("li").remove()}}},Validators.dateFormatingForSalesForce=function(e){if("salesforce-form"==e.querySelector("input[name='form-id']").value){var t=function(e){return"_m/_d/_y".replace("_m",("0"+(e.getMonth()+1)).slice(-2)).replace("_d",("0"+e.getDate()).slice(-2)).replace("_y",e.getFullYear())},a=e.querySelectorAll("input[type=date]");a&&a.forEach(function(a){if(a.hasAttribute("data-name")&&""!=a.dataset.name&&""!=a.value&&null!=a.value){var r=a.value,n=new Date(r.replace(/-/g,"/"));e.querySelector("input[type=hidden][name='"+a.dataset.name+"']")?e.querySelector("input[type=hidden][name='"+a.dataset.name+"']").value=t(n):e.appendChild(i("input",{type:"hidden",name:a.dataset.name,value:t(n)})),a.name=""}})}},Validators.hashedLPIDBankSmartlyForm=function(e){var t=e.querySelector("input[name='form-id']");if(t&&"bank-smartly-form"==t.value){var a=e.querySelectorAll("input[type=hidden][name='HashedLPID']");if(a&&a.length>0){var r=Validators.getCookieByName("riblpid");if(r){r=r.replace(/['"]+/g,"");for(let e=0;e<a.length;e++)a[e].value=r}}}},Validators.sessionStorageForUrlParams=function(e){let t=window.location.search,a=!1;if(t.length>0){const r=new URLSearchParams(t),n=r.entries();for(const t of n){let n=e.querySelectorAll("input[id^='form-hidden']");for(let e of n)if(e.value.toLowerCase()==t[0].toLowerCase()){const n=e=>Object.fromEntries(Object.entries(e).map(([e,t])=>[e.toLowerCase(),t])),o=n(Object.fromEntries(r));sessionStorage.setItem(e.value.toLowerCase(),t[1]),sessionStorage.setItem("sessionValues",JSON.stringify(o));sessionStorage.getItem("sessionValues").replace(/['"]+/g,"");a=!0}}}else if(null!=sessionStorage.getItem("sessionValues")){let t=sessionStorage.getItem("sessionValues").replace(/['"]+/g,""),r=e.querySelectorAll("input[id^='form-hidden']");for(let e of r)t.includes(e.value.toLowerCase())&&(a=!0)}else{let t=e.querySelectorAll(".genericURLParams input[type='hidden']"),r={};if(t.length>0)for(let e of t)if("Default"!=e.value&&""!=e.value&&sessionStorage.setItem(e.name.toLowerCase(),e.value),"Default"!=e.value&&""!=e.value&&(r[e.name.toLowerCase()]=e.value),Object.keys(r).length>0){sessionStorage.setItem("sessionValues",JSON.stringify(r));sessionStorage.getItem("sessionValues").replace(/['"]+/g,"");a=!0}}if(1==a&&(document.getElementById("urlParams").value=sessionStorage.getItem("sessionValues").replace(/['"]+/g,"").toString()),e.querySelector("input[id='leadFormId']")){let t=e.querySelector("input[id='leadFormId']").value;sessionStorage.setItem("leadFormIdValue",t)}},Validators.employmentStatus=function(e,t){if("jform-emp-status"==t.id){var a=document.querySelector("#jform-employer-name"),r=document.querySelector("#jform-emp-start-date");"FTEMP"==t.value||"PTEMP"==t.value||"SELF"==t.value?(a&&j(e,a),r&&j(e,r)):(a&&M(e,a),r&&M(e,r))}},Validators.handleFormCheckboxSubmitBtn=function(){const e=document.querySelector('form[action="/svt/usbank/tibcodotcomform"]'),t=e?.querySelector('input[name="CustomerAttestation"]');e&&t&&(t.value=t.checked?"true":"false",event&&"load"==event.type&&Validators.swapDivs(e))},Validators.swapDivs=function(e){const t=e.querySelector("#CustomerAttestation"),a=t.previousElementSibling;if(t&&a){const e=t.closest(".checkbox-options");e.classList.add("CustomerAttestation-wrapper"),e.insertBefore(t,a)}},Validators.incomeDescription=function(e,t){if(t===e.querySelector('#jform-income-sources input[value="OTHR"]')){var a=e.querySelector("#jform-income-source-desc");if("OTHR"==t.value)if(t.checked){if(a)j(e,a),e.querySelector("#jform-income-source-desc").parentElement.parentElement.parentElement.parentElement.style.display="block"}else if(a)M(e,a),e.querySelector("#jform-income-source-desc").parentElement.parentElement.parentElement.parentElement.style.display="none"}},Validators.foreignAddress=function(e,t){if("jform-w-8ben-select"==t.id){var a=e.querySelector("#jform-tax-id-number"),r=e.querySelector("#jpForm-permanentCountry"),n=e.querySelector("#jform-streetAddress1"),o=e.querySelector("#jform-permanentCity"),s=e.querySelector("#jform-permanentPostalCode");"Yes"==t.value?(a&&j(e,a),r&&j(e,r),n&&j(e,n),o&&j(e,o),s&&j(e,s)):(a&&M(e,a),r&&M(e,r),n&&M(e,n),o&&M(e,o),s&&M(e,s))}},Validators.statePrefecture=function(e,t){if("jform-address-country"==t.id){var a=e.querySelector("#jform-address-state"),r=e.querySelector("#jform-address-prefecture");if(e&&t&&a&&r)B(e,t,a,a.parentElement.parentElement.parentElement.parentElement,r,r.parentElement.parentElement.parentElement.parentElement)}if("jform-mailing-country"==t.id){var n=e.querySelector("#jform-mailing-state"),o=e.querySelector("#jform-mailing-prefecture");if(e&&t&&n&&o)B(e,t,n,n.parentElement.parentElement.parentElement.parentElement,o,o.parentElement.parentElement.parentElement.parentElement)}if("jpForm-permanentCountry"==t.id){var s=e.querySelector("#jform-permanentState"),l=e.querySelector("#jform-8ben-prefecture");if(e&&t&&s&&l){var i=l.parentElement.parentElement.parentElement.parentElement;B(e,t,s,s.parentElement.parentElement.parentElement.parentElement,l,i)}}if("avvance-new-customer"==t.id){var c=e.querySelector("#avvance-zip-code"),u=e.querySelector("#avvance-mid"),d=e.querySelector("#avvance-industry-selector");if(e&&t&&c&&u&&d){var m=c.parentElement.parentElement.parentElement.parentElement,p=u.parentElement.parentElement.parentElement.parentElement,f=d.parentElement.parentElement.parentElement.parentElement;"new customer"==t.value||"whitepaper"==t.value?(m.style.display="block",p.style.display="none",f.style.display="block",j(e,c),j(e,d)):"integrated partner"==t.value?(j(e,c),M(e,d),m.style.display="block",p.style.display="none",f.style.display="none"):"existing customer"==t.value&&(M(e,c),M(e,d),m.style.display="none",p.style.display="block",f.style.display="none")}}if("avvance-new-customer-1"==t.id){var v=e.querySelector("#avvance-zip-code-1"),g=e.querySelector("#avvance-mid-1"),h=e.querySelector("#avvance-industry-selector-1");if(e&&t&&v&&g&&h){var y=v.parentElement.parentElement.parentElement.parentElement,b=g.parentElement.parentElement.parentElement.parentElement,S=h.parentElement.parentElement.parentElement.parentElement;"new customer"==t.value||"whitepaper"==t.value?(y.style.display="block",b.style.display="none",S.style.display="block",j(e,v),j(e,h)):"integrated partner"==t.value?(j(e,v),M(e,h),y.style.display="block",b.style.display="none",S.style.display="none"):"existing customer"==t.value&&(M(e,v),M(e,h),y.style.display="none",b.style.display="block",S.style.display="none")}}},-1!=document.cookie.indexOf("jp_cookie_consent=accepted")&&(window.location="https://www.usbank.com/customer-service/global-transition-solutions/welcome.html");var P=document.querySelector("#jp-button-yes-1"),O=document.querySelector("#jp-button-no-1"),H=document.querySelector("#jp-button-yes-2"),z=document.querySelector("#jp-button-no-2");function U(){document.cookie="jp_cookie_consent=accepted; expires=Sun, 31 Dec 2023 12:00:00 UTC;path="+window.location.pathname+";"}function W(){document.cookie="jp_cookie_consent=notAccepted; expires=Sun, 31 Dec 2023 12:00:00 UTC;path="+window.location.pathname+";"}if(P&&P.addEventListener("click",U),O&&O.addEventListener("click",W),H&&H.addEventListener("click",U),z&&z.addEventListener("click",W),/(md|sm)/.test(s())){let e=document.querySelectorAll(".mobile-app-nav-hide");"USBAPP"==sessionStorage.getItem("Channel")?e.forEach(function(e){e.style.display="none"}):e.forEach(function(e){e.style.display="block"})}document.querySelectorAll(".form_option_auto-complete").forEach(e=>{var t=Array.from(e.parentElement.querySelectorAll(".auto-complete"));!function(e,t){var a;function r(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),a>=e.length&&(a=0),a<0&&(a=e.length-1),e[a].classList.add("autocomplete-active")}function n(t){for(var a=document.getElementsByClassName("autocomplete-items"),r=0;r<a.length;r++)t!=a[r]&&t!=e&&a[r].parentNode.removeChild(a[r])}e.addEventListener("input",function(r){var o=this.value;if(n(),!o)return!1;a=-1;var s=document.createElement("DIV");s.setAttribute("id",this.id+"autocomplete-list"),s.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(s);for(var l=0;l<t.length;l++){var i=t[l].value;if(i.substr(0,o.length).toUpperCase()==o.toUpperCase()){var c=document.createElement("DIV");c.innerHTML="<strong>"+i.substr(0,o.length)+"</strong>",c.innerHTML+=i.substr(o.length),c.innerHTML+="<input type='hidden' value='"+i+"'>",c.addEventListener("click",function(t){e.value=this.getElementsByTagName("input")[0].value,n()}),s.appendChild(c)}}}),e.addEventListener("keydown",function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40==e.keyCode?(a++,r(t)):38==e.keyCode?(a--,r(t)):13==e.keyCode&&(e.preventDefault(),a>-1&&t&&t[a].click())}),document.addEventListener("click",function(e){n(e.target)})}(e,t)});a(881)}()}();
var usbUtils = usbUtils || {};

var sizes = {
  small: 672,
  medium: 1056,
};

(function() {
  usbUtils = {
    /**
     * @returns nodeList as array or empty array
     */
    nodeListArray: function(list) {
        if (list.length && list.length > 0) {
            return Array.from ? Array.from(list) : Array.prototype.slice.call(list);
        }
        return [];
    },

    /**
     * Provide a query string and options parent to get Plain Array of HTMLElements 
     * @param {*} elstring 
     * @param {*} parent 
     * @returns Array<HTMLElement>
     */
    selectNodes: function(elstring,parent) {
      var nodes = parent && parent.nodeType==1 ? parent.querySelectorAll(elstring) : document.querySelectorAll(elstring);
      return usbUtils.nodeListArray(nodes);
    },

    
    /**
     * 
     * Provide a query string and options parent to get Plain Array of VISIBLE HTMLElements 
     * @param {*} elstring 
     * @param {*} parent 
     * @returns Array<HTMLElement>
     * @returns 
     */
    selectVisibleNodes: function(elstring,parent) {
      return usbUtils.visibleNodes(usbUtils.selectNodes(elstring, parent));
    },

    /**
     * Provide HTML collection or Array of nodes to get the visible ones returned 
     * @param {*} nodes 
     * @returns Array<HTMLElement> || []
     */
    visibleNodes: function(nodes) {
      return usbUtils.nodeListArray(nodes).filter(function(el){
        return el && null!==el && (!!(el.offsetWidth || el.offsetHeight || el.getClientRects().length));
      });
    },

    /**
     * Provide aggregate compilation of boundingClientRects in array of nodes
     * From query string returns Object of aggregate params for a Array<HTML> list of the query result 
     * @param {*} elstring 
     * @returns Object {left:number,top:number,height:number,width:number,length:numbe} 
     */
    nodesBoundary: function(elstring) {
      var boundaries = usbUtils.selectNodes(elstring).map(function(el) {
        if (el.getBoundingClientRect) return el.getBoundingClientRect(el);
      });
      var count = boundaries.length;
      if (boundaries && boundaries.length) {
        var first = boundaries.shift();
        var combine = {
          left: first.x,
          top: first.y,
          height: first.height,
          width: first.width,
          length: count
        };
        for (var i = 0; i < boundaries.length; i++) {
          combine.height += boundaries[i].height;
          combine.width +=  boundaries[i].width;
        }
        return Object.assign(combine,{averages:{width: combine.width/count, height: combine.height/count}});
      }
      return {left: 0, top: 0, height: 0, width:0, length: 0, averages:{width:0, height:0}};
    },

    /**
     * @return number | null
     */
    minInArray: function(arr) {
        if (arr && arr.length) {
            if (arr.indexOf(0)) return 0;

            return arr.reduce(function(a, b) {
                return Math.min(parseFloat(a), parseFloat(b));
            }, 100000);

        }
        return null;
    },


    /**
     * @return number | null
     */
    maxInArray: function(arr) {
        if (arr && arr.length) {
            return arr.reduce(function(a, b) {
                return Math.max(parseFloat(a), parseFloat(b));
            }, 0);
        }
        return null;
    },

    /**
     *  
     * @returns string | number
     * : (formatted string) => returns number
     * : (pattern, number) => return formatted string 
     * : (pattern, number, delimiter) => return formatted string using the delimiter to split
     */
    numberMask: function () {
      var _s,_p;
      var regex = /#/g; 
      var it    = 0;

      if(arguments.length == 1) return arguments[0].replace(/[^\d]/g,'');
      if(arguments.length > 1) {
        _p = arguments[0];
        //string of numbers only
        _s = String(arguments[1]).replace(/[^\d]/g,'');
      }
      if(arguments.length == 3) {
        regex = new RegExp(arguments[2], 'g');
      }


      return _p.replace(regex, function(match){
        if( !_s[it]) return match;
        return _s[it++];
      });

    },

    windowSize: function() {
        var _w = document.body.offsetWidth;
        if (_w < sizes.small) return 'sm';
        if (_w > sizes.small && _w < sizes.medium) return 'md';
        return 'lg';
    },

     /* Returns value for the cookie key */
     getCookieItem: function(val){
      var name = val+ "=";
      var decodedCookie = decodeURIComponent(document.cookie);
      var ca = decodedCookie.split(';');
      for(var i = 0; i <ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return null;
  },

    arrowLinkLastWordInIcon: function(selector) {
      var arrows = usbUtils.nodeListArray(document.querySelectorAll(selector));
      for (var _a in arrows) {
        var arrow     = arrows[_a];
        var icon      = arrow.querySelector('.icon');
        var ariaLabel = arrow.getAttribute('aria-label');

        var words = arrow.textContent.split(' ').filter(function (_w, i) {
          // @TODO -Regex can be improved for more specific input masking
          var _word = _w.replace(/[^ -ÿ]/gi, '');
          return _word.length > 0;
        });
        if (icon && words.length) {
          if (arrow.tagName.toLowerCase() === 'a') {
            arrow.ariaLabel = ariaLabel || words.join(' ');         
          } else {
            arrow.closest('a').ariaLabel = ariaLabel || words.join(' ');
          }

          var word = words.pop();
          var tl   = document.createElement('span');

          tl.setAttribute('aria-hidden','true');
          tl.innerHTML=words.join(' ');

          arrow.insertBefore(tl, arrow.firstChild);
          icon.textContent = word;
          icon.setAttribute('aria-hidden','true');
          icon.classList.add('nowrap');
        }
      }
    },

    superscriptsIncludeOwnershipSymbols: function() {
      var superscripts = usbUtils.nodeListArray(document.querySelectorAll('sup'));
      if (superscripts) {
          superscripts.forEach(function(superscript) {
              var symbolsArePresent = /©|&copy|®|&reg;|™|&trade;/gi;
              if (symbolsArePresent.test(superscript.innerText)) {
                  superscript.classList.add('has-symbols');
              }
          });   
      }
    },

    ucFirst: function(word) {
      return word.charAt(0).toUpperCase() + word.slice(1);
    },

    /**
     * barrowed from https://jonisalonen.com/2012/from-utf-16-to-utf-8-in-javascript/ 
     * may change to meet our needs
     * @param {*} str: char | string 
     * @returns String
     */
    utf8: function(str) {
      var utf8 = [];
      for (var i=0; i < str.length; i++) {
        var charcode = str.charCodeAt(i);

        if (charcode < 0x80) utf8.push(charcode);
        else if (charcode < 0x800) {
          utf8.push(0xc0 | (charcode >> 6), 
          0x80 | (charcode & 0x3f));
        }
        else if (charcode < 0xd800 || charcode >= 0xe000) {
          utf8.push(0xe0 | (charcode >> 12), 
          0x80 | ((charcode>>6) & 0x3f), 
          0x80 | (charcode & 0x3f));
        } else {
        // surrogate pair
          i++;
          // UTF-16 encodes 0x10000-0x10FFFF by
          // subtracting 0x10000 and splitting the
          // 20 bits of 0x0-0xFFFFF into two halves
          charcode = 0x10000 + (((charcode & 0x3ff)<<10) | (str.charCodeAt(i) & 0x3ff))
        
          utf8.push(0xf0 | (charcode >>18), 
          0x80 | ((charcode>>12) & 0x3f), 
          0x80 | ((charcode>>6) & 0x3f), 
          0x80 | (charcode & 0x3f));
        }
      }
      return utf8;
    },

    /**
     * supports dataset.link and dataset.target on e.target actions button 
     * @param {*} e 
     */
     targetedLinkOut: function (link, target) {
      var target = target || '_self';
      var href   = /^http(:|s:)/.test(link) 
        ? link : location.protocol + '//' + location.host + link;

      var redirect = usbUtils.createElement('a',{href: href, target: target || '_self'});
      document.body.appendChild(redirect);
      redirect.click();
    },



    createElement: function (tag,options) {
      var el = document.createElement(tag);
      for(var o in options) {
        var attr = typeof options[o] =='object' ? JSON.stringify(options[o]) : options[o];
        el.setAttribute(o,attr);
      }
      return el;
    },

    listenTo: function(node, evt, handler) {
        if (node && node.attachEvent)
            node.attachEvent('on' + evt, handler);
        else if (node)
            node.addEventListener(evt, handler, false);
    },

    detach : function (node, evt, handler) {
      if (node.detachEvent)
        node.detachEvent('on' + evt, handler);
      else
        node.removeEventListener(evt, handler, false);
    },

    isIOS:  function() { return navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/) != null;},
    isAndroid: function() { return  navigator.userAgent.toLowerCase().match(/(android)/) != null;},
    isWin: function() { return navigator.userAgent.toLowerCase().match(/(windows\sphone)/) != null;},  
    isIE: function() { return navigator.userAgent.indexOf("MSIE ") > -1 || navigator.userAgent.indexOf("Trident/") > -1;},  
    isSafari: function() { return  /^((?!chrome|android).)*safari/i.test(navigator.userAgent);},
    isMobile: function() { return this.isIOS() || this.isAndroid()},
  };
})();
"use strict";

$(document).ready(function () {
    let maxTerm = 84,
        minFlag = true,
        maxFlag = true;
    let minRateContainer = $(".personalRatesAPIData.minRates"),
        maxRateContainer = $(".personalRatesAPIData.maxRates");

    function minRateHandler(item) {
        let minRateAutoPay = $(item).attr("data-minRateAutoPayAdjustmentInd"),
            minRateEmployeeAdjustment = $(item).attr("data-minRateEmployeeAdjustmentInd"),
            minRateFico = $(item).attr("data-minRateFico").trim(),
            minRateLoanAmount = $(item).attr("data-minRateLoanAmount").trim(),
            minRateTermInMonths = $(item).attr("data-minRateTermInMonths").trim(),
            minRateZipcode = $(item).attr("data-minRateZipcode").trim(),
            minRateHomeImprovement = $(item).attr("data-minRateHomeImprovementAdjustmentInd"),
            minRateAutoAdjustment = $(item).attr("data-minRateAutoAdjustmentInd");
			 minAllianceIndicator = $(item).attr("data-minAllianceIndicator");

        if (!minRateFico || isNaN(minRateFico) || !minRateLoanAmount || isNaN(minRateLoanAmount) || !minRateTermInMonths || (minRateTermInMonths < 12 || minRateTermInMonths > maxTerm) || isNaN(minRateTermInMonths) || !minRateZipcode || minRateZipcode.length < 5 || minRateZipcode.length > 5 || isNaN(minRateZipcode)) {
            minFlag = false;
        }

        if (minFlag) {
            const minDataObject = {
                "checkboxSelected": minRateAutoPay,
                "employeeAdjustment": minRateEmployeeAdjustment,
                "creditScore": minRateFico,
                "depositAmount": minRateLoanAmount,
                "timePeriod": minRateTermInMonths,
                "zipcode": minRateZipcode,
                "homeImprovementAdjustment": minRateHomeImprovement,
                "autoAdjustment": minRateAutoAdjustment,
				 "allianceIndicator" : minAllianceIndicator
            }
            $.ajax({
                url: "/svt/usbank/calculateLoanPayment",
                type: "GET",
                async: "false",
                data: minDataObject,
                success: function (response) {
                    $(item).closest("section").find(".personalLoanRates-error").hide();
                    if ($(item).closest("section").find(".pl-min-rate").length > 0) {
                        $(item).closest("section").find(".pl-min-rate").text(response.apr + "%");
                    }
                    else {
                        $(item).closest("section").siblings('section').find(".pl-min-rate").text(response.apr + "%");
                    }
                },
                error: function () {
                    $(item).closest("section").find(".personalLoanRates-error").show();
                }
            });
        }
    }

    function maxRateHandler(item) {
        let maxRateAutoPay = $(item).attr("data-maxRateAutoPayAdjustmentInd"),
            maxRateEmployeeAdjustment = $(item).attr("data-maxRateEmployeeAdjustmentInd"),
            maxRateFico = $(item).attr("data-maxRateFico").trim(),
            maxRateLoanAmount = $(item).attr("data-maxRateLoanAmount").trim(),
            maxRateTermInMonths = $(item).attr("data-maxRateTermInMonths").trim(),
            maxRateZipcode = $(item).attr("data-maxRateZipcode").trim(),
            maxRateHomeImprovement = $(item).attr("data-maxRateHomeImprovementAdjustmentInd"),
            maxRateAutoAdjustment = $(item).attr("data-maxRateAutoAdjustmentInd");
			  maxAllianceIndicator = $(item).attr("data-maxAllianceIndicator");

        if (!maxRateFico || isNaN(maxRateFico) || !maxRateLoanAmount || isNaN(maxRateLoanAmount) || !maxRateTermInMonths || (maxRateTermInMonths < 12 || maxRateTermInMonths > maxTerm) || isNaN(maxRateTermInMonths) || !maxRateZipcode || maxRateZipcode.length < 5 || maxRateZipcode.length > 5 || isNaN(maxRateZipcode)) {
            maxFlag = false;
        }

        if (maxFlag) {
            const maxDataObject = {
                "checkboxSelected": maxRateAutoPay,
                "employeeAdjustment": maxRateEmployeeAdjustment,
                "creditScore": maxRateFico,
                "depositAmount": maxRateLoanAmount,
                "timePeriod": maxRateTermInMonths,
                "zipcode": maxRateZipcode,
                "homeImprovementAdjustment": maxRateHomeImprovement,
                "autoAdjustment": maxRateAutoAdjustment,
				  "allianceIndicator" : maxAllianceIndicator
            }

            $.ajax({
                url: "/svt/usbank/calculateLoanPayment",
                type: "GET",
                async: "false",
                data: maxDataObject,
                success: function (response) {
                    $(item).closest("section").find(".personalLoanRates-error").hide();
                    if ($(item).closest("section").find(".pl-max-rate").length > 0) {
                        $(item).closest("section").find(".pl-max-rate").text(response.apr + "%");
                    }
                    else {
                        $(item).closest("section").siblings('section').find(".pl-max-rate").text(response.apr + "%");
                    }
                },
                error: function (response) {
                    $(item).closest("section").find(".personalLoanRates-error").show();
                }
            });
        }
    }

    minRateContainer.each(function (index, item) {
        minRateHandler(item);
    })

    maxRateContainer.each(function (index, item) {
        maxRateHandler(item);
    })
});
!function(){var t={17:function(){var t=t||{};!function(){"use strict";t={link:function(t,e){t.preventDefault();const n=t.target.value,o=t.target.dataset.target?t.target.dataset.target:"_blank";null==n||""==n||setTimeout(function(){window.open(n,o)},500),e.close()},close:function(t,e){t.preventDefault(),e.close()},successHandler:function(t){console.log("modals success processor: ",t)},failHandler:function(t){console.log("modals failure processor: ",t)},submit:function(e,n){var o=n.dialog.querySelector("form");o&&"function"==typeof formProcess&&formProcess({form:o,modal:n,success:t.successHandler,error:t.failHandler})}}}()},162:function(){var t=t||{},e=e||{},n=n||{};!function(){"use strict";n={tolerance:25,trap:!1,trapFor:[]},t={touches:function(t){return t.touches||t.originalEvent.touches},coord:function(e){let n=t.touches(e)[0];return{x:n.clientX,y:n.clientY}}}}()},522:function(){$(document).ready(function(){function t(){/MSIE \d|Trident.*rv:/.test(navigator.userAgent)&&$(".scb-image").each(function(){var t=$(this).attr("src");$(this).attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),$(this).css("background-image","url("+t+")")})}$(window).on("resize",t),t(),document.querySelector(".styledContentBlock a.arrow-link")&&window?.usbUtils?.arrowLinkLastWordInIcon(".styledContentBlock a.arrow-link")})},648:function(){document.addEventListener("DOMContentLoaded",function(){var t,e=$("#langIndicatorToggleButton , #langIndicatorToggleButtonMobileNav"),n="languageIndicatorModal";e.each(function(){var t=$(this).attr("data-url");$(this).attr("href",t)});var o=$(e).attr("href"),a="solo en inglés",i=function(){return document.body.clientWidth>=700};let r=function(){let t={header:".langindicator-modal.background .heading",body:".langindicator-modal.background .body",footer:".langindicator-modal.background .modalfooter"},e=function(t){let e=$("div.modal");"hide"==t?e.css("opacity","-1"):"show"==t&&e.css("opacity","1")};var n={preventAutoScreenReading:function(){for(var e in t)$(t[e]).attr("aria-hidden","true");setTimeout(function(){for(var e in t)$(t[e]).removeAttr("aria-hidden"),console.log("removing "+e)},1e3)},isLocalSessionActive:function(){return null!=localStorage.getItem("activeSession")?localStorage.getItem("activeSession"):(localStorage.setItem("activeSession","true"),!1)},isSessionActive:function(){return null!=sessionStorage.getItem("activeSession")?sessionStorage.getItem("activeSession"):(sessionStorage.setItem("activeSession","true"),!1)},displayModalOnNewSession:function(t){e("hide"),Modal(t,{namespace:"shield-modals langindicator-modal",primaryAction:function(){modal.close(),e("show")}})},displayModal:function(t,e,o,a){window.location.hostname.endsWith("smallbusinessbigambition.com")&&("ES"===o&&window.location.pathname.toLowerCase().includes("/es")||"EN"===o&&window.location.pathname.toLowerCase().includes("/en")&&document.referrer.toLowerCase().includes("/es"))||("EN"===o?(Modal(t,{namespace:"shield-modals langindicator-modal",primaryAction:function(){window.location.href=e},secondaryAction:function(){modal.close()}}),n.preventAutoScreenReading()):"ES"==o&&0==a&&""==document.referrer&&-1==document.referrer.indexOf("usbank")&&(n.displayModalOnNewSession(t),$(".langindicator-modal button.close").hide()))},iconizeGlbalNavigator:function(){var t=$(".globalNavigation").find("a");$.each(t,function(t,e){if(e.hasAttribute("aria-label")&&("langIndicatorToggleButton"==e.id||"langIndicatorToggleButtonMobileNav"==e.id)){var n=e.getAttribute("aria-label").concat(" ");e.setAttribute("aria-label",n+a)}})},appendIconforTextElem:function(t,e){if($(t).find("."+e.replace(" ",".")).length<1&&0==$(t).find(".blueSolidButton").length){["span","p"].forEach(function(e){if($(t).find(e).length>0&&0==$(t).find(".sr-only").length&&t.hasAttribute("aria-label")){var n=t.getAttribute("aria-label").concat(" ");t.setAttribute("aria-label",n+a)}})}},appendIconOnPageLinks:function(t,e,n=void 0){if(void 0!==t&&$(t).find("."+e.replace(" ",".")).length<1){if(t.hasAttribute("aria-label")){var o=t.getAttribute("aria-label").concat(" ");t.setAttribute("aria-label",o+a)}if((t.classList.contains("nowrap")||t.classList.contains("after"))&&t.closest("a").hasAttribute("aria-label")){o=t.closest("a").getAttribute("aria-label").concat(" ");t.closest("a").setAttribute("aria-label",o+a)}}},iconizeButtons:function(){var t=$("button[onclick],a[role=button],a[role=link],.button-group a,a:not(sup a):not(.footerPrimary a):not(.socialMedia a):not(.homepage.logo):not(.featuredArticles-pagination a),.button-group button:not(button.button.zipInputButton");for(let e=0;e<t.length;e++)try{let n,o=!0,a=$(t[e]).find("picture").length>0;$(t[e]).find("img").length>0&&(a=!0),t[e].hasAttribute("href")?(n=t[e].getAttribute("href"),o=!n.startsWith("tel:")):t[e].hasAttribute("onclick")&&(n=t[e].getAttribute("onclick"),o=!0)}catch(t){let e=new Error;console.error(e.stack)}}};return{iconizeThePage:n.iconizeThePage,iconizeButtons:n.iconizeButtons,isSessionActive:n.isSessionActive,displayModal:n.displayModal,iconizeGlbalNavigator:n.iconizeGlbalNavigator,isLocalSessionActive:n.isLocalSessionActive}}();if("ES"==(t=$("#"+n).attr("data-currentlocale"))&&(r.iconizeGlbalNavigator(),setTimeout(function(){"ES"==t&&r.iconizeButtons()},3e3),1==i())){var s=r.isLocalSessionActive();r.displayModal(n,o,t,s)}e.click(function(t){t.preventDefault();var e=$("#"+n).attr("data-currentlocale");if("EN"===e&&i()&&0==r.isLocalSessionActive())try{r.displayModal(n,o,e,!0)}catch(t){console.log(t+"----\x3e Route directly to spanish in IE"),window.location.href=o}else"ES"===e||!i()||r.isLocalSessionActive(),window.location.href=o})})},662:function(){$(document).ready(function(){window.Modals.attach()})},881:function(){var t=[],e=[],n=[];window.fetchZafinEMMRates=function(o,a,i){var r,s,l={};s={zipcode:o,output:"json",productKeys:a,requestType:"DDA4A"==a?"NEW_GRID":"NEW"},i?(r=!0,s.rateTableType="consumerCheckingandSavings",s.isbusiness=!0):(r=!1,s.rateTableType="checkingAndSavings");var c=t.filter(t=>t.personlaizedRates==r&&t.zipcode==o&&t.productId==a);return c.length>0?Promise.resolve(c[0].rateDetails):e.includes(a)?new Promise(function(e,i){var s=function(){(c=t.filter(t=>t.personlaizedRates==r&&t.zipcode==o&&t.productId==a)).length>0&&c[0].productId==a&&c[0].zipcode==o&&c[0].personlaizedRates==r?e(c[0].rateDetails):n.includes(a)?i():setTimeout(s,10)};s()}):(e.push(a),new Promise(function(i,c){setTimeout(function(){$.ajax({url:"/svt/usbank/zafinRateApi",headers:l,data:s,type:"POST",success:function(s){e=e.filter(t=>t!==a),n=n.filter(t=>t!==a),t.push({productId:a,zipcode:o,personlaizedRates:r,rateDetails:s}),i(s)},error:function(){n.push(a),c()}}).done(function(){e=e.filter(t=>t!==a)})},100)}))}}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}!function(){"use strict";let t=672,e=1056;function o(t){return t.length&&t.length>0?Array.from?Array.from(t):Array.prototype.slice.call(t):[]}function a(t,e){return o(e&&1==e.nodeType?e.querySelectorAll(t):document.querySelectorAll(t))}function i(t,e){return r(a(t,e))}function r(t){return o(t).filter(function(t){return t&&null!==t&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)})}function s(){var n=document.body.offsetWidth;return n<t?"sm":n>t&&n<e?"md":"lg"}function l(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return null}function c(t,e){e=e||"_self";var n=function(t,e){var n=document.createElement(t);for(var o in e){var a="object"==typeof e[o]?JSON.stringify(e[o]):e[o];n.setAttribute(o,a)}return n}("a",{href:/^http(:|s:)/.test(t)?t:location.protocol+"//"+location.host+t,target:e||"_self"});document.body.appendChild(n),n.click()}function u(t,e,n){t&&t.attachEvent?t.attachEvent("on"+e,n):t&&t.addEventListener(e,n,!1)}const d=()=>null!=navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/),m=()=>null!=navigator.userAgent.toLowerCase().match(/(android)/),f=()=>d()||m(),p=()=>!f()&&!m();var g=g||{};function h(){g={mobile_nodes:function(){return M},keycodes:function(){return W},activeLevel:_t,clearVale:ft,clearButtons:Zt,isopen:X,level:lt,currentItem:Bt,first:It,last:$t,selectFirst:qt,selectLast:Nt,next:Dt,previous:Rt,backstep:Mt,nodes:Lt,snapshot:ct,resize:Wt,closeMobile:At,ismobileSize:K};var t=0,e=3,n=document.querySelector(".skiptocontent-box"),l=document.querySelector(".global-navigation"),c=l&&l.querySelector(".navigation"),d=l&&l.querySelector(".top-bar"),p=l&&l.querySelector("#navigation-menu-button"),h=l&&l.querySelector(".menu-vale"),y=l&&l.querySelector(".menu-vale-search"),b=l&&l.querySelector(".navigation-messages"),v=l&&l.querySelector(".menu-list"),A=l&&d.querySelector(".desktop .right .globalSmartAssistantBtn"),w=l&&d.querySelector(".desktop, .navigation .desktop"),E=a(".menu-vale, .menu-vale-search"),S=a(".menu-button"),k=a(".navigation"),x=a(".navigation .menu-list"),C=a(".navigation .menu-return"),_=a(".navigation button.menu-link"),L=a(".navigation a"),T=a(".navigation .mobile .menu-search-input"),B=a(".menu-item"),I=a(".menu-redirect"),$=(a(".global-navigation .login-toggle"),a(".global-navigation .login-dropdown"),o(a(".root.responsivegrid > .aem-Grid")[0].children)),q=i(".top-bar :is(a, button)"),N=l,D=h,R=p,M=a(".navigation :is(a, button, input), .top-bar :is(a, button:not(.menu-button)), .skipToContent, .fiqlink"),O=a(".top-bar :is(a, button), .fiqlink"),P=i(".navigation .menu-primary > li > :is(a, button)"),z=i(".menu-item.primary > .menu-link"),U=function(){var t={navs:[],body:[]};return $.map(function(e){var n=e.querySelector('nav[role="menubar"]');n&&"NAV"==n.nodeName?t.navs.push(e):t.body.push(e)}),t},F=document.querySelector(".global-navigation.primary .navigation >.menu-list"),j=document.querySelector(".global-navigation.secondary .navigation >.menu-list"),H=Object.freeze({LISTPAD:24,TOP_DESKTOP:40,TOP_MOBILE:56}),W=Object.freeze({TAB:9,BACKSPACE:8,DELETE:46,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,COMMAND:91,CONTROL:17,RIGHT:39,DOWN:40}),Z=Object.freeze({PRIMARY:1,SECONDARY:2,TERTIARY:3}),G=Z.PRIMARY;function K(){return/(md|sm)/.test(s())}function V(){return i(".global-navigation .menu-button, .global-navigation .menu-primary > li > :is(a, button), .global-navigation .menu-primary .input-field > :is(button, input)")}function X(){var t=a(".active >.menu-list",c);if(c)return c.classList.contains("open")||t.length>0}var Y,J,Q=K()&&r(V())[2]||r(P)[0];if(u(window,"keydown",at),u(window,"click",at),u(window,"load",Wt),u(window,"resize",Wt),L.length&&L.forEach(function(t){u(t,"click",Ut)}),T.length&&T.forEach(function(t){u(t,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),u(t,"keydown",function(t){var e=t.target.parentElement.querySelector(".search-autocomplete-list:empty");if(K()&&e)switch(t.keyCode){case W.DOWN:Ft(t);break;case W.UP:jt(t);break;case W.TAB:t.preventDefault(),t.stopImmediatePropagation(),t.shiftKey?jt(t):Ft(t)}}),"button"===t.previousElementSibling.nodeName.toLowerCase()&&u(t.previousElementSibling,"keydown",function(t){if(K()&&t.target.isSameNode(document.activeElement))switch(t.keyCode){case W.DOWN:Ft(t);break;case W.UP:p.focus();break;case W.TAB:t.preventDefault(),t.stopImmediatePropagation(),t.shiftKey?p.focus():Ft(t)}}),"button"===t.nextElementSibling.nodeName.toLowerCase()&&u(t.nextElementSibling,"keydown",function(e){if(K()&&e.target.isSameNode(document.activeElement))switch(e.keyCode){case W.DOWN:Ft(e);break;case W.UP:prev(e);break;case W.TAB:e.preventDefault(),e.stopImmediatePropagation(),e.shiftKey?t.focus():Ft(e)}})}),E.length&&E.forEach(function(t){u(t,"click",Gt)}),S.length)for(t in S)u(S[t],"click",yt),u(S[t],"keydown",bt);if(p&&u(p,"keydown",function(t){if(!t||!t.keyCode)return;var e=r(g.activeLevel().children);e=e?e.filter(function(t){return!/separator|vale/gi.test(t.className)}):[];var n=N.classList.contains("open");if(e&&n){var o=e[0],a=e[e.length-1];switch(t.keyCode){case W.ESC:K()&&(t.preventDefault(),t.stopImmediatePropagation(),At(),p.focus());break;case W.UP:a.querySelector("a, button, input").focus();break;case W.DOWN:o.querySelector("a, button, input").focus();break;case W.TAB:t.preventDefault(),t.shiftKey?a.querySelector("a, button, input").focus():o.querySelector("a, button, input").focus()}}}),_)for(t in _)tt(_[t]);if(C)for(t in C)u(C[t],"click",ht);function tt(t){u(t,"click",gt),I.forEach(function(t){u(t,"focus",dt)})}if(Y=location.pathname.split("/").slice(-3).join("_"),J=a(".navigation .menu-item a").filter(function(t){return t.href.split("/").slice(-3).join("_")==Y}),a(".navigation .menu-item").forEach(function(t){for(var e in J)t.contains(J[e])&&(t.classList.add("menu-current-path"),t.setAttribute("data-current-menu",!0))}),Wt(),U().body){var et=document.getElementById("bodyContent"),nt=document.querySelectorAll(".root .responsivegrid [data-compv='Global']"),ot=nt[0]&&nt[0].parentElement.parentElement;ot&&(et&&(et.removeAttribute("id"),ot&&ot.setAttribute("id","bodyContent")),ot&&ot.setAttribute("role","main"),ot&&ot.setAttribute("tabindex","-1"))}function at(t){var e=a(".input-field").filter(function(e){return e.contains(t.target)}),n=k.filter(function(e){return e.contains(t.target)}),o=n&&n.length>0&&0==e.length;if("click"!=t.type)if(t.keyCode==W.ESC&&(K()?(At(),p.focus()):vt()),o){var i=lt(),r=function(t){var e=t.target;return"BUTTON"==e.nodeName?e.classList.contains("menu-return")?ht:gt:Ut}(t),s=Lt(),l=Bt(),c=l&&l.parentElement.classList.contains("active"),u=l&&l==$t(),d=l&&l==s[0],m=l&&l.closest&&l.closest(".menu-item.primary.active")&&l.closest(".menu-item.primary.active").querySelector("button")||It(),f=document.querySelector(".menu-item.primary.active > button"),g=ct();switch(t.keyCode){case W.ESC:K()||(i.tertiary?(ht(t),G=2):(Gt(),Ht(f),G=1));break;case W.SPACE:r(t);break;case W.TAB:if(K())t.shiftKey?jt(t):Ft(t);else{if(i.primary)return;i.secondary&&(t.shiftKey?g.tertiary.hasList?(st(),Ht((s=Lt())[s.length-1])):d?(rt(t,m),ft()):jt(t):g.tertiary.hasList?(st(),Ht(Lt()[0])):u?it(t,m):Ft(t)),i.tertiary&&(t.shiftKey?d?g.secondary.isfirst?rt(t,m):function(t){ht(t),jt(Bt()),St()}(t):jt(t):u?g.secondary.islast?it(t,m):function(t){ht(t),Ft(Bt),St()}(t):Ft(t))}break;case W.RETURN:if(K()||!i.secondary)return;st(),Ht(Lt[0]);break;case W.RIGHT:K()?K()&&r(t):(i.secondary&&(c?(st(),Ht(Lt[0])):gt(t)),i.primary&&Ft(t));break;case W.DOWN:K()?Ft(t):i.primary?gt(t):Ft(t);break;case W.LEFT:i.primary?jt(t):(ht(t),!K()&&i.secondary&&ft());break;case W.UP:!K()&&i.primary?gt(t):jt(t);break;case W.HOME:qt();break;case W.END:Nt();break;default:var h=String.fromCharCode(t.keyCode),y=null;s=Lt();if(/[a-z]/i.test(h)){var b=s.map(function(t){return{[t.textContent.trim()]:t}}).filter(function(t){return y=Object.keys(t)[0],new RegExp("(^"+h+")","i").test(y)});b.length&&(y=Object.keys(b[0])[0],Ot(b[0][y]))}if(/[0-9]/.test(parseInt(h))){var v=parseInt(h);s[v-1]&&Ot(s[v-1])}}/(9|27|37|38|39|40|47)/.test(t.keyCode)&&(t.preventDefault(),t.stopImmediatePropagation())}else X()&&!K()&&Gt()}function it(t,e){var n=ct();ft(),G=1,Zt(),Ht(e),mt(),n.primary.islast&&n.secondary.islast&&n.tertiary.islast||Ft(Bt())}function rt(t,e){ft(),G=1,Zt(),Ht(e)}function st(){G=K()?lt().level:G+1<e+1&&G+1||lt().level}function lt(){var t=a(".menu-primary",l).concat(a(" .menu-item.active >.menu-list",l)),e=Bt().closest(".menu-list")||l.querySelector(".menu-primary"),n=e&&e.classList.contains("menu-primary"),o=e&&e.classList.contains("menu-secondary"),i=e&&e.classList.contains("menu-tertiary"),r=l.classList.contains("secondary-navigation")?"secondary":"primary";return{level:t.length,primary:n,secondary:o,tertiary:i,primarynav:"primary"==r,secondarynav:"secondary"==r}}function ct(){var t=i(".menu-item.primary >.menu-link"),e=i(".menu-item.primary.active .menu-list >.menu-item.secondary >.menu-link"),n=i(".menu-item.secondary.active .menu-list >.menu-item.tertiary >.menu-link"),o=document.querySelector(".menu-item.primary.active >.menu-link"),a=document.querySelector(".menu-item.primary.active .menu-list .menu-item.active >.menu-link"),r=n.indexOf(document.activeElement)>-1&&document.activeElement,s=t.indexOf(o),l=e.indexOf(a),c=n.indexOf(r);return{primary:{hasList:t&&t.length>0,isnode:"boolean"!=typeof o&&"object"==typeof o,current:o,isfirst:0==s,islast:s==t.length-1},secondary:{hasList:e&&e.length>0,isnode:"boolean"!=typeof a&&"object"==typeof a,current:a,isfirst:0==l,islast:l==e.length-1},tertiary:{hasList:c&&n.length>0,isnode:"boolean"!=typeof r&&"object"==typeof r,current:r,isfirst:0==c,islast:c==n.length-1}}}function ut(t){var e=document.querySelector("svg .line-1"),n=document.querySelector("svg .line-2"),o=document.querySelector("svg .line-3");t?(e.setAttribute("x",1),e.setAttribute("y",-1),o.setAttribute("x",-21),o.setAttribute("y",21),e.style.transform="rotate(45deg)",n.style.transform="translateY(-3rem)",o.style.transform="rotate(-45deg)"):(e.setAttribute("x",1),e.setAttribute("y",4),o.setAttribute("x",1),o.setAttribute("y",25),e.style.transform="rotate(0deg)",n.style.transform="translateY(0)",o.style.transform="rotate(0deg)")}function dt(t){if(K()){var e=t.target.dataset.position,n=Lt()[0];switch(e){case"logo":case"toggle":case"end":Ht(n);break;case"search":Ht(n=l.querySelector("input[type=text]")),v.scrollTo(0,0);break;case"start":Ht(n=l.querySelector(".menu-button")),v.scrollTo(0,0);break;default:if(/getstarted/gi.test(t.target.href))return;Ht(n)}setTimeout(function(){n&&Ht(n)},500)}}function mt(){var t=document.querySelector(".active >.menu-secondary");if(l){var e=l.querySelector(".active-search");if(K())y&&e&&y.classList.add("open");else if(X()&&t){var n=l.getBoundingClientRect().top,o=t.getBoundingClientRect().top;h.classList.add("open"),h.style.height=document.body.scrollHeight-o+"px",h.style.top=(o-n).toString().concat("px")}}else ft()}function ft(){for(var t in E){E[t].classList.remove("open")}}function pt(){if(!K()){var t=a(".navigation .active >.menu-list");t.forEach(function(t){t.style.height=null});var e=(i=t.map(function(t){return t.offsetHeight}))&&i.length?i.reduce(function(t,e){return Math.max(parseFloat(t),parseFloat(e))},0):null;if(t.length>1){var n=t[0].offsetHeight<t[1].offsetHeight?e+H.LISTPAD:e;for(var o in t)t[o].style.height=n.toString().concat("px")}}var i}function gt(t){t&&t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation());var e="BUTTON"==t.target.nodeName?t.target:t.target.closest("button");if(e&&!K()&&Et(e),"click"==t.type){var n=o(e.closest(".menu-item").classList).filter(function(t){return/(primary|secondary|tertiary)/.test(t)}).map(t=>["","primary","secondary","tertiary"].indexOf(t));G="string"!=typeof n&&n.length>0&&n[0]||1,Ht(e)}if(e){var a=Q.closest(".menu-item")?Q.closest(".menu-item"):Q;a.classList.contains("active")?(a.classList.remove("active"),e.ariaExpanded=!1,lt().primary&&ft()):Pt(e)}if((K()||lt().primary)&&(st(),e=Lt()[0]),Q=e,St(),K()||mt(),kt(),e)return Ht(e),e}function ht(t){t&&t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation());var e=t.target.closest(".menu-list").closest(".active"),n=c.querySelector(".menu-item.primary.active button");if(e){var o=e.querySelector("button");null!==o.ariaExpanded&&(o.ariaExpanded=!1),e.classList.remove("active")}G=K()?lt().level:G-- >0&&G--||lt().level,St(),Ht(o||n),kt()}function yt(t){N.classList.contains("open")?At():d.classList.contains("login-open")?setTimeout(function(){wt(t.target)},500):wt(t.target)}function bt(t){if(t&&t.keyCode){var e=r(document.querySelector(".primary-navigation .menu-primary").children);e=e?e.filter(function(t){return!/separator|vale/gi.test(t.className)}):[];var o=N.classList.contains("open");if(e)if(o){var a=e[0],i=e[e.length-1];switch(t.keyCode){case W.UP:t.preventDefault(),t.stopImmediatePropagation(),i.querySelector("a, button, input").focus();break;case W.DOWN:t.preventDefault(),t.stopImmediatePropagation(),a.querySelector("a, button, input").focus();break;case W.TAB:t.preventDefault(),t.stopImmediatePropagation(),t.shiftKey?i.querySelector("a, button, input").focus():a.querySelector("a, button, input").focus()}}else if(t.keyCode===W.TAB)t.preventDefault(),t.stopImmediatePropagation(),t.shiftKey?n.firstElementChild.focus():p.nextElementSibling.focus()}}function vt(t){/(button|checkbox|select|text|select-one|password)/.test(document.activeElement.type)||d&&A&&(A.classList.remove("smallSmartDesktopBar"),document.querySelectorAll(".searchIconSpan").forEach(t=>t.classList.remove("smallSmartDesktopIcon")),document.querySelectorAll(".sa-button").forEach(t=>t.classList.remove("smallSmartDesktopMargin")))}function At(){document.body.classList.remove("menu-lock"),G=1,N&&N.classList.remove("open"),c&&c.classList.remove("open"),h&&h.classList.remove("open"),R&&(R.ariaExpanded=!1),Ct(M),xt(S.concat(O)),x.forEach(function(t){t.removeAttribute("style")}),k.forEach(function(t){t.ariaHidden=!0}),l&&l.contains(p)&&ut(!1),Zt(),U().body.forEach(function(t){t.removeAttribute("aria-hidden")}),q.forEach(function(t){t.removeAttribute("tabindex")}),ft()}function wt(t){document.body.classList.add("menu-lock"),Et(R="BUTTON"!=t.nodeName?t.closest("button"):t),G=1,N.classList.add("open"),c.classList.add("open"),h.classList.add("open"),R.ariaExpanded=!0,U().body.forEach(function(t){t.contains(c)?t.removeAttribute("aria-hidden"):t.ariaHidden=!0}),function(){c.removeAttribute("aria-hidden"),w.contains(c);w.ariaHidden=!0,xt(Lt()),lt().primarynav?Ct(a(".secondary-navigation .fiqlink, .secondary-navigation .menu-button")):Ct(a(".global-navigation.primary .menu-button"));K()&&I.forEach(function(t){t.hidden=!!m()})}(),l.contains(p)&&ut(!0),kt(),mt(),R.focus()}function Et(t){N=t.closest(".component-top"),c=N.querySelector("nav.navigation")||c,h=N.querySelector(".menu-vale")||h,l=N}function St(){if(!K()){pt(),document.querySelectorAll(".menu-secondary").forEach(function(t){t.style.right=null});var t=document.querySelector(".active .menu-secondary"),e=a(".component-offset",l).filter(e=>e.contains(t))[0],n=function(t){var e=a(t).map(function(t){if(t.getBoundingClientRect)return t.getBoundingClientRect(t)}),n=e.length;if(e&&e.length){for(var o=e.shift(),i={left:o.x,top:o.y,height:o.height,width:o.width,length:n},r=0;r<e.length;r++)i.height+=e[r].height,i.width+=e[r].width;return Object.assign(i,{averages:{width:i.width/n,height:i.height/n}})}return{left:0,top:0,height:0,width:0,length:0,averages:{width:0,height:0}}}(".active >.menu-list"),o=e?e.getBoundingClientRect().left+e.offsetWidth:document.body.offsetWidth,i=n.left+n.width,r=a(".active >.menu-tertiary").map(function(t){return t.offsetWidth}).reduce(function(t,e){return t+e},0);i>o&&(t.style.right=r.toString().concat("px"))}}function kt(){var t=document.querySelector(".cmp-experiencefragment--header").parentElement.previousElementSibling,e=!1;t&&(e=t.classList.contains("responsivegrid")),e?N.scrollIntoView():window.scrollTo({top:0,behavior:"smooth"});var n=_t(),o=lt().primarynav?F:j;if(K()){n.removeAttribute("style");var i=window.innerHeight-d.getBoundingClientRect().bottom,r=140+window.pageYOffset,s=(i+r).toString().concat("px"),c=n.offsetHeight.toString().concat("px"),u=n.offsetHeight<=i-r?0:r.toString().concat("px");for(var m in Ct(M),x){var f=x[m];f.removeAttribute("style"),f.contains(n)?(f.removeAttribute("aria-hidden"),f.hidden=!1,f.style.height=s):(f.ariaHidden=!0,f.hidden=!0),f.classList.remove("scrolling"),f.scrollTo(0,0)}lt().primary?(o.style=null,n.style.paddingBottom=r.toString().concat("px"),o.style.height=s):(o.style.height=s,n.style.paddingBottom=u,n.style.height=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?s:c),n.classList.add("scrolling");var p=a(".menu-redirect,.menu-button",l);xt(Lt().concat(p)),Ht(Q)}else x.forEach(function(t){t.hidden=!1,t.removeAttribute("tabindex")})}function xt(e){for(t in e){var n=e[t];r(O).includes(n)&&n.removeAttribute("tabindex"),n.removeAttribute("aria-hidden"),n.disabled=!1}}function Ct(e){for(t in e){var n=e[t];n.ariaHidden=!0,n.disabled=!0,n.tabIndex="-1"}}function _t(){var t=a(".menu-primary",l).concat(a(" .menu-item.active >.menu-list",l));if(t.length>0)switch(G){case Z.PRIMARY:return t[0];case Z.SECONDARY:return t[1];case Z.TERTIARY:return t[2]}return lt().secondarynav?j:F}function Lt(){var t=(v=_t())&&v.children&&o(v.children).map(function(t){return t.querySelector("form")?o(t.querySelectorAll("a, button, input")):t.querySelector("a, button, input")}).filter(function(t){return null!=t})||[];if(t=t.flat?t.flat():function t(e,n=1){return n>0?e.reduce((e,o)=>e.concat(Array.isArray(o)?t(o,n-1):o),[]):e.slice()}(t),1==G){if(!K())return r(z);if(lt().primarynav)return V()}return r(t)}function Tt(t){var e=new MouseEvent("click",{view:window,bubbles:!0,cancellable:!0});return Object.defineProperty(e,"target",{value:t,enumberable:!0}),e}function Bt(){return K()&&c&&c.querySelector('[tabindex="0"]')||document.activeElement}function It(){return lt().primary&&!K()&&Lt()[1]||Lt()[0]}function $t(){var t=Lt();return t[t.length-1]}function qt(){return gt(Tt(It())),Bt()}function Nt(){return gt(Tt($t())),Bt()}function Dt(){return gt(Tt(Ft(Bt())))}function Rt(){return gt(Tt(jt(Bt())))}function Mt(){return ht(Tt(Bt()))}function Ot(t){return gt(Tt(t))}function Pt(t){if(t){var e=t.closest(".menu-item.primary"),n=t.closest(".menu-item"),o=t.parentElement.querySelector(".menu-item.secondary button.menu-link"),a=n.classList.contains("active"),i=t;b=l.querySelector(".navigation-messages"),K()&&(b.textContent=t.textContent.trim().replace(/[^a-z][\s]{2}/gi,"")+" expanded",setTimeout(function(){b.textContent=""},1500)),Zt(),zt(i),n&&(n.classList.add("active"),zt(n)),e&&(e.classList.add("active"),zt(e)),K()||a||!o||(o.parentElement.classList.add("active"),zt(o)),pt()}}function zt(t){var e="BUTTON"==t.nodeName?t:t.querySelector("button.menu-link");e&&null!==e.ariaExpanded&&(e.ariaExpanded=!0)}function Ut(t){t.preventDefault(),this.classList.contains("modal_linked")||t.stopImmediatePropagation();var e=t.target.href?t.target:t.target.closest("a");if(e)if(e.href.includes("#")&&window.location.href.includes(e.href.split("#")[0])&&window.innerWidth<1024){var n=document.getElementById(e.href.split("#")[1]);Gt(),n&&n.scrollIntoView()}else document.location=e.href,Gt()}function Ft(t){var e=t.target||Bt(),n=Lt();K()&&lt().primary&&n.unshift(p);var o=n.indexOf(e),a=e;return a=o===n.length-1?n[0]:n[o+1],!K()&&lt().secondary&&Pt(a||e),Ht(a||e),a||e}function jt(t){var e=t.target||Bt(),n=Lt();K()&&lt().primary&&n.unshift(p);var o=n.indexOf(e),a=e;return 0===o?a=$t():o>-1&&o<=n.length-1&&(a=n[o-1]),!K()&&lt().secondary&&Pt(a||e),Ht(a||e),a||e}function Ht(t){t=t||Lt()[0],K()&&(r(M).forEach(function(t){t.tabIndex=-1,!t.classList.contains("logo")&&!t.classList.contains("loginButton")||X()||t.removeAttribute("tabindex")}),t.removeAttribute("tabindex")),Q=t,t.focus()}function Wt(){K()?(X()?(xt(Lt()),k.forEach(function(t){t.removeAttribute("aria-hidden")})):(Ct(M),xt(S.concat(O)),k.forEach(function(t){t.ariaHidden=!0})),q.forEach(function(t){t.removeAttribute("tabindex")})):(At(),w&&w.removeAttribute("aria-hidden"),xt(M),k.forEach(function(t){t.removeAttribute("aria-hidden")}),x.forEach(function(t){t.removeAttribute("aria-hidden")}),M.forEach(function(t){t.removeAttribute("aria-hidden"),t.hidden=!1,t.removeAttribute("tabindex")}),U().body.forEach(function(t){t.removeAttribute("aria-hidden")}),I.forEach(function(t){t.hidden=!0}),x.forEach(function(t){t.removeAttribute("style")})),vt()}function Zt(){for(var t in B)B[t].classList.remove("active");_.forEach(function(t){null!==t.ariaExpanded&&(t.ariaExpanded=!1)})}function Gt(){Zt(),mt(),ft(),d.classList.remove("login-open"),A&&(A.classList.remove("smallSmartDesktopBar"),document.querySelectorAll(".searchIconSpan").forEach(t=>t.classList.remove("smallSmartDesktopIcon")),document.querySelectorAll(".sa-button").forEach(t=>t.classList.remove("smallSmartDesktopMargin"))),D.style.zIndex=null,K()&&X()&&At(),document.querySelector(".global-navigation .login-toggle")&&(document.querySelector(".global-navigation .login-toggle").ariaExpanded=!1)}let Kt=document.getElementById("onlinebankingURL");if(Kt&&f()){let Vt=Kt.getAttribute("data-tuxLogin");function Xt(){null!==Vt&&Kt.setAttribute("href",Vt)}Xt()}}h(),window.adobe&&window.adobe.target&&document.addEventListener(adobe.target.event.CONTENT_RENDERING_SUCCEEDED,function(){document.querySelector(".container .global-navigation")&&h()});var y=g;const b=()=>M(q,I,N,"web",I);let v,A,w=document.querySelector(".globalNavigation .top-bar"),E=document.querySelector(".globalNavigation .top-bar .desktop .right .globalSmartAssistantBtn"),S=document.querySelector(".globalNavigation .menu-vale"),k=document.getElementById("smart-assistant"),x=k&&k.getAttribute("data-saRwcUrl")?k.getAttribute("data-saRwcUrl"):"",C=(k&&k.getAttribute("data-saButtonText")&&k.getAttribute("data-saButtonText"),k&&k.getAttribute("data-saButtonHelpText")?k.getAttribute("data-saButtonHelpText"):""),_=(k&&k.getAttribute("data-saButtonApplyText")&&k.getAttribute("data-saButtonApplyText"),k&&k.getAttribute("data-saButtonRatesText")&&k.getAttribute("data-saButtonRatesText"),document.getElementById("topbar-vale")&&document.getElementById("topbar-vale").getAttribute("data-smartAssistantStatus")?document.getElementById("topbar-vale").getAttribute("data-smartAssistantStatus"):""),L=!(!document.getElementById("topbar-vale")||!document.getElementById("topbar-vale").getAttribute("data-usbSite"))&&document.getElementById("topbar-vale").getAttribute("data-usbSite"),T=document.getElementById("topbar-vale")&&document.getElementById("topbar-vale").getAttribute("data-smartAssistantRwcStatus")?document.getElementById("topbar-vale").getAttribute("data-smartAssistantRwcStatus"):"false";document.getElementById("topbar-vale")&&document.getElementById("topbar-vale").getAttribute("data-saRwcMicroAppStatus")&&document.getElementById("topbar-vale").getAttribute("data-saRwcMicroAppStatus");var B;void 0!==sessionStorage.SAInteractionID||!0!==L&&"true"!==L||D("SAInteractionID",(B=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(B+16*Math.random())%16|0;return B=Math.floor(B/16),("x"==t?e:3&e|8).toString(16)})));const I=sessionStorage.SAInteractionID,q="SAAccessToken",N="SmartAssistant";function D(t,e){void 0!==e&&sessionStorage.setItem(t,e)}function R(t){let e="";const n=function(t){let e="";const n=sessionStorage.getItem(t);return void 0!==n&&(e=n),e}(t);if(null!=n&&""!==n){const{token:t,timestamp:o}=JSON.parse(n),a=new Date(o).getTime();(new Date).getTime()-a<6e5&&(e=t)}return e}function M(t,e,n,o,a){let i=R(t);if(null===i||""===i){const r="/svt/ecm/smartassistant",s=function(t,e,n,o){const a={channelId:e,featureId:t,userId:n,sessionToken:o};return JSON.stringify(a)}(n,o,e,a);$.ajax({type:"POST",url:r,cors:!1,crossDomain:!0,beforeSend:function(t){t.setRequestHeader("Content-Type","application/json")},async:!1,dataType:"json",data:s,success:function(e){if(null!=e){let n=e.access_token;return function(t,e){if(void 0!==e){const n={token:e,timestamp:(new Date).toUTCString()};D(t,JSON.stringify(n))}}(t,n),i=n,i}},error:function(){console.log("Error calling Token Generator")}})}return i}if("true"===_){v=document.getElementById("smartAssistantLarge"),A=document.getElementById("smartAssistantSmall");var O=[{id:"search",ltpValue:C,trailingIcon:!1,trailingIconId:"search",icon:'<span class="magnifierIcon" style="width:100%; height:100%; background-color:#0a41c5; border-radius:1.5rem; display:flex;\n                                   justify-content:center; align-items:center;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 14 14" fill="#0a41c5">\n                                                               <path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 12.6573C13.5 13.1327 13.151 13.5 12.6639 13.5C12.4312 13.5 12.2131 13.4208 12.0459 13.2623L8.86857 10.1078C8.00336 10.7055 6.95638 11.0584 5.82942 11.0584C2.89206 11.0584 0.5 8.68172 0.5 5.77922C0.5 2.87673 2.89206 0.5 5.82942 0.5C8.75951 0.5 11.1588 2.87673 11.1588 5.77922C11.1588 6.95319 10.7662 8.04072 10.1046 8.91939L13.2601 12.0524C13.4273 12.218 13.5 12.4341 13.5 12.6573ZM1.73633 5.77909C1.73633 7.99737 3.58308 9.82674 5.82973 9.82674C8.0691 9.82674 9.91586 7.99737 9.91586 5.77909C9.91586 3.56081 8.0691 1.73145 5.82973 1.73145C3.58308 1.73145 1.73633 3.56081 1.73633 5.77909Z" fill="white"/>\n                                                           </svg></span>'},{id:"question",ltpValue:C,trailingIcon:!1,trailingIconId:"question",icon:'<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n                               <g id="Frame 156" clip-path="url(#clip0_5659_566)">\n                               <circle id="Ellipse 11" cx="16" cy="16" r="16" fill="#DE162B"/>\n                               <path id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M8 10C8 9.44771 8.44772 9 9 9H23C23.5523 9 24 9.44772 24 10V25.0016L19.5339 20.699H9C8.44772 20.699 8 20.2512 8 19.699V10ZM13.6881 13.6428L13.686 13.7449H15.2098L15.2111 13.6461C15.2154 13.3039 15.2956 13.035 15.4345 12.8542C15.5707 12.6769 15.7699 12.5749 16.0381 12.5749C16.267 12.5749 16.4286 12.639 16.5337 12.7496C16.6397 12.8611 16.7031 13.0352 16.7031 13.2849C16.7031 13.481 16.6551 13.6172 16.5619 13.7428C16.4647 13.8738 16.3163 13.9963 16.1036 14.1593C15.8212 14.3723 15.6094 14.5989 15.469 14.8689C15.3284 15.1393 15.2631 15.4461 15.2631 15.8139V16.1749H16.6781V15.8139C16.6781 15.5015 16.899 15.2124 17.1953 14.9944L17.4919 14.7788L17.4924 14.7784C17.6654 14.6509 17.8736 14.4868 18.0369 14.2334C18.2012 13.9785 18.3161 13.6398 18.3161 13.1679C18.3161 12.7828 18.1625 12.3201 17.7901 11.9536C17.4161 11.5856 16.8291 11.3219 15.9751 11.3219C15.3074 11.3219 14.7408 11.5559 14.3377 11.9673C13.9349 12.3783 13.7021 12.9596 13.6881 13.6428ZM16.7501 16.5149H15.1371V18.1009H16.7501V16.5149Z" fill="white"/>\n                               </g>\n                               <defs>\n                               <clipPath id="clip0_5659_566">\n                               <rect width="32" height="32" fill="white"/>\n                               </clipPath>\n                               </defs>\n                               </svg>\n                               '}],P=0,z=0,U=!1;function it(){const t=document.getElementById("smartAssistantLarge"),e=document.getElementById("smartAssistantSmall");function n(t,e){const n=document.createElement("span");n.setAttribute("aria-hidden","true"),n.classList.add(e);const o=document.createElement("span");o.classList.add("iconDivSpanClass"),o.setAttribute("aria-hidden","true");const a=document.createElement("span");a.classList.add("searchIconSpan"),a.innerHTML=t.icon;const i=document.createElement("span");return i.classList.add("searchFieldSpan"),i.setAttribute("aria-hidden","true"),i.innerText=t.ltpValue,n.appendChild(o),o.appendChild(a),o.appendChild(i),n}Array.from(O).forEach((o,a)=>{const i=n(o,"sa-button"),r=n(o,"sa-buttonMob");t&&t.appendChild(i),e&&e.appendChild(r),0!==a&&(i.style.display="none",r.style.display="none")}),function t(){var e=document.getElementsByClassName("sa-button"),n=document.getElementsByClassName("sa-buttonMob"),o=U?11500:4500;U&&e.length>0&&n.length>0?(e[P].classList.add("animate"),n[z].classList.add("animate")):e.length>0&&n.length>0&&(e[P].classList.remove("animate"),n[z].classList.remove("animate")),0!==P||0!==z||U||(U=!0);for(let t=0;t<e.length;t++)e[t].style.display=t===P?"block":"none";for(let t=0;t<n.length;t++)n[t].style.display=t===z?"block":"none";P=(P+1)%e.length,z=(z+1)%n.length,setTimeout(t,o)}()}if(it(),v&&v.addEventListener("click",rt),A&&A.addEventListener("click",rt),"true"===T){let st=window.innerWidth<=1055,lt=!1;function ct(){if(lt)return;const t=document.createElement("script");t.src=x,t.async=!0,document.body.appendChild(t),lt=!0,window.getTokenSA=b}window.addEventListener("SA_MODAL_TOGGLE",t=>{1==t.detail.isOpened?$(".global-navigation .navigation").css("inline-size","100%"):$(".global-navigation .navigation").css("inline-size","80%")}),st||ct(),window.addEventListener("resize",()=>{const t=window.innerWidth<=1055;t!==st&&(st=t,ct())}),document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".icon-hamburger");t&&st?t.addEventListener("click",function(){ct()}):!t&&st&&console.warn("Hamburger element not found on mobile")})}function rt(){const t=new CustomEvent("OPEN_SMART_ASSISTANT",{detail:{initiator:"COM",returnFocusElementId:"navigation-menu-button"}});y.ismobileSize()&&y.closeMobile(),window.dispatchEvent(t),w&&(w.classList.remove("login-open"),E.classList.remove("smallSmartDesktopBar"),Array.from(document.querySelectorAll(".searchIconSpan")).forEach(t=>t.classList.remove("smallSmartDesktopIcon")),Array.from(document.querySelectorAll(".sa-button")).forEach(t=>t.classList.remove("smallSmartDesktopMargin"))),S&&(S.style.opacity=0,S.style.zIndex=null)}}window.generateToken=M;var F=n(881);$(function(){if($(".banner-cards.three-cards .horizontal .frame .image-container").removeClass("ratio-3x2-lg "),$(".clickableCard .arrow-link").attr("tabindex","-1"),$(".clickableCard .content >:first-child").attr("role","link"),$(".clickableCard").on("click",function(){return window.open($(this).find(".arrow-link").attr("href"),$(this).find(".arrow-link").attr("target")),!1}),$(".clickableCard").keyup(function(t){switch(t.keyCode){case 27:case 9:return;case 32:case 13:return window.open($(this).find(".arrow-link").attr("href"),$(this).find(".arrow-link").attr("target")),!1}}),$(".l2BannerEmmRates .emmZafin_Apy").length>0||$(".l2BannerEmmRates .emmZafin_Apr").length>0){function o(){var t="DDA86",e=l("zipcode");e&&null!=e&&!isNaN(parseInt(e))&&5==e.length&&a(e,t),document.addEventListener("inpagezipfound",function(n){(e=n.detail)&&a(e,t)})}function a(t,e){var n=l("apply_jwt");$(".banner-error-container").css("display","none"),(0,F.fetchZafinEMMRates)(t,e,n).then(function(t){t.rateGrids?$.each(t.rateGrids,function(t,e){var n=new RegExp(/^(DDA86)/gi);e.rates&&n.test(e.productKey)&&$.each(e.rates,function(t,e){$(".l2BannerEmmRates").each(function(){var t=e.apr?Number.parseFloat(e.apr).toFixed(2):null,n=e.apy?Number.parseFloat(e.apy).toFixed(2):null,o=e.tierDescription?e.tierDescription:null,a=$(this).find(".banner-tier-value").val();if(t&&n&&o&&a&&o==a){var i=$(this).find(".emmZafin_Apy"),r=$(this).find(".emmZafin_Apr");i.each(function(){0==$(this).parents(".zafinEmmRates").length&&$(this).text($(this).text().replace("X.XX",n))}),r.each(function(){0==$(this).parents(".zafinEmmRates").length&&$(this).text($(this).text().replace("X.XX",t))})}})})}):$(".banner-error-container").css("display","block")}).catch(function(){$(".banner-error-container").css("display","block")})}function i(){return{validateForm:function(){var t=usbUtils.getCookieItem("zipcode")||"55402",e=t&&t.maxLength||5;return!(!t||!t.at(e-1))&&("00000"!==t&&5==t.length&&!isNaN(t)&&(n.getJSONResponse(t,function(){o()}),!0))}}}function r(){var n=new URLSearchParams(window.location.search).get("zipcode");if(n){t.setCookie("zipcode",n);let e=new URLSearchParams(window.location.search);if(e.delete("zipcode"),history.replaceState){let t=e.toString().length>0?"?"+e.toString():"",n=window.location.protocol+"//"+window.location.host+window.location.pathname+t+window.location.hash;history.replaceState(null,"",n)}o()}else e.validateForm()}var t={setCookie:function(t,e,n,o){if(e=e||"",n="number"==typeof n?n:100,"string"==typeof t&&""!==e)if(window.navigator.cookieEnabled){var a=new Date;a.setTime(a.getTime()+864e5*n);var i=t+"="+e+";expires="+a.toUTCString()+";"+("number"==typeof o?"max-age="+o+";":"")+"path=/";sessionStorage.removeItem(t),document.cookie=i}else sessionStorage.setItem(t,e)}},e=i(),n={getJSONResponse:function(t,e){5===t.length&&$.ajax({type:"GET",url:"/svt/usbank/zipcodemapping.ZipCode-__zip__.json".replace("__zip__",t),dataType:"json",success:function(t){n.validateJSON(t),"function"==typeof e&&e()},error:function(){console.log("Api error")}})},validateJSON:function(e){if(e.ZipCodeMappingVO&&(t.setCookie("zipcode",e.ZipCodeMappingVO.zipCode),usbUtils.getCookieItem("zipcode")),e.Error&&/EA00(6|7)/gi.test(e.Error.code.trim()))return t.setCookie("zipcode","",0),t.setCookie("state_code","",0),!1}};r()}});n(648),n(522);jQuery(document).ready(function(){$("span.USB__Text--shield-arrow-Link > a").each(function(t){$(this).addClass("textDecorationNone"),$("<img src='/content/dam/usbank/images/svg1/shield-right-arrow.svg' height='8px' width='4px' alt='' />").appendTo(this)}),$("a > span.USB__Text--shield-arrow-Link").each(function(t){$(this).parent("a").addClass("textDecorationNone"),$("<img src='/content/dam/usbank/images/svg1/shield-right-arrow.svg' height='8px' width='4px' alt='' />").appendTo(this)}),$("span.USB__Text--shield-basic-Link > a").each(function(t){$(this).addClass("textDecorationLine")}),$("a > span.USB__Text--shield-basic-Link").each(function(t){$(this).parent("a").addClass("textDecorationLine")}),$("span.USB__Text--shield-Inline-Link > a").each(function(t){$(this).addClass("textDecorationLine")}),$("a > span.USB__Text--shield-Inline-Link").each(function(t){$(this).parent("a").addClass("textDecorationLine")}),$("span.USB__Text--shield-subtle-Link > a").each(function(t){$(this).addClass("textDecorationLine")}),$("a > span.USB__Text--shield-subtle-Link").each(function(t){$(this).parent("a").addClass("textDecorationLine")}),$("a>span.USB__Text--Shield-Btn").each(function(t){var e=$(this),n=e.attr("class"),o=e.parent(),a=o.attr("href"),i=o.attr("aria-label");i||(i=o.attr("title")),i&&(i=" aria-label = '"+i+"' "),o.replaceWith(function(){return $("<button onclick=location.href='"+a+"'; class='"+n+"'"+i+"><span class='pAlternative'>"+$(this).text()+"</span></button>")})}),$("span.USB__Text--Shield-Btn>a").each(function(t){var e=$(this),n=e.parent(),o=n.attr("class"),a=e.attr("href"),i=e.attr("aria-label");i||(i=e.attr("title")),i&&(i=" aria-label = '"+i+"' "),n.replaceWith(function(){return $("<button onclick=location.href='"+a+"'; class='"+o+"'"+i+"><span class='pAlternative'>"+$(this).text()+"</span></button>")})}),$(".shield-text .inline-image").each(function(t){let e=$(this).text().trim(),n=$("<span/>"),o=$(this).find("img");$(this).hasClass("decorative")&&o.attr("aria-hidden","true"),$(this).empty(),n.addClass("caption").text(e),$(this).append(o).append(n)}),function(t){var e=o(document.querySelectorAll(t));for(var n in e){var a=e[n],i=a.querySelector(".icon"),r=a.getAttribute("aria-label"),s=a.textContent.split(" ").filter(function(t,e){return t.replace(/[^ -ÿ]/gi,"").length>0});if(i&&s.length){"a"===a.tagName.toLowerCase()?a.ariaLabel=r||s.join(" "):a.closest("a").ariaLabel=r||s.join(" ");var l=s.pop(),c=document.createElement("span");c.setAttribute("aria-hidden","true"),c.innerHTML=s.join(" "),a.insertBefore(c,a.firstChild),i.textContent=l,i.setAttribute("aria-hidden","true"),i.classList.add("nowrap")}}}(".text .arrow-link")});n(17);const j={CPRAFlag:!1,emailFlag:!0,email:null,isCpraEmailModal:function(){return document.getElementsByClassName("cpraModal").length>0},getCookie:function(t){return(new RegExp((t||"=")+"=(.*?); ","gm").exec(document.cookie+"; ")||["",null])[1]||""},removeAlertMessages:function(){document.getElementsByClassName("apiError")[0].style.display="none",document.getElementsByClassName("modalError")[0].style.display="none",document.getElementById("#cpra_modal_container").querySelector(".modalSuccess").style.display="none"},showAlerMessages:function(t,e,n){document.getElementById("#cpra_modal_container").querySelector(".modalSuccess").style.display=t.toString(),document.getElementsByClassName("modalError")[0].style.display=e.toString(),document.getElementsByClassName("apiError")[0].style.display=n.toString()},getUpdatedEmail:function(){return j.email=document.getElementById("cpraEmail").value,j.email},validateEmail:function(t){return!(!/^(?=[A-Z0-9][A-Z0-9@._%+-]{5,253}$)[A-Z0-9._%+-]{1,64}@(?:(?=[A-Z0-9-]{1,63}\.)[A-Z0-9]+(?:-[A-Z0-9]+)*\.){1,8}[A-Z]{2,63}$/i.test(t)&&""!==t)},isCpraWithoutEmailModal:function(){"cpraWithoutEmail"===$(".shield-modals .cpraWithoutEmailSuccessMessage").attr("data-cpraOptoutType")&&($(".shield-modals .body").addClass("modal-body-hide"),$(".shield-modals .cpraWithoutEmailSuccessMessage").show(),$(".shield-modals .primary").prop("disabled",!0))},CPRAModalOpen:function(){let t=document.getElementById("cpraEmail");j.getUpdatedEmail(),u(t,"focus",function(){j.removeAlertMessages(),$(".cpraEmailFiledWrap").addClass("focused")}),u(t,"blur",function(t){j.validateEmail(t.target.value)?($(".cpraEmailFiledWrap").removeClass("focused"),$(".cpraEmailFiledWrap").removeClass("error"),$(".cpraEmailFiledWrap").addClass("active"),$(".cpra_email_inline_error").addClass("hide")):($(".cpraEmailFiledWrap").addClass("focused"),$(".cpraEmailFiledWrap").addClass("error"),$(".cpra_email_inline_error").removeClass("hide"),$(".errorHeading").focus())}),(j.CPRAFlag||""!=j.getCookie("privacy_optout"))&&j.showAlerMessages("flex","none","none");let e=document.getElementById("gpc-status"),n=e.getAttribute("data-detected"),o=e.getAttribute("data-not-detected"),a=void 0!==navigator.globalPrivacyControl&&!0===navigator.globalPrivacyControl?n:o;if(e.textContent=a,e.style.display="block",e.style.color="#cf2a36",!0===navigator.globalPrivacyControl){const t=document.querySelector('button.button.primary[data-cpraoptout="true"]');t&&t.click()}},CPRAUSubmitEvent:function(t){if(t())return j.submitpostRequest(),!1},submitpostRequest:function(){let t=j.getUpdatedEmail(),e=document.domain.split("."),n="privacy_optout=1; path=/; domain ="+("."+e[e.length-2]+"."+e[e.length-1]).replace(".undefined","")+"; expires=Thu, 31 Dec 2099 12:00:00 UTC; ",o={url:"/svt/ecm/cpraOneTrustServlet",method:"POST",data:{identifier:t}};if(""==t)return document.cookie=n,j.showAlerMessages("block","none","none"),j.CPRAFlag=!0;j.validateEmail(t)?$.ajax(o).done(function(){document.cookie=n,j.showAlerMessages("block","none","none")}).fail(function(){j.CPRAFlag=!1,j.showAlerMessages("none","none","block")}):(j.emailFlag=!1,j.showAlerMessages("none","block","none")),j.CPRAFlag=!0}};var H=j,W=W||{modal:{}},Z=Z||{},G=G||{},K=K||{},V=V||null,X=[];W.modal=W.modal||{},window.modal_options=G,G={first_element:0,button_handlers:!0,build_on_start:!0,open_on_start:!0,namespace:"shield-modals",entry_point:null,entry_id:null,tid:null,closeAction:null,tertiaryAction:function(){console.log("Tertiary Action not assigned...")},primaryAction:function(){console.log("Primary Action not assigned...")},secondaryAction:function(){console.log("Secondary Action not assigned...")}},K={heading:"not_set",body:"not set",firstButton:"not set",secondButton:null,thirdButton:null,closeMessage:"Close modal dialog"},window.Modals={trap:function(t){0==(/(TEXTAREA|INPUT)/.test(t.target.tagName)||/(27|13|38|40|37|39|32)/.test(t.keyCode))&&(t.preventDefault(),t.stopImmediatePropagation())},fetchArray:function(t){return t&&t.length?Array.from?Array.from(t):Array.prototype.slice.call(t):[]},isFocusable:function(t){const e=t.nodeName&&/\b(button|a|input|textarea|select)\b/.test(t.nodeName.toLowerCase()),n=t.getAttribute&&parseInt(t.getAttribute("tabindex")),o=n&&n>1||!1;return!(t.style&&t.style.display&&"none"==t.style.display||t.disabled&&1==t.disabled)&&(e||!e&&o)},sequence:function(t,e){const n=t.list;if(!n)return!1;let o={},a=[];for(let t in n){let e=n[t];if(e.dataset&&e.dataset.queue_seq&&!e.disabled){let t=parseInt(e.dataset.queue_seq);o[t]=e}else o[parseInt(t)+1]=e}return Object.keys(o).forEach(t=>a.push(o[t])),t.list=a,"function"==typeof e&&e(),a},jump_start:function(t){W.modal=Z(t)},attach:function(){const t=G.namespace?G.namespace:window.modal_options.namespace||"shield-modals";$("."+t+':not(".wait,.modal_linked")').each(function(){const t=$(this).attr("id"),e=$('a[href="'+t+'"], button[data-click="'+t+'"],button[onclick="javascript:window.open(\''+t+"', '_self');\"]");for(let t=0;t<e.length;t++){const n=e[t];$(n).hasClass("modal_linked")||1!=n.nodeType||($(n).addClass("modal_linked"),window.Modals.trapAttachEvents(n),$(n).on("click mousedown",function(t){if(!this.href&&"button"!==this.type)return!1;/(click|mousedown)/.test(t.type)&&(t.preventDefault(),t.stopImmediatePropagation()),G.build_on_start=!0;let e=null;this.href?(this.href.replace(document.location.pathname,""),e=this.href?this.href.split("#")[1]:null):"button"===this.type&&(e=$(this).attr("onclick").split(/['"]/).filter(function(t){return t.indexOf("#")>-1}),e=e.length>0?e[0]:e,e&&-1!==e.indexOf("#")&&(e=e.split("#")[1]));let n="#"+e,o=e+"_"+(new Date).getTime();this.setAttribute("id",o),G.entry_point=this,G.entry_id=o,G.tid=n,W.modal=window.Modal(n,G)}))}}),$(".shield-modals.wait").each(function(){document.querySelector("body").dispatchEvent(new CustomEvent("modals_load"))})},trapAttachEvents:function(t){$(t).on("keydown mousedown keyup tap",function(t){(!t.keyCode||!1===/(9|13|32)/.test(t.keyCode))&&(t.preventDefault(),t.stopImmediatePropagation())})},parseForFocusable:function(t){for(let e in t.childNodes){const n=t.childNodes[e],o=1===t.nodeType,a=/(modal-guard-top|modal-guard-bottom)/.test(n.className),i=n.nodeName&&/(svg|label|path| circle|ellipse)/.test(n.nodeName),r=n.nextSibling&&1==n.nextSibling.nodeType,s=!i&&!a&&o;if(!i&&!n.stored){if(s&&this.tryAddElement(n),n.childNodes&&n.childNodes.length>0)for(let t in n.childNodes)s&&1===n.childNodes[t].nodeType&&this.parseForFocusable(n.childNodes[t]);s&&r&&this.parseForFocusable(n.nextSibling)}}},tryAddElement:function(t){window.Modals.isFocusable(t)&&!t.stored&&(V.list.push(t),t.stored=!0)},template:function(t){const e=Object.assign(K,t);let n={dialog_start:'<dialog open class="dialog" role="dialog" >',content_start:'<div class="content">',close_button:'<button type="button" class="close" data-dismiss="modal" data-queue_seq="0"><span class="text sr-only">'+(t.closeMessage?t.closeMessage:"close "+e.heading)+'</span><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" data-name="Outline" viewBox="0 0 20 20"><path d="M14 7l-3 3 3 3-1 1-3-3-3 3-1-1 3-3-3-3 1-1 3 3 3-3zm5.22 3A9.25 9.25 0 1 1 10 .75 9.26 9.26 0 0 1 19.25 10zm-1.5 0A7.75 7.75 0 1 0 10 17.75 7.76 7.76 0 0 0 17.75 10z" /></svg></button>',heading:'<div class="heading large"><h2>'+e.heading+"</h2></div>",body:'<div class="body">'+e.body+"</div>",footer_start:'<div class="footer"><div class="button-container">',buttons_start:'<div class="buttons">',primary_button:'<button class="primary" data-queue_seq="1" data-action="direct">'+e.firstButton+"</button>",secondary_button:'<button class="secondary" data-queue_seq="2" data-action="direct">'+e.secondButton+"</button>",buttons_end:"</div>",tertiary_button:'<button class="tertiary" data-queue_seq="3" data-action="direct">'+e.thirdButton+"</button>",footer_end:"</div></div>",content_end:"</div>",dialog_end:"</dialog>"};if(null===e.secondButton&&delete n.secondary_button,null===e.thirdButton&&(n.tertiary_button='<div class="tertiary" data-action="spacer" role="none"></div>'),e)return Object.keys(n).map(function(t){return n[t]}).join(" ")},closeModal:function(){const t=new Event("close");V&&"function"==typeof V.close&&V.close(t)}},window.Modal=function(t,e){let n="."+G.namespace+".background",o=document.querySelectorAll(n);for(let t in o){let e=o[t];e&&1===e.nodeType&&e.remove()}let a=t&&void 0!==t.tid?t.tid:t&&void 0!==t.href?t.href:t;"string"!=typeof t&&"object"==typeof t&&(e=t,a="default_internal");var i=a?a.concat("_modal_container"):"default_modal_container";e="object"==typeof e?Object.assign(G,e):G,K=Object.assign(K,e),(V={tid:a,bodyId:i,buttonHandlers:e.button_handlers,options:e,entry_point:e.entry_point?e.entry_point:null,current:0,component:null,dialog:null,list:[],swipe:null}).close=function(t){if(G.closeAction&&G.closeAction(t),function(){for(let t in X){let e=X[t];e.tabindexes?e.setAttribute("tabindex",e.tabindexes):e.removeAttribute("tabindex"),e.removeAttribute("aria-hidden")}}(),G.open_on_start=!0,V){f("up"),V.swipe&&V.swipe.destroy(),x(window,"keydown",E),x(window,"resize",C),x(window,"resize",_),window.modal_listening=null;let t=V.entry_point||document.querySelector("body nav")||document.querySelector("body");y(),p()?setTimeout(function(){S(),t.setAttribute("tabindex",0),setTimeout(function(){t.focus()},800)},800):d()?(setTimeout(function(){document.querySelector("body").focus()},500),setTimeout(function(){S(),y(),t.focus()},1e3)):setTimeout(function(){S(),y(),t.focus()},1e3)}},V.first=s,V.last=function(){V.current=V.list.length-1,V.list[V.list.length-1].focus()},V.build=A,V.open=g,V.scroller=C,V.setSwipe=v,V.reuseModal=function(t){V=V||window.modal||null;let e=Object.keys(t),n=["heading","body","firstButton","secondButton","thirdButton"],o=["primaryAction","secondaryAction","tertiaryAction","closeAction"],a=null,i={primaryAction:V.firstButton,secondaryAction:V.secondButton,tertiaryAction:V.thirdButton};f("up");for(let n in o)if(a=o[n],e.includes(a)&&t[a])G[a]=t[a];else{let t=V.list.indexOf(i[a]);t>-1&&delete V.list[t]}for(let o in n){let a=n[o];if(e.includes(a)){let e=V[a];e&&(null===t[a]?e.style.display="none":(e.style.display&&(e.style.display="block"),"DIV"==e.nodeName?e.innerHTML=t[a]:e.textContent=t[a]))}}V.form&&V.body.appendChild(V.form),u()?setTimeout(V.open,1e3):V.open()},V.cloneTemplate=w,V.buttonHandler=B,V.slideDialog=f,V.closeButton=null,V.background=null,V.setPrimaryAction=function(t){G.primaryAction=t},V.setSecondaryAction=function(t){G.secondaryAction=t},V.setTertiaryAction=function(t){G.tertiaryAction=t},e.build_on_start&&A(a);let r=new CustomEvent("modals_start");return document.querySelector("body").dispatchEvent(r),H.isCpraEmailModal()&&H.CPRAModalOpen(),"cpraWithoutEmail"===$(".shield-modals .cpraWithoutEmailSuccessMessage").attr("data-cpraOptoutType")&&""!=H.getCookie("privacy_optout")&&H.isCpraWithoutEmailModal(),window.modal=V,V;function s(){V.current=0,V.dialog.style.visibility="visible",v(),h(),setTimeout(h,500);let t=function(){V&&(V.list&&V.list.length&&V.list[0].setAttribute("tabindex",0),V.closeButton.focus(),f("down"),setTimeout(b,1e3))};d()?(setTimeout(t,1e3),setTimeout(function(){V&&V.dialog&&V.dialog.removeAttribute("role")},1500)):p()?setTimeout(t,80):m()&&setTimeout(t,1e3)}function l(t){let e=parseFloat(t)+parseFloat(V.current),n=V.list.length-1;e>-1&&e<=n&&(V.current=e),e<0&&(V.current=n),e>n&&(V.current=0),V.list[V.current].focus()}function u(){let t=document.querySelector("body");return!!V&&t.contains(V.background)}function f(t){(V=V||window.modal||null)&&V.optOutMsg&&(V.optOutMsg.style.display="none"),"up"==t?(V.dialog.classList.remove("in"),V.dialog.classList.add("up"),V.dialog.removeAttribute("open"),V.heading.style.opacity=0,V.body.style.opacity=0):(V.dialog.classList.remove("up"),V.dialog.classList.add("in"),V.dialog.setAttribute("open",!0),V.heading.style.opacity=1,V.body.style.opacity=1)}function g(){(V=V||window.modal||null)&&(u()||(function(){let t=[],e=document.querySelectorAll("body >*:not(script)"),n=document.querySelectorAll("button, input, select, textarea"),o=document.querySelectorAll("[tabindex]");if(e.length&&(t=t.concat(window.Modals.fetchArray(e))),n.length&&(t=t.concat(window.Modals.fetchArray(n))),o.length&&(t=t.concat(window.Modals.fetchArray(o))),t.length)for(let e in t){let n=t[e];if(1==n.nodeType&&!n.getAttribute("aria-hidden")){let t=n.getAttribute&&n.getAttribute("tabindex");V&&V.body&&V.dialog.contains(n)||(n.setAttribute("aria-hidden","true"),n.tabindexes=t||null,n.setAttribute("tabindex","-1"),X.push(n))}}}(),V&&(V.body.setAttribute("aria-hidden","true"),V.heading.setAttribute("aria-hidden","true"),V.firstButton&&V.firstButton.setAttribute("aria-hidden","true"),V.secondButton&&V.secondButton.setAttribute("aria-hidden","true"),V.thirdButton&&V.thirdButton.setAttribute("aria-hidden","true")),document.body.appendChild(V.background),B(),window.modal_listening||($(window).unbind("keydown"),k(window,"keydown",E),k(window,"resize",C),window.modal_listening=!0)),V.list=V.list&&V.list.length?V.list:[],window.Modals.parseForFocusable(V.dialog),window.Modals.sequence(V,s))}function h(){document.body.classList.add("modal-lock")}function y(){document.body.classList.remove("modal-lock")}function b(){V&&(V.body.removeAttribute("aria-hidden"),V.firstButton&&V.firstButton.removeAttribute("aria-hidden"),V.heading.removeAttribute("aria-hidden"),V.secondButton&&V.secondButton.removeAttribute("aria-hidden"),V.thirdButton&&V.thirdButton.removeAttribute("aria-hidden"))}function v(){if(V)try{V.swipe=new Motion(V.background,{trap:!1}),V.swipe.on("swipe",function(t){if(null!=V)return"left"==t.horizontal&&l(-1),"right"==t.horizontal&&l(1),!0})}catch(t){}}function A(t){if(w(t),G.open_on_start)return g()}function w(t){let e,n=document.getElementById(t),o=document.createElement("div"),a=t+"_modal_container";return o.className=G.namespace+" background m-shadow-box",o.id=a,V.background=o,n?"TEMPLATE"===n.nodeName?(e=n.content.cloneNode(!0),o.appendChild(document.importNode(e,!0))):"SCRIPT"===n.nodeName?o.innerHTML=n.innerHTML:o.innerHTML=Z.template(K):o.innerHTML=window.Modals.template(K),d()&&(_(o),k(window,"resize",_)),G.template=n,G.last_modal=o,V.dialog=o.querySelector("dialog"),V.heading=o.querySelector(".heading *")||o.querySelector(".heading"),V.optOutMsg=o.querySelector(".optOutMsg"),V.body=o.querySelector(".body"),V.footer=o.querySelector(".footer"),V.form=o.querySelector(".body form"),V.closeButton=o.querySelector("button.close"),V.firstButton=o.querySelector("button.primary"),V.secondButton=o.querySelector("button.secondary"),V.thirdButton=o.querySelector("button.tertiary"),V.dialog.modal=V,V.component=o,V.dialog.removeAttribute("open"),V.dialog.setAttribute("tabindex","-1"),V.closeButton.setAttribute("aria-label","Close"),o}function E(t){if(![27,13,38,40,37,39,32,9].includes(t.keyCode))return;const e=/(TEXTAREA|INPUT)/.test(t.target.tagName),n=/(BUTTON|A)/.test(t.target.tagName),o=/(13|32)/.test(t.keyCode),a=/(msie|trident)/.test(navigator.userAgent.toLowerCase())?!0===t.shiftKey:t.shiftKey;switch(t.keyCode){case 27:V&&V.close&&V.close();break;case 32:return!0;case 40:if(e)return!0;t.preventDefault(),t.stopImmediatePropagation(),l(1);break;case 39:if(e)return!0;l(1);break;case 38:if(e)return!0;t.preventDefault(),t.stopImmediatePropagation(),l(-1);break;case 37:if(e)return!0;l(-1);break;case 13:t.preventDefault(),t.stopImmediatePropagation(),e&&G.primaryAction(t),n&&t.target.click();break;case 9:t.preventDefault(),t.stopImmediatePropagation(),l(a?-1:1)}return!(!e&&!o)||void 0}function S(){V&&V.component?(V.component.remove(),V=null):G.last_modal&&(G.last_modal.style.display="none",G.last_modal.remove())}function k(t,e,n){t&&(t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n,!1))}function x(t,e,n){t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener(e,n,!1)}function C(){if(V){V.body.style.height="100%",V.body.removeAttribute("style");let t=parseFloat(V.body.getBoundingClientRect().y),e=(V.footer?parseFloat(V.footer.getBoundingClientRect().y):"")-t;V.body.clientHeight>e&&(V.body.style.height=e.toString().concat("px"))}}function _(t){let e=t.querySelector("dialog");if(!e.dataset.guardRails){let n=t.querySelector("button.close"),o=t.querySelector("button.primary"),a=document.createElement("button"),i=document.createElement("button");a.className="modal-guard-top",i.className="modal-guard-bottom",m()&&(a.innerText="top of modal",i.innerText="bottom of modal"),k(a,"focus",function(t){t.preventDefault(),t.stopImmediatePropagation(),o.focus()}),k(i,"focus",function(t){t.preventDefault(),t.stopImmediatePropagation(),n.focus()}),e.dataset.guardRails=!0,e.insertBefore(a,e.childNodes[0]),e.appendChild(i)}}function L(t,e){let n=G[e];"link"===t.target.dataset.action?t.target.dataset.link?"_self"==t.target.dataset.target?(c(t.target.dataset.link,t.target.dataset.target),V.close()):c(t.target.dataset.link,t.target.dataset.target):V.close():t.target.dataset.link?c(t.target.dataset.link,t.target.dataset.target):"function"==typeof n?G[e](t):V.close()}function T(t){const e=t.target.closest(".button-container");if(e&&"true"===e.getAttribute("data-ploc-apply-params-check")&&V.tid==e.getAttribute("data-ploc-apply-identifier")){let e=t.target.getAttribute("data-link");const n=document.getElementById("plccalculator-Amount");let o=new URL(e);o.searchParams.set("loanAmount",parseInt(n.value.replace(/\D/gi,""))),t.target.setAttribute("data-link",o.toString())}}function B(){setTimeout(C,1e3),k(V.closeButton,"click",function(){V.close()}),k(V.firstButton,"click",function(t){t.preventDefault(),t.stopImmediatePropagation(),T(t),"true"==t.target.getAttribute("data-cpraOptout")?function(){let t,e=document.domain.split("."),n="privacy_optout=1; path=/; domain ="+("."+e[e.length-2]+"."+e[e.length-1]).replace(".undefined","")+"; expires=Thu, 31 Dec 2099 12:00:00 UTC; ";if(H.isCpraEmailModal()){if(t=H.getUpdatedEmail(),!H.validateEmail(t))return H.showAlerMessages("none","block","none"),!1;H.CPRAUSubmitEvent(()=>!0),document.getElementById("cpraEmail").value=""}else document.cookie=n;try{let e={};if(t&&(e.emailOptOut=!0),window.CustomEvent){let t=new CustomEvent("privacy_optout",{detail:e});window.dispatchEvent(t)}}catch(t){console.error(t)}H.isCpraWithoutEmailModal()}(t.target):L(t,"primaryAction")}),V.secondButton&&k(V.secondButton,"click",function(t){t.preventDefault(),t.stopImmediatePropagation(),T(t),L(t,"secondaryAction")}),V.thirdButton&&k(V.thirdButton,"click",function(t){t.preventDefault(),t.stopImmediatePropagation(),T(t),L(t,"tertiaryAction")})}};var Y,J,Q;n(662),n(162);Y={},J={},Q=/(http|https)\:(\/\/)([a-z0-9\-\.]+)/gi,window.speedBumpReader={make:function(){a(".sb_domain").forEach(function(t){var e=Object.keys(t.dataset)[0];e&&t.dataset[e]&&(J[e]=JSON.parse(t.dataset[e].trim()),Y[e]=new RegExp(J[e].join("|")))});var t=window.location.hostname.split(".").splice(-2).join(".");J.domain=[t],-1==J.domain.indexOf("usbank.com")&&J.domain.push("usbank.com"),Y.domain=new RegExp("("+J.domain.join("|")+")$")},links:function(){return a('a[href^="https://"],a[href^="http://"], button[onclick^="javascript:window.open(\'http"]')},evaluate:function(t){var e="A"==t.nodeName&&t.href||"function"==typeof t.onclick&&t.onclick.toString().match(Q)[0]||null,n=e.replace(/(^https\:\/\/|^http\:\/\/)/,"").split("/")[0],o=/(^https:\/\/)/.test(e),a=Y.domain.test(n),i=Y.whitelist&&Y.whitelist.test(n)||!1,r=Y.blacklist&&Y.blacklist.test(e)||!1,s=n.split(".").map(function(t){if("www"!=t)return t}).join("."),l=a&&!i&&s.split(".").length>2;return!a&&!i||!o||r||l},attach:function(){window.speedBumpReader.make(),window.speedBumpReader.links().forEach(function(t){!t.classList.contains("external-linked")&&window.speedBumpReader.evaluate(t)&&(t.classList.add("external-linked"),t.onclick&&(t.linkmethod=t.onclick,t.onclick=null),t.dataset.entryPoint=t,u(t,"click",window.speedBumpReader.activate))})},activate:function(t){t.preventDefault(),t.stopImmediatePropagation();var e=t.target.closest("button,a");window.Modal("#speedBump",{start_on_load:!0,entry_point:e,primaryAction:function(t){window.Modals.closeModal(),e.href&&c(e.href,e.target),e.linkmethod&&e.linkmethod(t)}})}},$(document).ready(function(){document.getElementById("#speedBump")&&window.speedBumpReader.attach()});var tt=tt||{};!function(){const t={emmZafin_Range10000:"$0 - $9,999.99","emmZafin_Range10000-24999":"$10,000 - $24,999.99","emmZafin_Range25000-49999":"$25,000 - $49,999.99","emmZafin_Range50000-99999":"$50,000 - $99,999.99","emmZafin_Range100000-499999":"$100,000 - $499,999.99","emmZafin_Range1500000-9999999999":"$500,000 and above"};function e(t){return Boolean(t.length>0&&Boolean(null!=t))}function n(t,e,n){const o=l("apply_jwt");fetchZafinEMMRates(e,n,o).then(function(e){var n=[];if(e.rateGrids&&$.each(e.rateGrids,function(t,e){var o=new RegExp(/^(DDA86)/gi);e.rates&&o.test(e.productKey)&&$.each(e.rates,function(t,e){e.disclosureKey&&-1===n.indexOf(e.disclosureKey)&&n.push(e.disclosureKey)})}),e.disclosures&&e.disclosures.productSpecificDisclosures){var o=e.disclosures.productSpecificDisclosures;o&&n.length&&function(t,e,n){$.each(e,function(e,o){if(n.includes(o.key)){var a=o.richText,i=a.includes("<body>")?a.substring(a.indexOf("<body>")+6,a.indexOf("</body>")):a;t.forEach(function(t){t.textContent="",t.insertAdjacentHTML("beforeend","<div>"+i+"</div>")})}})}(t,o,n)}})}document.addEventListener("inpagezipfound",function(t){zipcode=t.detail,zipcode&&window.adobe&&window.adobe.target&&document.addEventListener(adobe.target.event.CONTENT_RENDERING_SUCCEEDED,function(){tt.fetchRates(zipcode)})}),tt={fetchRates:function(a){var i=o(document.querySelectorAll(".disclosure .emmZafin_Disclosure"));if(e(i)){var r="DDA86";(u=a||l("zipcode"))&&null!=u&&!isNaN(parseInt(u))&&5==u.length&&n(i,u,r)}var s=o(document.querySelectorAll(".disclosure .emmZafin_Apy")),c=o(document.querySelectorAll(".disclosure .emmZafin_Apr"));if(e(s)||e(c)){var u;r="DDA86";(u=a||usbUtils&&l("zipcode"))&&null!=u&&!isNaN(parseInt(u))&&5==u.length&&function(e,n,o,a){var i=l("apply_jwt");fetchZafinEMMRates(o,a,i).then(function(o){o.rateGrids&&$.each(o.rateGrids,function(o,a){var i=new RegExp(/^(DDA86)/gi);a.rates&&i.test(a.productKey)&&$.each(a.rates,function(o,a){var i=a.apr?Number.parseFloat(a.apr).toFixed(2):"X.XX",r=a.apy?Number.parseFloat(a.apy).toFixed(2):"X.XX",s=a.tierDescription?a.tierDescription:null;e.forEach(function(e){var n=e.nextSibling?e.nextSibling.className:null;t[n]==s&&(e.textContent=r+"%")}),n.forEach(function(e){var n=e.nextSibling?e.nextSibling.className:null;t[n]==s&&(e.textContent=i+"%")})})})})}(s,c,u,r)}}}}();var et,nt,ot,at=tt;$(document).ready(function(){var t=[];const e=function(){return navigator.platform&&/(ipad|iphone)/i.test(navigator.userAgent.toLowerCase())},n=function(){return navigator.platform&&/(android)/.test(navigator.userAgent.toLowerCase())},a=t=>"keydown"==t.type&&13==t.keyCode||/(click|touchstart|mousedown)/.test(t.type);let i=$("li.disclosure");function s(t){let e=[],n=["1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];for(let o=0;o<t;o++)e.push(n[Math.floor(16*Math.random())]);return e.join("")}function l(){let o=$("sup a, a sup");i=$("li.disclosure");for(let t=0;t<o.length;t++){let e="SUP"===o[t].nodeName,n=e?o[t].parentElement:o[t];e?o[t].classList.add("disc_footnote"):o[t].parentElement.classList.add("disc_footnote"),c(n,e)}var a=Array.from(document.querySelectorAll('a[href^="#"]')),r=new RegExp("^\\d+$");(a=a.filter(function(t){var e=t.getAttribute("href").replace("#","");return r.test(e)&&"SUP"!==t.parentElement.nodeName&&!t.firstElementChild})).forEach(function(t){c(t,!1)}),function(){for(let o=0;o<t.length;o++){let a=t[o];e()?(a.return_link.setAttribute("role","link"),a.focal.setAttribute("tabindex","0")):n()?(a.return_link.removeAttribute("role"),a.focal.setAttribute("tabindex","0")):(a.return_link.removeAttribute("role"),a.focal.setAttribute("tabindex","-1"))}}(),function(){let t=document.querySelectorAll(".disclosure_entry_notice");if(t.length>0){t[0].style.display="block";for(let e=1;e<t.length;e++)t[e].style=""}}()}function c(e,n){const o=parseInt(e.getAttribute("href").replace("#",""));let a=i[o-1],r="returnto_bodynotes_"+s(4);if(a){let i=a.querySelectorAll("a.disclosureReturn");e.return_link=i[0];try{e.dest=a,e.focal=a.querySelector(".disclose_message"),e.setAttribute("id",r),e.removeAttribute("title"),e.return_link=function(t,e){let n=$("#returnToContentFootnote").val(),o=document.createElement("a");return o.href="#"+e,o.text=n+t,o.className="disclosureReturn sr-only",o.dataset.target="_self",o}(o,r),/\/es\//.test(window.location.href)?(e.setAttribute("aria-label","Nota a pie de página "+o),e.footnote_label=u("Nota a pie de página "+o)):/\/zh\//.test(window.location.href)?(e.setAttribute("aria-label","註釋 "+o),e.footnote_label=u("註釋 "+o)):(e.setAttribute("aria-label","Footnote "+o),e.footnote_label=u("Footnote "+o)),0===i.length&&(a.appendChild(e.return_link),a.insertBefore(e.footnote_label,a.children[0]));let l="footnote_region_"+s(4);e.focal&&(e.focal.setAttribute("id",l),e.focal.parentElement.setAttribute("aria-labelledby",l)),e.href="#"+l,e.return_link.dest=n?e.parentElement:e.parentElement.parentElement,e.return_link.focal=e,function(t){window.addEventListener&&(t.return_link.addEventListener("click",m,!1),t.return_link.addEventListener("mousedown",m,!1),t.return_link.addEventListener("keydown",m,!1),"ontouchstart"in document.documentElement&&t.return_link.addEventListener("touchstart",m,!1),t.addEventListener("click",d,!1),t.addEventListener("keydown",d,!1));window.attachEvent&&(t.return_link.attachEvent("click",m,!1),t.return_link.attachEvent("keydown",m,!1),"ontouchstart"in document.documentElement&&t.return_link.attachEvent("touchstart",m,!1),t.attachEvent("click",d,!1),t.attachEvent("keydown",d,!1))}(e),t.push(e)}catch(t){console.log("Error in tagFootnotes in disclosure")}}}function u(t){let e=document.createElement("div");return e.className="sr-only footnote-label",e.textContent=t,e}function d(t){if(a(t)){let e="SUP"===t.target.nodeName?t.target.parentElement:t.target;if(e.dest){t.preventDefault(),t.stopImmediatePropagation();let n=e.dest.querySelector("a.disclosureReturn");n&&e.dest.replaceChild(e.return_link,n),f(e,"footnote")}}}function m(t){let e=t.target;e&&a(t)&&(t.preventDefault(),t.stopImmediatePropagation(),f(e,"returnto"))}function f(t,e){if(t.dest){let n=0;$("html, body").stop().animate({scrollTop:$(t.dest).offset().top-($(".globalComparisonChart .comparison-table").length&&"returnto"==e?100+($(t.dest.closest(".compare-row")).length?$(t.dest).offset().top-$(t.dest.closest(".compare-row")).offset().top:0):0)},{complete:function(){n++,t.focal.focus()}})}}function p(){l(),at.fetchRates(),speedBumpReader.attach()}$(window).resize(m),window.FootnoteUtils=window.FootnoteUtils||{},window.FootnoteUtils.run=p,function(){let t={childList:!0,subtree:!0};const e=function(){let t=o(document.querySelectorAll("[href*=returnto]")),e=r(document.querySelectorAll("[href*=footnote_"));t.forEach(function(t,n){let o=document.querySelector(t.getAttribute("href"));e.indexOf(o)>-1?t.style=null:t.style=""})},n=(t,n)=>{for(const n of t)switch(n.type){case"childList":case"subtree":setTimeout(function(){e()},150)}};new MutationObserver(n);if(o(document.querySelectorAll("[href*=footnote_").length>0)){new MutationObserver(n).observe(document.body,t)}}(),window.adobe&&window.adobe.target&&document.addEventListener(adobe.target.event.CONTENT_RENDERING_SUCCEEDED,p),window.fetchDisclosureData=p,p()}),et=document.querySelector(".emergency-banner-close"),nt="click",ot=function(t){(t.target||t).closest(".emergency-banner").style.display="none",/(md|sm)/.test(s())&&document.querySelector(".mobile button#navigation-menu-button").focus()},et&&et.attachEvent?et.attachEvent("on"+nt,ot):et&&et.addEventListener(nt,ot,!1),history.scrollRestoration?history.scrollRestoration="manual":window.onbeforeunload=function(){window.scrollTo(0,0)}}()}();

$(document).ready(function () {
    let pageurl = location.href;

    if (pageurl.includes('/credit-cards/') || pageurl.includes('/business-banking/')) {
        let src_code = new URL(pageurl).searchParams.getAll('sourcecode').toString();

        let url_boarding = ['onboarding.usbank.com/consumer/cards/', 'onboarding.usbank.com/gateway/consumer', 'onboarding.usbank.com/usl/consumer/', 'onboarding.usbank.com/business/cards/'];
        let url_application = ['applications.usbank.com/oad', 'applications.usbank.com/pdap', "onboarding.usbank.com/usl/consumer/", "onboarding.usbank.com/usl/business/","onboarding.usbank.com/access/", "onboarding.us.bank-dns.com/access/" ];

        if (src_code != null && src_code != '') {
            $('a').each(function (i, val) {
                let url = val.href;
                if (url != null && url != '') {
                    let urlObj = new URL(val.href);
                    url_boarding.forEach(function (url1, index) {
                        if (url.indexOf(url1) > -1) {
                            if (urlObj.pathname.indexOf('intro') > 0 || urlObj.pathname.indexOf('business-information') > 0 || urlObj.pathname.indexOf('start') > 0 || urlObj.pathname.indexOf('login') > 0) {
                                let pathnamearr = pathnameadd(urlObj.pathname);
                                if (pathnamearr) {
                                    urlObj.pathname = pathnamearr;
                                    val.href = urlObj.toString();

                                }
                            }
                        }
                    })
                    url_application.forEach(function (url2, index) {
                        if (url.indexOf(url2) > -1) {
                            if (urlObj.searchParams.getAll('sourceCode').length) {
                                urlObj.searchParams.set('sourceCode', src_code);
                                val.href = urlObj.toString();
                            }
                        }
                    });
                }
            })
        }

        function pathnameadd(pathname) {
            let pathnamearr = pathname.split('/');
            pathnamearr[pathnamearr.length - 2] = src_code;
            pathnamearr = pathnamearr.join('/');
            return pathnamearr
        }
    }
});

let dsDynamicRatesApi = (function() {

    let checkIfDSDynamicRatesClassPresent = function(className,loanType) {
        if ($(className) && $(className).length > 0) {
            updateDynamicRates(className,loanType);
        }
    }

    let updateDynamicRates = function(className, loanType) {
        let newDate = currentDateCheck(5,30);
        let requestURL = "/svt/usbank/dealerServicesDirectRates";
        let configuredParams =getRequestParams(loanType);
        if(configuredParams){
            let requestParams = configuredParams+ "." + newDate + "_ds" + ".json";
             $.ajax({
                url: requestURL + requestParams,
                type: 'GET',
                success: function(data) {
                    let selectedTerm = getSelectedTerm(loanType);
                    if(selectedTerm){
                        for (let key in data) {
                           if (data.hasOwnProperty(key) && data[key].termInMonths == selectedTerm ) {
                                 $(className).html(data[key].apr.toFixed(2));
                           }
                        }
                    } else { // auto refinance case
                         $(className).html(data['apr'].toFixed(2));
                    }
                },
                error: function() {
                    $(className).html('');
                }
            })
        }

    };
    let getSelectedTerm = function(loanType){
        if("AUTO_NEW_PURCHASE" == loanType){
          return  $('body').attr("data-autopurchaseterm");
        }
    }
    let getRequestParams = function(loanType){
            if("AUTO_NEW_PURCHASE" == loanType){
              return  $('body').attr("data-dsdynamicratesautopurchase");
            }else if("AUTO_REFINANCE" == loanType){
              return  $('body').attr("data-dsdynamicratesautorefinance");
            }else if("RV_REFINANCE" == loanType){
                return  $('body').attr("data-dsdynamicratesrvrefinance");
            }else if("BOAT_REFINANCE" == loanType){
                return  $('body').attr("data-dsdynamicratesboatrefinance");
            }else if("Lease_Buyout" == loanType){
                return  $('body').attr("data-leasebuyoutdyncamicrates");
            }
    }
    let currentDateCheck = function(execHour, execMinutes) {
       let systemDate = new Date();
       let centralTime = new Date(systemDate.toLocaleString('en-US',{timeZone: 'America/Chicago'}));
        if (centralTime.getHours() < execHour || ( centralTime.getHours() === execHour && centralTime.getMinutes() <= execMinutes )) {
            centralTime.setDate(centralTime.getDate()-1);
        }
        return `${centralTime.getFullYear()}${centralTime.getMonth()+1}${centralTime.getDate()}`;
    }

    return {
        updateDynamicRates: updateDynamicRates,
        checkIfDSDynamicRatesClassPresent: checkIfDSDynamicRatesClassPresent
    };
})();

dsDynamicRatesApi.checkIfDSDynamicRatesClassPresent(".ds-directrates-auto-new-purchase","AUTO_NEW_PURCHASE");
dsDynamicRatesApi.checkIfDSDynamicRatesClassPresent(".ds-directrates-auto-refinance","AUTO_REFINANCE");
dsDynamicRatesApi.checkIfDSDynamicRatesClassPresent(".ds-directrates-rv-refinance","RV_REFINANCE");
dsDynamicRatesApi.checkIfDSDynamicRatesClassPresent(".ds-directrates-boat-refinance","BOAT_REFINANCE");
dsDynamicRatesApi.checkIfDSDynamicRatesClassPresent(".lease-buyout-dynamic-rates","Lease_Buyout");
$(document).ready(function() {

    // Get URL parameter value - case insensitive
    function getUrlParamValue(paramName) {
        var params = new URL(location).searchParams;
        var keyName = Array.from(params.keys()).find(
            function (key) {
                return key.toLowerCase() == paramName.toLowerCase();
            }
        );
        return params.get(keyName);
    }

    let referrerIdCookieName = 'referrerId';
    let referrerIDUrlValue = getUrlParamValue(referrerIdCookieName);

    let tstoken = usbUtils && typeof usbUtils.getCookieItem === 'function' && usbUtils.getCookieItem("isOlbCustomer");
    let isHomeLoansPage = window.location.href.indexOf("home-loans") > -1;
    let emailName = '';

    if (tstoken && isHomeLoansPage) {
        if (referrerIDUrlValue) {
            if(referrerIDUrlValue !== 'PortalDotCom@usbank.com' && referrerIDUrlValue !== 'Portalmobile@usbank.com') {
                createCookie(referrerIdCookieName, referrerIDUrlValue, 30);
            }
            emailName = referrerIDUrlValue;
        } else if (readCookie(referrerIdCookieName)) {
            emailName = readCookie(referrerIdCookieName);
        }
        $.ajax({
            url: "/svt/usbank/bridgePageConfig",
            type: "GET",
            dataType: "json",
            contentType: "application/json",
            success: function (json) {
                let digitalSsoMatchUrl = 'onlinebanking.usbank.com/digital/ssologin';
                if (json && json.length) {
                    $('button').each(function () {
                        updatedOnclickBtnHrefCallback.call(this, json, emailName, digitalSsoMatchUrl,formulateCustomerBtnHref);
                    });
                    $('a').each(function () {
                        updatedOnclickBtnHrefCallback.call(this, json, emailName, digitalSsoMatchUrl,formulateCustomerBtnHref);
                    });
                } else {
                    setLinkHref();
                }
            }
        })
    } else {
        setLinkHref();
    }

    function formulateCustomerBtnHref(btnHref, emailName) {
        // Update referrerId in button href
        let updatedBtnHref = btnHref.replace('referrerid', 'referrerId');
        let btnHrefArr = updatedBtnHref.split("?");
        let btnBaseString = btnHrefArr[0];
        let btnParamString = btnHrefArr[1];
        let btnParams = new URLSearchParams("");
        if (btnParamString) {
            btnParams = new URLSearchParams(btnParamString);
        }

        if ((!btnParams.has('journeyoption')) && (btnParams.get('referrerId') == 'PortalDotCom@usbank.com' || btnParams.get('referrerId') == 'Portalmobile@usbank.com')) {
            btnParams.set('referrerId', emailName);
        }

        return btnBaseString + '?' + decodeURIComponent(btnParams.toString());
    }

    function setLinkHref() {
        if (referrerIDUrlValue != null && referrerIDUrlValue != '' && referrerIDUrlValue != undefined) {
            if(referrerIDUrlValue !== 'PortalDotCom@usbank.com' && referrerIDUrlValue !== 'Portalmobile@usbank.com') {
                createCookie(referrerIdCookieName, referrerIDUrlValue, 30);
            }
            appendCookieUrl(referrerIDUrlValue);
        } else if (readCookie(referrerIdCookieName) != null && readCookie(referrerIdCookieName) != '' && readCookie(referrerIdCookieName) != undefined) {
            let email = readCookie(referrerIdCookieName);
            appendCookieUrl(email);
        }
    }

    function createCookie(name, value, days) {
        let expires;

        if (days) {
            let date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toGMTString();
        } else {
            expires = "";
        }
        document.cookie = encodeURIComponent(name) + "=" + encodeURIComponent(value) + expires + "; path=/";
    }

    function readCookie(name) {
        let nameEQ = encodeURIComponent(name) + "=";
        let ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ')
                c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0)
                return decodeURIComponent(c.substring(nameEQ.length, c.length));
        }
        return null;
    }

    function appendCookieUrl(name) {
        let emailName = name;
        let matchBridgeUrl1 = 'home-loans/mortgage/apply.html';
        let bridgeSignInBtnId = 'aem-bridge-sign-in-start';
        let bridgeStartGuest = 'aem-bridge-start-guest';
        $('button').each(function() {
            let matchUrl = 'mortgageapply.usbank.com/#/signup?referrerId=PortalDotCom%40usbank.com';
            let matchUrlMobile = 'mortgageapply.usbank.com/#/signup?referrerId=Portalmobile%40usbank.com';
            let matchUrl1 = 'onlinebanking.usbank.com/Auth/SSOLogin?client=Blend&amp;referrerid=PortalDotCom@usbank.com';
            let matchUrlMobile1 = 'onlinebanking.usbank.com/Auth/SSOLogin?client=Blend&amp;referrerid=Portalmobile@usbank.com';
            let matchUrl2 = 'onlinebanking.usbank.com/Auth/SSOLogin?client=Blend&referrerid=PortalDotCom@usbank.com';
            let matchUrlMobile2 = 'onlinebanking.usbank.com/Auth/SSOLogin?client=Blend&referrerid=Portalmobile@usbank.com';
            let onclickHref = $(this).attr('onclick');
            if (onclickHref != undefined && (onclickHref.includes(matchUrl) || onclickHref.includes(matchUrlMobile))) {

                let latest = "location.href='https://mortgageapply.usbank.com/#/signup?referrerId=" + emailName + "'";

                $(this).attr('onclick', latest);
            } else if (onclickHref != undefined && (onclickHref.includes(matchUrl1) || onclickHref.includes(matchUrl2) || onclickHref.includes(matchUrlMobile1) || onclickHref.includes(matchUrlMobile2))) {

                let latest = "location.href='https://onlinebanking.usbank.com/Auth/SSOLogin?client=Blend&referrerId=" + emailName + "'";

                $(this).attr('onclick', latest);
            } else if (onclickHref && (onclickHref.includes(matchBridgeUrl1))) {
                let btnHref = decodeURIComponent(onclickHref);
                btnHref = btnHref.replace("location.href='", "").replace(";", "").replace("'", "");
                if (btnHref) {
                    let newBtnHref = formulateBtnHref(btnHref, emailName);
                    if (newBtnHref) {
                        $(this).attr('onclick', "location.href='" + newBtnHref + "'");
                    }
                }
            } else if (window.location.href.indexOf(matchBridgeUrl1) > -1) {
                //DotCom Bridge Page
                let btnId = $(this).attr('id');
                let btnHref = decodeURIComponent(onclickHref);
                btnHref = btnHref.replace("location.href='", "").replace(";", "").replace("'", "");
                if (btnId && btnHref && (btnId.indexOf(bridgeSignInBtnId) >= 0 || btnId.indexOf(bridgeStartGuest) >= 0)) {
                    let newBtnHref = formulateBtnHref(btnHref, emailName);
                    if (newBtnHref) {
                        $(this).attr('onclick', "location.href='" + newBtnHref + "'");
                    }
                }
            }

        });

        $('a').each(function() {
            let matchUrl = 'mortgageapply.usbank.com/#/signup?referrerId=PortalDotCom%40usbank.com';
            let matchUrlMobile = 'mortgageapply.usbank.com/#/signup?referrerId=Portalmobile%40usbank.com';
            let matchUrl1 = 'onlinebanking.usbank.com/Auth/SSOLogin?client=Blend&amp;referrerid=PortalDotCom@usbank.com';
            let matchUrlMobile1 = 'onlinebanking.usbank.com/Auth/SSOLogin?client=Blend&amp;referrerid=Portalmobile@usbank.com';
            let matchUrl2 = 'onlinebanking.usbank.com/Auth/SSOLogin?client=Blend&referrerid=PortalDotCom@usbank.com';
            let matchUrlMobile2 = 'onlinebanking.usbank.com/Auth/SSOLogin?client=Blend&referrerid=Portalmobile@usbank.com';
            let onclickHref = $(this).attr('href');
            if (onclickHref != undefined && (onclickHref.includes(matchUrl) || onclickHref.includes(matchUrlMobile))) {

                let latest = "https://mortgageapply.usbank.com/#/signup?referrerId=" + emailName;

                $(this).attr('href', latest);
            } else if (onclickHref != undefined && (onclickHref.includes(matchUrl1) || onclickHref.includes(matchUrl2) || onclickHref.includes(matchUrlMobile1) || onclickHref.includes(matchUrlMobile2))) {

                let latest = "https://onlinebanking.usbank.com/Auth/SSOLogin?client=Blend&referrerId=" + emailName;

                $(this).attr('href', latest);
            } else if (onclickHref && (onclickHref.includes(matchBridgeUrl1))) {
                let btnHref = decodeURIComponent(onclickHref);
                if (btnHref) {
                    let newBtnHref = formulateBtnHref(btnHref, emailName);
                    if (newBtnHref) {
                        $(this).attr('href', newBtnHref);
                    }
                }
            } else if (window.location.href.indexOf(matchBridgeUrl1) > -1) {
                //DotCom Bridge Page
                let btnId = $(this).attr('id');
                let btnHref = decodeURIComponent(onclickHref);
                if (btnId && btnHref && (btnId.indexOf(bridgeSignInBtnId) >= 0 || btnId.indexOf(bridgeStartGuest) >= 0)) {
                    let newBtnHref = formulateBtnHref(btnHref, emailName);
                    if (newBtnHref) {
                        $(this).attr('href', newBtnHref);
                    }
                }
            }


        });




    }
    
    let cokieData = document.cookie, cokieSortedData,responseHeaderCookie = ['aid','mid','riblpid','apptype'],
    setResponseHeaderCookie = ['omniiphoneaid','omniiphonemid','omniiphonelpid','omniapptype'], positionMatchedHeader = [];
    cokieSortedData = cokieData.split(';');

   
    for(let i = 0; i < cokieSortedData.length; i++){
        for(let j = 0; j < responseHeaderCookie.length; j++){
			 if(cokieSortedData[i].indexOf(responseHeaderCookie[j]) != -1){
                let splitCharCookie = cokieSortedData[i].split('=');
				localStorage.setItem(setResponseHeaderCookie[j],splitCharCookie[1]);
        	}
        }

    }

    function getUrlParameters() {
        let search = window.location.search;
        let params = new URLSearchParams(search);
        let paramObj = {};
        for (let value of params.keys()) {
            paramObj[value] = params.get(value);
        }
        return paramObj;
    }

    function formulateBtnHref(btnHref, emailName) {
        // Update referrerId in button href
        let updatedBtnHref = btnHref.replace('referrerid', 'referrerId').replace('PortalDotCom@usbank.com', emailName).replace('Portalmobile@usbank.com', emailName);
        let btnHrefArr = updatedBtnHref.split("?");
        let btnBaseString = btnHrefArr[0];
        let btnParamString = btnHrefArr[1];
        let btnParams = new URLSearchParams("");
        if (btnParamString) {
            btnParams = new URLSearchParams(btnParamString);
        }

        // Add other url parameters to button href
        let paramObj = getUrlParameters();
        for (let key in paramObj) {
            if (paramObj.hasOwnProperty(key)) {
                if (key.toLowerCase() == 'referrerid' && !btnParams.has('referrerId')) {
                    btnParams.set('referrerId', emailName)
                } else if (key.toLowerCase() != 'referrerid' && key.toLowerCase() != 'wcmmode') {
                    btnParams.set(key, paramObj[key]);
                }
            }
        }
        if (!btnParams.has('referrerId')) {
            btnParams.set('referrerId', emailName);
        }
        if (btnParams.has('referrerId') && (btnParams.get('referrerId') != 'PortalDotCom@usbank.com') && (btnParams.get('referrerId') != 'Portalmobile@usbank.com')) {
            btnParams.delete('journeyoption');
        }

        return btnBaseString + '?' + decodeURIComponent(btnParams.toString());
    }

    let ecidFlow = {
        ecidParamName: 'ecid',

        updateMortgageMloUrl: function (name) {
            $.ajax({
                url: "/svt/usbank/mloConfigPage",
                type: "GET",
                dataType: "json",
                contentType: "application/json",
                success: function (json) {
                    if(json && json.mloLocatorOldPagePath && json.mloLocatorNewPagePath) {
                        let matchUrl = json.mloLocatorOldPagePath;
                        let newBtnHref = json.mloLocatorNewPagePath + '.html';

                        $('button').each(function () {
                            let onclickHref = $(this).attr('onclick');
                            if (onclickHref && (onclickHref.includes(matchUrl))) {
                                $(this).attr('onclick', "location.href='" + newBtnHref + "'");
                            }
                        });

                        $('a').each(function () {
                            let onclickHref = $(this).attr('href');
                            if (onclickHref && (onclickHref.includes(matchUrl))) {
                                $(this).attr('href', newBtnHref);
                            }
                        });
                    }
                }
            })
        }
    }

    ecidFlow.ecidUrlValue = getUrlParamValue(ecidFlow.ecidParamName);
    if (ecidFlow.ecidUrlValue) {
        createCookie(ecidFlow.ecidParamName, ecidFlow.ecidUrlValue, 90);
    }
    if (readCookie(ecidFlow.ecidParamName)) {
        ecidFlow.updateMortgageMloUrl();
    }


});

function updatedOnclickBtnHrefCallback (json, emailName, digitalSsoMatchUrl,formulateCustomerBtnHref) {
    let ele = $(this);
    let onclickHref = ele.attr('href');
    if (onclickHref) {
        json.forEach(function (item) {
            if (onclickHref.includes(item.matchUrl)) {
                ele.attr('href', onclickHref.replace(item.matchUrl, item.redirecturl));
            }
        });
    }
    onclickHref = ele.attr('href');
    if (emailName && onclickHref && (onclickHref.includes(digitalSsoMatchUrl))) {
        let btnHref = decodeURIComponent(onclickHref);
        if (btnHref) {
            let newBtnHref = formulateCustomerBtnHref(btnHref, emailName);
            if (newBtnHref) {
                ele.attr('href', newBtnHref);
            }
        }
    } else if (emailName && digitalSsoMatchUrl) {
        let btnHref = decodeURIComponent(onclickHref);
        if (btnHref) {
            let newBtnHref = formulateCustomerBtnHref(btnHref, emailName);
            if (newBtnHref) {
                ele.attr('href', newBtnHref);
            }
        }
    }
}
function updateZipInputApplyURLDomain(oldURL, newURL) {
  if (typeof ZipUtils === 'undefined' || typeof ZipUtils.dialog === 'undefined') return;
  let applylinkcodes = JSON.parse(ZipUtils.dialog.settings().applylinkcodes || "[{}]");
  applylinkcodes.forEach(function (link) {
    url = String(link.url);
    if (url.includes(oldURL) && !url.includes(newURL)) {
      link.url = url.replace(oldURL, newURL);
    }
  })
  ZipUtils.dialog.settings().applylinkcodes = JSON.stringify(applylinkcodes);
}

function updateOnboardingButtonDomain(button, oldURL, newURL) {
  Object.keys(button.dataset).forEach(function (dataKey) {
    dataValue = button.dataset[dataKey];
    if (dataValue.includes(oldURL) && !dataValue.includes(newURL)) {
      button.dataset[dataKey] = dataValue.replace(oldURL, newURL);
    }
  });
}

function updateOnboardingLinksDomain(oldURL, newURL) {
  document.querySelectorAll('a[href*="' + oldURL + '"]').forEach(function (link) {
    if (!link.href.includes(newURL)) {
      link.href = link.href.replace(oldURL.replace(/[<>&%;(){}\s\t\n!]/g, ""), newURL.replace(/[<>&%;(){}\s\t\n!]/g, ""));
    }
  });
  document.querySelectorAll("button").forEach(function (button) {
    updateOnboardingButtonDomain(button, oldURL, newURL);
  });
  document.querySelectorAll("template.shield-modals").forEach(function (template) {
    template.content.querySelectorAll("button").forEach(function (button) {
      updateOnboardingButtonDomain(button, oldURL, newURL);
    });
  });
}

function updateOnboardingDomain() {
  $.ajax({
    url: "/svt/ecm/genericList",
    success: function (response) {
      let applyURLJSONObj = JSON.parse(response);
      Object.keys(applyURLJSONObj).forEach(function (key) {
        if (applyURLJSONObj[key]) {
          updateOnboardingLinksDomain(key, applyURLJSONObj[key]);
          updateZipInputApplyURLDomain(key, applyURLJSONObj[key]);
        }
      });
    },
    error: function (error) {
      console.log("API call for apply link redirect failed", error);
    }
  })
}
if (/^(it|uat)/.test(window.location.hostname) && !(/https:\/\/www\.usbank\.com/.test(window.location.origin)))
  updateOnboardingDomain();

var mortgageUtils = mortgageUtils || {};

(function(){
        mortgageUtils = {
                loadingSpinner:   {
                        show: function() {
                                var spinner = document.createElement('div');
                                spinner.id = 'loadingSpinner';
                             
                                spinner.innerHTML = '<div class="spinner"></div>';
                                document.body.appendChild(spinner);
                        },
                        hide: function() {
                                var spinner = document.getElementById('loadingSpinner');
                                if (spinner) {
                                        spinner.remove();
                                }
                        }
                }
        }
})();
